import{j as n,s as X}from"./supabase.DNkd6bxA.js";import{r as l}from"./index.C0Fn7Wtz.js";import{u as Sa}from"./usePermissao.72SYthuA.js";import{c as M,p as Le,b as _a,i as Da,s as ye,d as Na,e as Ca,f as Xt,g as Ba,h as Ka,j as oe,k as Ra,l as Ta,m as Ma,n as La,o as je,q as za,r as $a,t as Va,u as Wa,v as Fa,w as Ga,x as Ze,y as Qt,z as et,A as qa,B as Ua,C as Ya,D as tt,E as ze,F as bt,G as Zt,S as Ja,H as yt,I as me,J as Ha,K as at,M as le,Z as $e,N as ea,O as ta,P as aa,Q as Xa,U as se,V as He,W as De,_ as pt,$ as Qa,a0 as jt,a1 as ra,a2 as Za,a3 as er,a4 as tr,a5 as Pt,a6 as na,a7 as ia,a8 as ar,a9 as xe,aa as vt,ab as rr,ac as nr,ad as rt,ae as ft,af as ir,ag as sa,ah as sr,ai as or,aj as lr,ak as dr,al as cr,am as ur,an as mr,ao as pr,ap as vr,aq as Kt,ar as fr,as as hr,at as gr,au as Ne,av as Ce,aw as xr,ax as oa,ay as la,az as da,aA as br,aB as yr,aC as Rt,aD as jr,aE as Pr,aF as Tt,aG as wr,aH as Or,aI as ca,aJ as Ar,aK as Ir,aL as kr,aM as Er,aN as Sr,aO as _r,R as Ee,X as qe,Y as Ue,T as Se,L as Dr,a as Nr}from"./LineChart.BvtkNKdM.js";import"./index.2_Y_w1Vs.js";var ue=e=>null;ue.displayName="Cell";var ua=e=>e.graphicalItems.polarItems,Cr=M([Le,_a],Da),nt=M([ua,ye,Cr],Na),Br=M([nt],Ca),it=M([Br,Xt],Ba),Kr=M([it,ye,nt],Ka);M([it,ye,nt],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(i=>{var s,c=oe(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:c,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:oe(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Mt=()=>{},Rr=M([it,ye,nt,Ra,Le],Ta),Tr=M([ye,Ma,La,Mt,Rr,Mt,je,Le],za),ma=M([ye,je,it,Kr,$a,Le,Tr],Va),Mr=M([ma,ye,Wa],Fa);M([ye,ma,Mr,Le],Ga);function Lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lt(Object(a),!0).forEach(function(r){Lr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Lr(e,t,a){return(t=zr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zr(e){var t=$r(e,"string");return typeof t=="symbol"?t:t+""}function $r(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Vr=(e,t)=>t,wt=M([ua,Vr],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Wr=[],Ot=(e,t,a)=>a?.length===0?Wr:a,pa=M([Xt,wt,Ot],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&a!=null&&(i=a.map(s=>zt(zt({},t.presentationProps),s.props))),i!=null)return i}}),Fr=M([pa,wt,Ot],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,c=oe(r,t.nameKey,t.name),v;return a!=null&&(s=a[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?v=a[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?v=r.fill:v=t.fill,{value:Ze(c,t.dataKey),color:v,payload:r,type:t.legendType}})}),Gr=M([pa,wt,Ot,Qt],(e,t,a,r)=>{if(!(t==null||e==null))return pn({offset:r,pieSettings:t,displayedData:e,cells:a})}),At=(e,t,a)=>{var r=et();return(i,s)=>c=>{e?.(i,s,c),r(qa({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},It=e=>{var t=et();return(a,r)=>i=>{e?.(a,r,i),t(Ua())}},kt=(e,t,a)=>{var r=et();return(i,s)=>c=>{e?.(i,s,c),r(Ya({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},qr=["key"],Ur=["onMouseEnter","onClick","onMouseLeave"],Yr=["id"],Jr=["id"];function $t(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function z(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?$t(Object(a),!0).forEach(function(r){Hr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):$t(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Hr(e,t,a){return(t=Xr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Xr(e){var t=Qr(e,"string");return typeof t=="symbol"?t:t+""}function Qr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},be.apply(null,arguments)}function st(e,t){if(e==null)return{};var a,r,i=Zr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Zr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function en(e){var t=l.useMemo(()=>yt(e.children,ue),[e.children]),a=me(r=>Fr(r,e.id,t));return a==null?null:l.createElement(Ha,{legendPayload:a})}var tn=l.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:i,strokeWidth:s,fill:c,name:v,hide:b,tooltipType:p}=e,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:c,dataKey:t,nameKey:a,name:Ze(v,t),hide:b,type:p,color:c,unit:""}};return l.createElement(ea,{tooltipEntrySettings:h})}),an=(e,t)=>e>t?"start":e<t?"end":"middle",rn=(e,t,a)=>typeof t=="function"?xe(t(e),a,a*.8):xe(t,a,a*.8),nn=(e,t,a)=>{var{top:r,left:i,width:s,height:c}=t,v=ar(s,c),b=i+xe(e.cx,s,s/2),p=r+xe(e.cy,c,c/2),h=xe(e.innerRadius,v,0),g=rn(a,e.outerRadius,v),x=e.maxRadius||Math.sqrt(s*s+c*c)/2;return{cx:b,cy:p,innerRadius:h,outerRadius:g,maxRadius:x}},sn=(e,t)=>{var a=De(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function on(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var ln=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var a=at("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=st(t,qr);return l.createElement(rr,be({},i,{type:"linear",className:a}))},dn=(e,t,a)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),l.isValidElement(r)))return r;var i=at("recharts-pie-label-text",on(e));return l.createElement(nr,be({},t,{alignmentBaseline:"middle",className:i}),r)};function cn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i,labelLine:s,dataKey:c}=a;if(!r||!i||!t)return null;var v=bt(a),b=vt(i),p=vt(s),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((x,j)=>{var A=(x.startAngle+x.endAngle)/2,P=pt(x.cx,x.cy,x.outerRadius+h,A),k=z(z(z(z({},v),x),{},{stroke:"none"},b),{},{index:j,textAnchor:an(P.x,x.cx)},P),f=z(z(z(z({},v),x),{},{fill:"none",stroke:x.fill},p),{},{index:j,points:[pt(x.cx,x.cy,x.outerRadius,A),P],key:"line"});return l.createElement($e,{zIndex:ze.label,key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(j)},l.createElement(le,null,s&&ln(s,f),dn(i,k,oe(x,c))))});return l.createElement(le,{className:"recharts-pie-labels"},g)}function un(e){var{sectors:t,props:a,showLabels:r}=e,{label:i}=a;return typeof i=="object"&&i!=null&&"position"in i?l.createElement(ia,{label:i}):l.createElement(cn,{sectors:t,props:a,showLabels:r})}function mn(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:i,shape:s,id:c}=e,v=me(jt),b=me(ra),p=me(Za),{onMouseEnter:h,onClick:g,onMouseLeave:x}=i,j=st(i,Ur),A=At(h,i.dataKey,c),P=It(x),k=kt(g,i.dataKey,c);return t==null||t.length===0?null:l.createElement(l.Fragment,null,t.map((f,y)=>{if(f?.startAngle===0&&f?.endAngle===0&&t.length!==1)return null;var N=p==null||p===c,I=String(y)===v&&(b==null||i.dataKey===b)&&N,K=v?r:null,w=a&&I?a:K,C=z(z({},f),{},{stroke:f.stroke,tabIndex:-1,[tr]:y,[er]:i.dataKey});return l.createElement(le,be({key:"sector-".concat(f?.startAngle,"-").concat(f?.endAngle,"-").concat(f.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},Pt(j,f,y),{onMouseEnter:A(f,y),onMouseLeave:P(f,y),onClick:k(f,y)}),l.createElement(na,be({option:s??w,index:y,shapeType:"sector",isActive:I},C)))}))}function pn(e){var t,{pieSettings:a,displayedData:r,cells:i,offset:s}=e,{cornerRadius:c,startAngle:v,endAngle:b,dataKey:p,nameKey:h,tooltipType:g}=a,x=Math.abs(a.minAngle),j=sn(v,b),A=Math.abs(j),P=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,k=r.filter(w=>oe(w,p,0)!==0).length,f=(A>=360?k:k-1)*P,y=A-k*x-f,N=r.reduce((w,C)=>{var _=oe(C,p,0);return w+(He(_)?_:0)},0),I;if(N>0){var K;I=r.map((w,C)=>{var _=oe(w,p,0),S=oe(w,h,C),D=nn(a,s,w),W=(He(_)?_:0)/N,L,Z=z(z({},w),i&&i[C]&&i[C].props);C?L=K.endAngle+De(j)*P*(_!==0?1:0):L=v;var ae=L+De(j)*((_!==0?x:0)+W*y),F=(L+ae)/2,U=(D.innerRadius+D.outerRadius)/2,ee=[{name:S,value:_,payload:Z,dataKey:p,type:g}],re=pt(D.cx,D.cy,U,F);return K=z(z(z(z({},a.presentationProps),{},{percent:W,cornerRadius:typeof c=="string"?parseFloat(c):c,name:S,tooltipPayload:ee,midAngle:F,middleRadius:U,tooltipPosition:re},Z),D),{},{value:_,dataKey:p,startAngle:L,endAngle:ae,payload:Z,paddingAngle:De(j)*P}),K})}return I}function vn(e){var{showLabels:t,sectors:a,children:r}=e,i=l.useMemo(()=>!t||!a?[]:a.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[a,t]);return l.createElement(Qa,{value:t?i:void 0},r)}function fn(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:i,isAnimationActive:s,animationBegin:c,animationDuration:v,animationEasing:b,activeShape:p,inactiveShape:h,onAnimationStart:g,onAnimationEnd:x}=t,j=ta(t,"recharts-pie-"),A=a.current,[P,k]=l.useState(!1),f=l.useCallback(()=>{typeof x=="function"&&x(),k(!1)},[x]),y=l.useCallback(()=>{typeof g=="function"&&g(),k(!0)},[g]);return l.createElement(vn,{showLabels:!P,sectors:i},l.createElement(aa,{animationId:j,begin:c,duration:v,isActive:s,easing:b,onAnimationStart:y,onAnimationEnd:f,key:j},N=>{var I=[],K=i&&i[0],w=K?.startAngle;return i?.forEach((C,_)=>{var S=A&&A[_],D=_>0?Xa(C,"paddingAngle",0):0;if(S){var W=se(S.endAngle-S.startAngle,C.endAngle-C.startAngle,N),L=z(z({},C),{},{startAngle:w+D,endAngle:w+W+D});I.push(L),w=L.endAngle}else{var{endAngle:Z,startAngle:ae}=C,F=se(0,Z-ae,N),U=z(z({},C),{},{startAngle:w+D,endAngle:w+F+D});I.push(U),w=U.endAngle}}),a.current=I,l.createElement(le,null,l.createElement(mn,{sectors:I,activeShape:p,inactiveShape:h,allOtherPieProps:t,shape:t.shape,id:r}))}),l.createElement(un,{showLabels:!P,sectors:i,props:t}),t.children)}var hn={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:ze.area};function gn(e){var{id:t}=e,a=st(e,Yr),{hide:r,className:i,rootTabIndex:s}=e,c=l.useMemo(()=>yt(e.children,ue),[e.children]),v=me(h=>Gr(h,t,c)),b=l.useRef(null),p=at("recharts-pie",i);return r||v==null?(b.current=null,l.createElement(le,{tabIndex:s,className:p})):l.createElement($e,{zIndex:e.zIndex},l.createElement(tn,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:v,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),l.createElement(le,{tabIndex:s,className:p},l.createElement(fn,{props:z(z({},a),{},{sectors:v}),previousSectorsRef:b,id:t})))}function ht(e){var t=tt(e,hn),{id:a}=t,r=st(t,Jr),i=bt(r);return l.createElement(Zt,{id:a,type:"pie"},s=>l.createElement(l.Fragment,null,l.createElement(Ja,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),l.createElement(en,be({},r,{id:s})),l.createElement(gn,be({},r,{id:s}))))}ht.displayName="Pie";var xn="Invariant failed";function bn(e,t){throw new Error(xn)}var yn=["x","y"];function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},gt.apply(null,arguments)}function Vt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Te(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Vt(Object(a),!0).forEach(function(r){jn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Vt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function jn(e,t,a){return(t=Pn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pn(e){var t=wn(e,"string");return typeof t=="symbol"?t:t+""}function wn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function On(e,t){if(e==null)return{};var a,r,i=An(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function An(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function In(e,t){var{x:a,y:r}=e,i=On(e,yn),s="".concat(a),c=parseInt(s,10),v="".concat(r),b=parseInt(v,10),p="".concat(t.height||i.height),h=parseInt(p,10),g="".concat(t.width||i.width),x=parseInt(g,10);return Te(Te(Te(Te(Te({},t),i),c?{x:c}:{}),b?{y:b}:{}),{},{height:h,width:x,name:t.name,radius:t.radius})}function Xe(e){return l.createElement(na,gt({shapeType:"rectangle",propTransformer:In,activeClassName:"recharts-active-bar"},e))}var kn=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(He(t))return t;var s=He(r)||rt(r);return s?t(r,i):(s||bn(),a)}};function En(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ft(e.zIndex)?e.zIndex:t}var Sn=["onMouseEnter","onMouseLeave","onClick"],_n=["value","background","tooltipPosition"],Dn=["id"],Nn=["onMouseEnter","onClick","onMouseLeave"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},pe.apply(null,arguments)}function Wt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Wt(Object(a),!0).forEach(function(r){Cn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Wt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Cn(e,t,a){return(t=Bn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Bn(e){var t=Kn(e,"string");return typeof t=="symbol"?t:t+""}function Kn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Qe(e,t){if(e==null)return{};var a,r,i=Rn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Rn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Tn=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Ze(a,t),payload:e}]},Mn=l.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:s,hide:c,unit:v,tooltipType:b}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Ze(s,t),hide:c,type:b,color:i,unit:v}};return l.createElement(ea,{tooltipEntrySettings:p})});function Ln(e){var t=me(jt),{data:a,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:c,onMouseLeave:v,onClick:b}=s,p=Qe(s,Sn),h=At(c,r),g=It(v),x=kt(b,r);if(!i||a==null)return null;var j=vt(i);return l.createElement($e,{zIndex:En(i,ze.barBackground)},a.map((A,P)=>{var{value:k,background:f,tooltipPosition:y}=A,N=Qe(A,_n);if(!f)return null;var I=h(A,P),K=g(A,P),w=x(A,P),C=q(q(q(q(q({option:i,isActive:String(P)===t},N),{},{fill:"#eee"},f),j),Pt(p,A,P)),{},{onMouseEnter:I,onMouseLeave:K,onClick:w,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return l.createElement(Xe,pe({key:"background-bar-".concat(P)},C))}))}function zn(e){var{showLabels:t,children:a,rects:r}=e,i=r?.map(s=>{var c={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return q(q({},c),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:c,fill:s.fill})});return l.createElement(fr,{value:t?i:void 0},a)}function $n(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:s,dataKey:c}=e,v=me(jt),b=me(ra),p=a&&String(s)===v&&(b==null||c===b),h=p?a:t;return p?l.createElement($e,{zIndex:ze.activeBar},l.createElement(Xe,pe({},r,{name:String(r.name)},i,{isActive:p,option:h,index:s,dataKey:c}))):l.createElement(Xe,pe({},r,{name:String(r.name)},i,{isActive:p,option:h,index:s,dataKey:c}))}function Vn(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:s}=e;return l.createElement(Xe,pe({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:s}))}function Wn(e){var t,{data:a,props:r}=e,i=(t=bt(r))!==null&&t!==void 0?t:{},{id:s}=i,c=Qe(i,Dn),{shape:v,dataKey:b,activeBar:p}=r,{onMouseEnter:h,onClick:g,onMouseLeave:x}=r,j=Qe(r,Nn),A=At(h,b),P=It(x),k=kt(g,b);return a?l.createElement(l.Fragment,null,a.map((f,y)=>l.createElement(le,pe({key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(y),className:"recharts-bar-rectangle"},Pt(j,f,y),{onMouseEnter:A(f,y),onMouseLeave:P(f,y),onClick:k(f,y)}),p?l.createElement($n,{shape:v,activeBar:p,baseProps:c,entry:f,index:y,dataKey:b}):l.createElement(Vn,{shape:v,baseProps:c,entry:f,index:y,dataKey:b})))):null}function Fn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:c,animationDuration:v,animationEasing:b,onAnimationEnd:p,onAnimationStart:h}=t,g=a.current,x=ta(t,"recharts-bar-"),[j,A]=l.useState(!1),P=!j,k=l.useCallback(()=>{typeof p=="function"&&p(),A(!1)},[p]),f=l.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return l.createElement(zn,{showLabels:P,rects:r},l.createElement(aa,{animationId:x,begin:c,duration:v,isActive:s,easing:b,onAnimationEnd:k,onAnimationStart:f,key:x},y=>{var N=y===1?r:r?.map((I,K)=>{var w=g&&g[K];if(w)return q(q({},I),{},{x:se(w.x,I.x,y),y:se(w.y,I.y,y),width:se(w.width,I.width,y),height:se(w.height,I.height,y)});if(i==="horizontal"){var C=se(0,I.height,y),_=se(I.stackedBarStart,I.y,y);return q(q({},I),{},{y:_,height:C})}var S=se(0,I.width,y),D=se(I.stackedBarStart,I.x,y);return q(q({},I),{},{width:S,x:D})});return y>0&&(a.current=N??null),N==null?null:l.createElement(le,null,l.createElement(Wn,{props:t,data:N}))}),l.createElement(ia,{label:t.label}),t.children)}function Gn(e){var t=l.useRef(null);return l.createElement(Fn,{previousRectanglesRef:t,props:e})}var va=0,qn=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:oe(e,t)}};class Un extends l.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:i,xAxisId:s,yAxisId:c,needClip:v,background:b,id:p}=this.props;if(t||a==null)return null;var h=at("recharts-bar",i),g=p;return l.createElement(le,{className:h,id:p},v&&l.createElement("defs",null,l.createElement(mr,{clipPathId:g,xAxisId:s,yAxisId:c})),l.createElement(le,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(g,")"):void 0},l.createElement(Ln,{data:a,dataKey:r,background:b,allOtherBarProps:this.props}),l.createElement(Gn,this.props)))}}var Yn={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:va,xAxisId:0,yAxisId:0,zIndex:ze.bar};function Jn(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:s,activeBar:c,animationBegin:v,animationDuration:b,animationEasing:p,isAnimationActive:h}=e,{needClip:g}=dr(t,a),x=cr(),j=sa(),A=yt(e.children,ue),P=me(y=>wi(y,t,a,j,e.id,A));if(x!=="vertical"&&x!=="horizontal")return null;var k,f=P?.[0];return f==null||f.height==null||f.width==null?k=0:k=x==="vertical"?f.height/2:f.width/2,l.createElement(ur,{xAxisId:t,yAxisId:a,data:P,dataPointFormatter:qn,errorBarOffset:k},l.createElement(Un,pe({},e,{layout:x,needClip:g,data:P,xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:s,activeBar:c,animationBegin:v,animationDuration:b,animationEasing:p,isAnimationActive:h})))}function Hn(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:s,xAxis:c,yAxis:v,xAxisTicks:b,yAxisTicks:p,stackedData:h,displayedData:g,offset:x,cells:j,parentViewBox:A,dataStartIndex:P}=e,k=t==="horizontal"?v:c,f=h?k.scale.domain():null,y=pr({numericAxis:k}),N=k.scale(y);return g.map((I,K)=>{var w,C,_,S,D,W;h?w=vr(h[K+P],f):(w=oe(I,a),Array.isArray(w)||(w=[y,w]));var L=kn(r,va)(w[1],K);if(t==="horizontal"){var Z,[ae,F]=[v.scale(w[0]),v.scale(w[1])];C=Kt({axis:c,ticks:b,bandSize:s,offset:i.offset,entry:I,index:K}),_=(Z=F??ae)!==null&&Z!==void 0?Z:void 0,S=i.size;var U=ae-F;if(D=hr(U)?0:U,W={x:C,y:x.top,width:S,height:x.height},Math.abs(L)>0&&Math.abs(D)<Math.abs(L)){var ee=De(D||L)*(Math.abs(L)-Math.abs(D));_-=ee,D+=ee}}else{var[re,de]=[c.scale(w[0]),c.scale(w[1])];if(C=re,_=Kt({axis:v,ticks:p,bandSize:s,offset:i.offset,entry:I,index:K}),S=de-re,D=i.size,W={x:x.left,y:_,width:x.width,height:D},Math.abs(L)>0&&Math.abs(S)<Math.abs(L)){var Pe=De(S||L)*(Math.abs(L)-Math.abs(S));S+=Pe}}if(C==null||_==null||S==null||D==null)return null;var we=q(q({},I),{},{stackedBarStart:N,x:C,y:_,width:S,height:D,value:h?w:w[1],payload:I,background:W,tooltipPosition:{x:C+S/2,y:_+D/2},parentViewBox:A},j&&j[K]&&j[K].props);return we}).filter(Boolean)}function Xn(e){var t=tt(e,Yn),a=sa();return l.createElement(Zt,{id:t.id,type:"bar"},r=>l.createElement(l.Fragment,null,l.createElement(sr,{legendPayload:Tn(t)}),l.createElement(Mn,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),l.createElement(or,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:lr(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),l.createElement($e,{zIndex:t.zIndex},l.createElement(Jn,pe({},t,{id:r})))))}var Je=l.memo(Xn,ir);Je.displayName="Bar";function Ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Ye(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ft(Object(a),!0).forEach(function(r){Qn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ft(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Qn(e,t,a){return(t=Zn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Zn(e){var t=ei(e,"string");return typeof t=="symbol"?t:t+""}function ei(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ti=(e,t)=>t,ai=(e,t,a)=>a,ri=(e,t,a,r)=>r,ni=(e,t,a,r,i)=>i,Ve=M([la,ni],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),ii=M([Ve],e=>e?.maxBarSize),si=(e,t,a,r,i,s)=>s,Gt=(e,t,a)=>{var r=a??e;if(!rt(r))return xe(r,t,0)},oi=M([je,la,ti,ai,ri],(e,t,a,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===a:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),li=(e,t,a,r)=>{var i=je(e);return i==="horizontal"?Rt(e,"yAxis",a,r):Rt(e,"xAxis",t,r)},di=(e,t,a)=>{var r=je(e);return r==="horizontal"?Tt(e,"xAxis",t):Tt(e,"yAxis",a)},ci=(e,t,a)=>{var r={},i=e.filter(wr),s=e.filter(p=>p.stackId==null),c=i.reduce((p,h)=>(p[h.stackId]||(p[h.stackId]=[]),p[h.stackId].push(h),p),r),v=Object.entries(c).map(p=>{var[h,g]=p,x=g.map(A=>A.dataKey),j=Gt(t,a,g[0].barSize);return{stackId:h,dataKeys:x,barSize:j}}),b=s.map(p=>{var h=[p.dataKey].filter(x=>x!=null),g=Gt(t,a,p.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...v,...b]},ui=M([oi,Pr,di],ci),mi=(e,t,a,r,i)=>{var s,c,v=Ve(e,t,a,r,i);if(v!=null){var b=je(e),p=da(e),{maxBarSize:h}=v,g=rt(h)?p:h,x,j;return b==="horizontal"?(x=Ne(e,"xAxis",t,r),j=Ce(e,"xAxis",t,r)):(x=Ne(e,"yAxis",a,r),j=Ce(e,"yAxis",a,r)),(s=(c=oa(x,j,!0))!==null&&c!==void 0?c:g)!==null&&s!==void 0?s:0}},fa=(e,t,a,r)=>{var i=je(e),s,c;return i==="horizontal"?(s=Ne(e,"xAxis",t,r),c=Ce(e,"xAxis",t,r)):(s=Ne(e,"yAxis",a,r),c=Ce(e,"yAxis",a,r)),oa(s,c)};function pi(e,t,a,r,i){var s=r.length;if(!(s<1)){var c=xe(e,a,0,!0),v,b=[];if(ft(r[0].barSize)){var p=!1,h=a/s,g=r.reduce((f,y)=>f+(y.barSize||0),0);g+=(s-1)*c,g>=a&&(g-=(s-1)*c,c=0),g>=a&&h>0&&(p=!0,h*=.9,g=s*h);var x=(a-g)/2>>0,j={offset:x-c,size:0};v=r.reduce((f,y)=>{var N,I={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:j.offset+j.size+c,size:p?h:(N=y.barSize)!==null&&N!==void 0?N:0}},K=[...f,I];return j=K[K.length-1].position,K},b)}else{var A=xe(t,a,0,!0);a-2*A-(s-1)*c<=0&&(c=0);var P=(a-2*A-(s-1)*c)/s;P>1&&(P>>=0);var k=ft(i)?Math.min(P,i):P;v=r.reduce((f,y,N)=>[...f,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A+(P+c)*N+(P-k)/2,size:k}}],b)}return v}}var vi=(e,t,a,r,i,s,c)=>{var v=rt(c)?t:c,b=pi(a,r,i!==s?i:s,e,v);return i!==s&&b!=null&&(b=b.map(p=>Ye(Ye({},p),{},{position:Ye(Ye({},p.position),{},{offset:p.position.offset-i/2})}))),b},fi=M([ui,da,br,yr,mi,fa,ii],vi),hi=(e,t,a,r)=>Ne(e,"xAxis",t,r),gi=(e,t,a,r)=>Ne(e,"yAxis",a,r),xi=(e,t,a,r)=>Ce(e,"xAxis",t,r),bi=(e,t,a,r)=>Ce(e,"yAxis",a,r),yi=M([fi,Ve],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),ji=(e,t)=>{var a=jr(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(c=>c.key===a)}}}},Pi=M([li,Ve],ji),wi=M([Qt,gr,hi,gi,xi,bi,yi,je,xr,fa,Pi,Ve,si],(e,t,a,r,i,s,c,v,b,p,h,g,x)=>{var{chartData:j,dataStartIndex:A,dataEndIndex:P}=b;if(!(g==null||c==null||t==null||v!=="horizontal"&&v!=="vertical"||a==null||r==null||i==null||s==null||p==null)){var{data:k}=g,f;if(k!=null&&k.length>0?f=k:f=j?.slice(A,P+1),f!=null)return Hn({layout:v,barSettings:g,pos:c,parentViewBox:t,bandSize:p,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:f,offset:e,cells:x,dataStartIndex:A})}}),Oi=["axis","item"],mt=l.forwardRef((e,t)=>l.createElement(Or,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Oi,tooltipPayloadSearcher:ca,categoricalChartProps:e,ref:t}));function Ai(e){var t=et();return l.useEffect(()=>{t(Ar(e))},[t,e]),null}var Ii=["layout"];function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},xt.apply(null,arguments)}function ki(e,t){if(e==null)return{};var a,r,i=Ei(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ei(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Si={top:5,right:5,bottom:5,left:5},ha={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Si,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},_i=l.forwardRef(function(t,a){var r,i=tt(t.categoricalChartProps,ha),{layout:s}=i,c=ki(i,Ii),{chartName:v,defaultTooltipEventType:b,validateTooltipEventTypes:p,tooltipPayloadSearcher:h}=t,g={chartName:v,defaultTooltipEventType:b,validateTooltipEventTypes:p,tooltipPayloadSearcher:h,eventEmitter:void 0};return l.createElement(Ir,{preloadedState:{options:g},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:v},l.createElement(kr,{chartData:i.data}),l.createElement(Er,{layout:s,margin:i.margin}),l.createElement(Sr,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),l.createElement(Ai,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),l.createElement(_r,xt({},c,{ref:a})))});function qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Ut(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qt(Object(a),!0).forEach(function(r){Di(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Di(e,t,a){return(t=Ni(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ni(e){var t=Ci(e,"string");return typeof t=="symbol"?t:t+""}function Ci(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bi=["item"],Ki=Ut(Ut({},ha),{},{layout:"centric",startAngle:0,endAngle:360}),Yt=l.forwardRef((e,t)=>{var a=tt(e,Ki);return l.createElement(_i,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Bi,tooltipPayloadSearcher:ca,categoricalChartProps:a,ref:t})});const Me=[{id:"kpis",titulo:"KPIs principais"},{id:"vendas_destino",titulo:"Vendas por destino"},{id:"vendas_produto",titulo:"Vendas por produto"},{id:"timeline",titulo:"Evolução das vendas"},{id:"orcamentos",titulo:"Orçamentos recentes"},{id:"aniversariantes",titulo:"Aniversariantes"}],_e=[{id:"kpi_vendas_total",titulo:"Vendas no período"},{id:"kpi_qtd_vendas",titulo:"Qtd. vendas"},{id:"kpi_ticket_medio",titulo:"Ticket médio"},{id:"kpi_orcamentos",titulo:"Orçamentos"},{id:"kpi_conversao",titulo:"Conv. Orç → Vendas"},{id:"kpi_meta",titulo:"Meta somada (R$)"},{id:"kpi_atingimento",titulo:"Atingimento da meta"}];function J(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Jt(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),r=i=>i.toISOString().substring(0,10);return{inicio:r(t),fim:r(a)}}function Ri(e){const t=new Date,a=new Date;a.setDate(t.getDate()-(e-1));const r=i=>i.toISOString().substring(0,10);return{inicio:r(a),fim:r(t)}}function Ht(e){if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return null;const a=new Date;let r=a.getFullYear()-t.getFullYear();const i=a.getMonth()-t.getMonth();return(i<0||i===0&&a.getDate()<t.getDate())&&r--,r}const Q=["#7c3aed","#a855f7","#6366f1","#ec4899","#22c55e"],Vi=()=>{const[e,t]=l.useState(null),[a,r]=l.useState(!0),i=Sa("Dashboard"),[s,c]=l.useState("mes_atual"),[v,b]=l.useState(""),[p,h]=l.useState(""),[g,x]=l.useState([]),[j,A]=l.useState([]),[P,k]=l.useState([]),[f,y]=l.useState([]),[N,I]=l.useState([]),[K,w]=l.useState(!0),[C,_]=l.useState(null),[S,D]=l.useState(Me.map(d=>d.id)),[W,L]=l.useState(()=>Me.reduce((d,m)=>({...d,[m.id]:!0}),{})),[Z,ae]=l.useState(!1),[F,U]=l.useState(_e.map(d=>d.id)),[ee,re]=l.useState(()=>_e.reduce((d,m)=>({...d,[m.id]:!0}),{})),de=l.useMemo(()=>[..._e,...N],[N]),Pe=l.useMemo(()=>{const d=de.map(u=>u.id),m=F.filter(u=>d.includes(u)),o=d.filter(u=>!m.includes(u));return[...m,...o]},[F,de]),we=l.useMemo(()=>{const d={};return de.forEach(m=>{d[m.id]=ee[m.id]!==!1}),d},[ee,de]),[ne,We]=l.useState({vendas_destino:"pie",vendas_produto:"bar",timeline:"line"}),ga=d=>{const m={...W,[d]:!W[d]};L(m),Ke(S,m,{order:Pe,visible:we})},xa=d=>{const m={...we,[d]:!we[d]};re(m),Ke(S,W,{order:Pe,visible:m})},Et=(d,m)=>{const o=S.indexOf(d);if(o===-1)return;const u=[...S],O=m==="up"?o-1:o+1;O<0||O>=u.length||([u[o],u[O]]=[u[O],u[o]],D(u),Ke(u,W,{order:F,visible:ee},ne))},St=(d,m)=>{const o=F.indexOf(d);if(o===-1)return;const u=[...F],O=m==="up"?o-1:o+1;O<0||O>=u.length||([u[o],u[O]]=[u[O],u[o]],U(u),Ke(S,W,{order:u,visible:ee},ne))},ot=(d,m)=>{const o={...ne,[d]:m};We(o),Ke(S,W,{order:F,visible:ee},o)},Be=d=>W[d]!==!1;function ba(d,m,o){typeof window<"u"&&(window.localStorage.setItem("dashboard_kpis",JSON.stringify({order:d,visible:m})),o&&window.localStorage.setItem("dashboard_charts",JSON.stringify(o)))}async function Ke(d,m,o,u){try{if(e?.usuarioId){const O=d.map((R,V)=>({usuario_id:e.usuarioId,widget:R,ordem:V,visivel:m[R]!==!1,settings:R==="kpis"&&o?{kpis:{order:o.order,visible:o.visible},charts:u||null}:R==="vendas_destino"||R==="vendas_produto"||R==="timeline"?{charts:u||null}:null}));await X.from("dashboard_widgets").delete().eq("usuario_id",e.usuarioId);try{await X.from("dashboard_widgets").insert(O)}catch{const V=O.map(Y=>{const G={...Y};return delete G.settings,G});await X.from("dashboard_widgets").insert(V)}}}catch(O){console.warn("Não foi possível salvar preferências no Supabase, mantendo localStorage.",O)}finally{typeof window<"u"&&(window.localStorage.setItem("dashboard_widgets",JSON.stringify({order:d,visible:m})),o&&ba(o.order,o.visible,u),u&&window.localStorage.setItem("dashboard_charts",JSON.stringify(u)))}}const[te,_t]=l.useState(null),[Ie,Dt]=l.useState(null);l.useEffect(()=>{const{inicio:d,fim:m}=Jt();b(d),h(m),c("mes_atual")},[]);function Nt(d){if(c(d),d==="mes_atual"){const{inicio:m,fim:o}=Jt();b(m),h(o)}else if(d==="ultimos_30"){const{inicio:m,fim:o}=Ri(30);b(m),h(o)}}l.useEffect(()=>{async function d(){try{r(!0),_(null);const{data:m,error:o}=await X.auth.getUser();if(o||!m?.user){_("Usuário não autenticado.");return}const u=m.user.id,{data:O,error:R}=await X.from("users").select("id, nome_completo, user_types(name)").eq("id",u).maybeSingle();R&&console.error(R);const V=O?.user_types?.name||m.user.user_metadata?.name||"",Y=String(V||"").toUpperCase();let G="VENDEDOR";Y.includes("ADMIN")?G="ADMIN":Y.includes("GESTOR")?G="GESTOR":Y.includes("VENDEDOR")?G="VENDEDOR":G="OUTRO";let ie=[u];if(G==="GESTOR"){const{data:Oe,error:Ae}=await X.from("gestor_vendedor").select("vendedor_id").eq("gestor_id",u);if(!Ae&&Oe){const ce=Oe.map($=>$.vendedor_id).filter($=>!!$);ie=Array.from(new Set([u,...ce]))}}else G==="ADMIN"&&(ie=[]);t({usuarioId:u,nome:O?.nome_completo||null,papel:G,vendedorIds:ie})}catch(m){console.error(m),_("Erro ao carregar contexto do usuário.")}finally{r(!1)}}d()},[]),l.useEffect(()=>{const d=de.map(m=>m.id);U(m=>{const o=m.filter(O=>d.includes(O)),u=d.filter(O=>!o.includes(O));return[...o,...u]}),re(m=>{const o={...m};return d.forEach(u=>{o[u]===void 0&&(o[u]=!0)}),Object.keys(o).forEach(u=>{d.includes(u)||delete o[u]}),o})},[de]),l.useEffect(()=>{if(!e||!v||!p)return;async function d(){try{w(!0),_(null);const{data:m}=await X.from("tipo_produtos").select("id, nome, exibe_kpi_comissao");let o=X.from("vendas").select(`
          id,
          data_lancamento,
          data_embarque,
          cancelada,
          vendedor_id,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome),
          vendas_recibos (
            id,
            valor_total,
            valor_taxas,
            produtos:tipo_produtos!produto_id (id, nome, regra_comissionamento, exibe_kpi_comissao)
          )
        `).gte("data_lancamento",v).lte("data_lancamento",p).eq("cancelada",!1);e.vendedorIds.length>0&&(o=o.in("vendedor_id",e.vendedorIds));const{data:u,error:O}=await o;if(O)throw O;const{data:R,error:V}=await X.from("orcamentos").select(`
          id,
          data_orcamento,
          data_viagem,
          status,
          valor,
          notas,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome)
        `).gte("data_orcamento",v).lte("data_orcamento",p).order("data_orcamento",{ascending:!1});if(V)throw V;let Y=X.from("metas_vendedor").select("id, vendedor_id, periodo, meta_geral, meta_diferenciada, ativo").gte("periodo",v).lte("periodo",p).eq("ativo",!0);e.vendedorIds.length>0&&(Y=Y.in("vendedor_id",e.vendedorIds));const{data:G,error:ie}=await Y;if(ie)throw ie;const{data:Oe,error:Ae}=await X.from("clientes").select("id, nome, nascimento, telefone");if(Ae)throw Ae;const ce=(m||[]).filter($=>$.exibe_kpi_comissao!==!1).map($=>({id:`kpi_prod_${$.id}`,titulo:$.nome||"Produto",produtoId:$.id}))||[];I(ce),x(u||[]),A(R||[]),k(G||[]),y(Oe||[]);try{const{data:$,error:Ge}=await X.from("dashboard_widgets").select("widget, ordem, visivel, settings").eq("usuario_id",e.usuarioId).order("ordem",{ascending:!0});if(!Ge&&$&&$.length>0){const ve=new Set([..._e.map(E=>E.id),...ce.map(E=>E.id)]),fe=$.map(E=>E.widget).filter(E=>Me.some(H=>H.id===E)),he={...W};let T={},B=null;$.forEach(E=>{const H=E.widget;if(Me.some(ge=>ge.id===H)&&(he[H]=E.visivel!==!1),H==="kpis"&&E.settings?.kpis&&(Array.isArray(E.settings.kpis.order)&&(T.order=E.settings.kpis.order.filter(ge=>ve.has(ge))),E.settings.kpis.visible)){const ge={};Object.entries(E.settings.kpis.visible).forEach(([Bt,Ea])=>{ve.has(Bt)&&(ge[Bt]=Ea)}),T.visible={...ee,...ge}}E.settings?.charts&&(B={...B||{},...E.settings.charts})}),fe.length>0&&D(fe),L(he),T.order&&T.order.length>0&&U(T.order),T.visible&&re(T.visible),B&&We(E=>({...E,...B}))}else{const ve=new Set([..._e.map(B=>B.id),...ce.map(B=>B.id)]),fe=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(fe){const B=JSON.parse(fe);B.order&&B.visible&&(D(B.order),L(B.visible))}const he=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(he){const B=JSON.parse(he);if(B.order&&U(B.order.filter(E=>ve.has(E))),B.visible){const E={};Object.entries(B.visible).forEach(([H,ge])=>{ve.has(H)&&(E[H]=ge)}),re(H=>({...H,...E}))}}const T=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(T){const B=JSON.parse(T);We(E=>({...E,...B}))}}}catch($){console.warn("Preferências do dashboard não carregadas, usando padrão.",$);const Ge=new Set([..._e.map(T=>T.id),...ce.map(T=>T.id)]),ve=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(ve){const T=JSON.parse(ve);T.order&&T.visible&&(D(T.order),L(T.visible))}const fe=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(fe){const T=JSON.parse(fe);if(T.order&&U(T.order.filter(B=>Ge.has(B))),T.visible){const B={};Object.entries(T.visible).forEach(([E,H])=>{Ge.has(E)&&(B[E]=H)}),re(E=>({...E,...B}))}}const he=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(he){const T=JSON.parse(he);We(B=>({...B,...T}))}}}catch(m){console.error(m),_("Erro ao carregar dados do dashboard.")}finally{w(!1)}}d()},[e,v,p]);const{totalVendas:ya,qtdVendas:ja,ticketMedio:Pa,totalOrcamentos:wa,conversao:Oa,metaSomada:Aa,atingimentoMeta:Ia,valorPorProduto:ka}=l.useMemo(()=>{let d=0,m=g.length;const o={};g.forEach(G=>{const ie=G.vendas_recibos||[];let Oe=0;ie.forEach(Ae=>{const ce=Number(Ae.valor_total||0);Oe+=ce;const $=Ae.produtos?.id||"";$&&(o[$]=(o[$]||0)+ce)}),d+=Oe});const u=m>0?d/m:0,O=j.length,R=O>0?m/O*100:0,V=P.reduce((G,ie)=>G+Number(ie.meta_geral||0),0),Y=V>0?d/V*100:0;return{totalVendas:d,qtdVendas:m,ticketMedio:u,totalOrcamentos:O,conversao:R,metaSomada:V,atingimentoMeta:Y,valorPorProduto:o}},[g,j,P]),Re=l.useMemo(()=>{const d=new Map;return g.forEach(m=>{const o=m.destinos?.nome||"Sem destino",u=(m.vendas_recibos||[]).reduce((O,R)=>O+Number(R.valor_total||0),0);d.set(o,(d.get(o)||0)+u)}),Array.from(d.entries()).map(([m,o])=>({name:m,value:o})).sort((m,o)=>o.value-m.value)},[g]),lt=l.useMemo(()=>Re.slice(0,5),[Re]),ke=l.useMemo(()=>{const d=new Map;return g.forEach(m=>{(m.vendas_recibos||[]).forEach(o=>{const u=o.produtos?.nome||"Sem produto",O=Number(o.valor_total||0);d.set(u,(d.get(u)||0)+O)})}),Array.from(d.entries()).map(([m,o])=>({name:m,value:o}))},[g]),Fe=l.useMemo(()=>{const d=new Map;return g.forEach(o=>{const u=(o.data_lancamento||"").slice(0,10);if(!u)return;const O=(o.vendas_recibos||[]).reduce((R,V)=>R+Number(V.valor_total||0),0);d.set(u,(d.get(u)||0)+O)}),Array.from(d.entries()).sort(([o],[u])=>o<u?-1:1).map(([o,u])=>{const[O,R,V]=o.split("-"),Y=O&&R&&V?`${V.padStart(2,"0")}/${R.padStart(2,"0")}`:o;return{date:o,label:Y,value:u}})},[g]),dt=l.useMemo(()=>[...j].sort((m,o)=>m.data_orcamento<o.data_orcamento?1:-1).slice(0,10),[j]),ct=l.useMemo(()=>{const m=new Date().getMonth();return f.filter(o=>{if(!o.nascimento)return!1;const u=new Date(o.nascimento);return isNaN(u.getTime())?!1:u.getMonth()===m})},[f]),Ct=d=>d.length?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:d.map((m,o)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:2,background:Q[o%Q.length]}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:m.name}),n.jsx("div",{style:{color:"#475569"},children:J(Number(m.value||0))})]})]},`${m.name}-${o}`))}):null;if(a&&!e||i.loading)return n.jsx("div",{children:"Carregando contexto do dashboard..."});if(!i.ativo)return n.jsx("div",{children:"Você não possui acesso ao módulo de Dashboard."});const ut=d=>{switch(d){case"kpis":return n.jsx("div",{className:"card-base card-purple mb-3",style:{paddingBottom:12},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:Pe.filter(o=>we[o]!==!1).map(o=>{if(o==="kpi_vendas_total")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Vendas no período"}),n.jsx("div",{className:"kpi-value",children:J(ya)})]},o);if(o==="kpi_qtd_vendas")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Qtd. vendas"}),n.jsx("div",{className:"kpi-value",children:ja})]},o);if(o==="kpi_ticket_medio")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Ticket médio"}),n.jsx("div",{className:"kpi-value",children:J(Pa)})]},o);if(o==="kpi_orcamentos")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Orçamentos"}),n.jsx("div",{className:"kpi-value",children:wa})]},o);if(o==="kpi_conversao")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Conv. Orç → Vendas"}),n.jsxs("div",{className:"kpi-value",children:[Oa.toFixed(1),"%"]})]},o);if(o==="kpi_meta")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Meta somada (R$)"}),n.jsx("div",{className:"kpi-value",children:J(Aa)})]},o);if(o==="kpi_atingimento")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Atingimento da meta"}),n.jsxs("div",{className:"kpi-value",children:[Ia.toFixed(1),"%"]})]},o);if(o.startsWith("kpi_prod_")){const u=N.find(R=>R.id===o),O=u&&ka[u.produtoId]||0;return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:u?.titulo||"Produto"}),n.jsx("div",{className:"kpi-value",children:J(O)})]},o)}return null})})});case"vendas_destino":const m=ne.vendas_destino==="bar"?"Vendas por Destino (Visão Completa)":"Vendas por destino (Top 5)";return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:m}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:ne.vendas_destino||"pie",onChange:o=>ot("vendas_destino",o.target.value),children:[n.jsx("option",{value:"pie",children:"Pizza"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Re.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):ne.vendas_destino==="bar"?n.jsx(Ee,{children:n.jsxs(mt,{data:Re,children:[n.jsx(qe,{dataKey:"name",hide:!0}),n.jsx(Ue,{}),n.jsx(Se,{formatter:o=>J(Number(o||0))}),n.jsx(Je,{dataKey:"value",children:Re.map((o,u)=>n.jsx(ue,{fill:Q[u%Q.length]},`cell-dest-${u}`))})]})}):n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(Ee,{children:n.jsxs(Yt,{children:[n.jsx(ht,{data:lt,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:lt.map((o,u)=>n.jsx(ue,{fill:Q[u%Q.length]},`cell-${u}`))}),n.jsx(Se,{formatter:o=>J(Number(o||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:Ct(lt)})]})})]});case"vendas_produto":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Vendas por produto"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:ne.vendas_produto||"bar",onChange:o=>ot("vendas_produto",o.target.value),children:[n.jsx("option",{value:"bar",children:"Barras"}),n.jsx("option",{value:"pie",children:"Pizza"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:ke.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):ne.vendas_produto==="pie"?n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(Ee,{children:n.jsxs(Yt,{children:[n.jsx(ht,{data:ke,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:ke.map((o,u)=>n.jsx(ue,{fill:Q[u%Q.length]},`cell-prod-pie-${u}`))}),n.jsx(Se,{formatter:o=>J(Number(o||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:Ct(ke)})]}):n.jsx(Ee,{children:n.jsxs(mt,{data:ke,children:[n.jsx(qe,{dataKey:"name",hide:!0}),n.jsx(Ue,{}),n.jsx(Se,{formatter:o=>J(Number(o||0))}),n.jsx(Je,{dataKey:"value",children:ke.map((o,u)=>n.jsx(ue,{fill:Q[u%Q.length]},`cell-prod-${u}`))})]})})})]});case"timeline":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Evolução das vendas no período"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:ne.timeline||"line",onChange:o=>ot("timeline",o.target.value),children:[n.jsx("option",{value:"line",children:"Linha"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Fe.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):ne.timeline==="bar"?n.jsx(Ee,{children:n.jsxs(mt,{data:Fe,children:[n.jsx(qe,{dataKey:"label"}),n.jsx(Ue,{}),n.jsx(Se,{formatter:o=>J(Number(o||0))}),n.jsx(Je,{dataKey:"value",children:Fe.map((o,u)=>n.jsx(ue,{fill:Q[u%Q.length]},`cell-time-${u}`))})]})}):n.jsx(Ee,{children:n.jsxs(Dr,{data:Fe,children:[n.jsx(qe,{dataKey:"label"}),n.jsx(Ue,{}),n.jsx(Se,{formatter:o=>J(Number(o||0))}),n.jsx(Nr,{type:"monotone",dataKey:"value",stroke:"#a855f7",strokeWidth:2,dot:!1})]})})})]});case"orcamentos":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Orçamentos recentes (",dt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[680px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Data"}),n.jsx("th",{children:"Cliente"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Valor"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[dt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhum orçamento no período."})}),dt.map(o=>n.jsxs("tr",{children:[n.jsx("td",{children:o.data_orcamento?new Date(o.data_orcamento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:o.clientes?.nome||"-"}),n.jsx("td",{children:o.destinos?.nome||"-"}),n.jsx("td",{children:o.status||"-"}),n.jsx("td",{children:J(Number(o.valor||0))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>_t(o),children:"Ver"})})]},o.id))]})]})})]});case"aniversariantes":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Aniversariantes do mês (",ct.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[520px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nome"}),n.jsx("th",{children:"Data nasc."}),n.jsx("th",{children:"Idade"}),n.jsx("th",{children:"Telefone"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[ct.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:"Nenhum aniversariante este mês."})}),ct.map(o=>{const u=Ht(o.nascimento);return n.jsxs("tr",{children:[n.jsx("td",{children:o.nome}),n.jsx("td",{children:o.nascimento?new Date(o.nascimento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:u??"-"}),n.jsx("td",{children:o.telefone||"-"}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>Dt(o),children:"Ver"})})]},o.id)})]})]})})]});default:return null}};return n.jsxs("div",{className:"dashboard-geral-page",children:[n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="mes_atual"?"#4f46e5":void 0,color:s==="mes_atual"?"#e5e7eb":void 0},onClick:()=>Nt("mes_atual"),children:"Mês atual"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="ultimos_30"?"#4f46e5":void 0,color:s==="ultimos_30"?"#e5e7eb":void 0},onClick:()=>Nt("ultimos_30"),children:"Últimos 30 dias"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="personalizado"?"#4f46e5":void 0,color:s==="personalizado"?"#e5e7eb":void 0},onClick:()=>c("personalizado"),children:"Personalizado"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>ae(!0),children:"Personalizar dashboard"})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data início"}),n.jsx("input",{type:"date",className:"form-input",value:v,onChange:d=>{c("personalizado"),b(d.target.value)}})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data fim"}),n.jsx("input",{type:"date",className:"form-input",value:p,onChange:d=>{c("personalizado"),h(d.target.value)}})]})]})]}),Be("kpis")&&n.jsx("div",{children:ut("kpis")}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:S.filter(d=>["vendas_destino","vendas_produto","timeline"].includes(d)&&Be(d)).map(d=>n.jsx("div",{children:ut(d)},d))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:S.filter(d=>["orcamentos","aniversariantes"].includes(d)&&Be(d)).map(d=>n.jsx("div",{children:ut(d)},d))}),Z&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:60},children:n.jsxs("div",{style:{width:"95%",maxWidth:520,background:"#0f172a",border:"1px solid #1f2937",borderRadius:10,padding:16,color:"#e5e7eb",maxHeight:"90vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12,alignItems:"center"},children:[n.jsx("h3",{children:"Personalizar dashboard"}),n.jsx("button",{className:"btn btn-light",onClick:()=>ae(!1),children:"Fechar"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:S.map((d,m)=>{const o=Me.find(u=>u.id===d);return o?n.jsxs("div",{style:{border:"1px solid #1f2937",borderRadius:8,padding:10,display:"flex",alignItems:"center",gap:8,flexDirection:"column"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Be(d),onChange:()=>ga(d)}),n.jsx("div",{style:{flex:1},children:o.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Et(d,"up"),disabled:m===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Et(d,"down"),disabled:m===S.length-1,children:"↓"})]})]}),d==="kpis"&&Be(d)&&n.jsxs("div",{style:{width:"100%",borderTop:"1px solid #1f2937",paddingTop:8,marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:"KPIs visíveis e ordem"}),Pe.map((u,O)=>{const R=de.find(V=>V.id===u);return R?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:we[u]!==!1,onChange:()=>xa(u)}),n.jsx("div",{style:{flex:1},children:R.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>St(u,"up"),disabled:O===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>St(u,"down"),disabled:O===Pe.length-1,children:"↓"})]})]},u):null})]})]},d):null})})]})}),te&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:700,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Detalhes do orçamento"}),n.jsx("button",{className:"btn btn-light",onClick:()=>_t(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Cliente:"})," ",te.clientes?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Destino:"})," ",te.destinos?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data orçamento:"})," ",te.data_orcamento?new Date(te.data_orcamento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data viagem:"})," ",te.data_viagem?new Date(te.data_viagem).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",te.status||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Valor:"})," ",J(Number(te.valor||0))]}),te.notas&&n.jsxs("p",{style:{marginTop:8},children:[n.jsx("strong",{children:"Notas:"})," ",te.notas]})]})}),Ie&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:600,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Dados do cliente"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Dt(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",Ie.nome]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nascimento:"})," ",Ie.nascimento?new Date(Ie.nascimento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Idade:"})," ",Ht(Ie.nascimento)??"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Telefone:"})," ",Ie.telefone||"-"]})]})}),K&&n.jsx("div",{style:{marginTop:12,fontSize:"0.9rem"},children:"Carregando dados do dashboard..."})]})};export{Vi as default};

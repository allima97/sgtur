import{j as n}from"./jsx-runtime.mfZSNocD.js";import{r as l}from"./index.C0Fn7Wtz.js";import{s as Z}from"./supabase.Ng8nq9tn.js";import{u as Vt}from"./usePermissao.DiLe8-Rs.js";import{L as Ma}from"./LoadingUsuarioContext.BaDUNi7o.js";import{c as L,p as Fe,b as Ta,i as La,s as Pe,d as za,e as Va,f as na,g as Wa,h as $a,j as ce,k as Fa,l as Ga,m as Ja,n as Ua,o as we,q as qa,r as Ya,t as Ha,u as Qa,v as Xa,w as Za,x as nt,y as ia,z as it,A as er,B as tr,C as ar,D as st,E as Ge,F as At,G as sa,S as rr,H as It,I as pe,J as nr,K as ot,M as ue,Z as Je,N as oa,O as la,P as da,Q as ir,U as de,V as tt,W as Ke,_ as bt,$ as sr,a0 as kt,a1 as ca,a2 as or,a3 as lr,a4 as dr,a5 as _t,a6 as ua,a7 as ma,a8 as cr,a9 as ye,aa as yt,ab as ur,ac as mr,ad as lt,ae as jt,af as pr,ag as pa,ah as fr,ai as vr,aj as hr,ak as gr,al as xr,am as br,an as yr,ao as jr,ap as Pr,aq as Wt,ar as wr,as as Or,at as Ar,au as Re,av as Me,aw as Ir,ax as fa,ay as va,az as ha,aA as kr,aB as _r,aC as $t,aD as Sr,aE as Er,aF as Ft,aG as Dr,aH as Nr,aI as ga,aJ as Cr,aK as Br,aL as Kr,aM as Rr,aN as Mr,aO as Tr,R as De,X as He,Y as Qe,T as Ne,L as Lr,a as zr}from"./LineChart.BvtkNKdM.js";import"./index.2_Y_w1Vs.js";var me=e=>null;me.displayName="Cell";var xa=e=>e.graphicalItems.polarItems,Vr=L([Fe,Ta],La),dt=L([xa,Pe,Vr],za),Wr=L([dt],Va),ct=L([Wr,na],Wa),$r=L([ct,Pe,dt],$a);L([ct,Pe,dt],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(i=>{var o,u=ce(r,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:ce(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Gt=()=>{},Fr=L([ct,Pe,dt,Fa,Fe],Ga),Gr=L([Pe,Ja,Ua,Gt,Fr,Gt,we,Fe],qa),ba=L([Pe,we,ct,$r,Ya,Fe,Gr],Ha),Jr=L([ba,Pe,Qa],Xa);L([Pe,ba,Jr,Fe],Za);function Jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Ut(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Jt(Object(a),!0).forEach(function(r){Ur(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ur(e,t,a){return(t=qr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function qr(e){var t=Yr(e,"string");return typeof t=="symbol"?t:t+""}function Yr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hr=(e,t)=>t,St=L([xa,Hr],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Qr=[],Et=(e,t,a)=>a?.length===0?Qr:a,ya=L([na,St,Et],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&a!=null&&(i=a.map(o=>Ut(Ut({},t.presentationProps),o.props))),i!=null)return i}}),Xr=L([ya,St,Et],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,i)=>{var o,u=ce(r,t.nameKey,t.name),f;return a!=null&&(o=a[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?f=a[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?f=r.fill:f=t.fill,{value:nt(u,t.dataKey),color:f,payload:r,type:t.legendType}})}),Zr=L([ya,St,Et,ia],(e,t,a,r)=>{if(!(t==null||e==null))return jn({offset:r,pieSettings:t,displayedData:e,cells:a})}),Dt=(e,t,a)=>{var r=it();return(i,o)=>u=>{e?.(i,o,u),r(er({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},Nt=e=>{var t=it();return(a,r)=>i=>{e?.(a,r,i),t(tr())}},Ct=(e,t,a)=>{var r=it();return(i,o)=>u=>{e?.(i,o,u),r(ar({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},en=["key"],tn=["onMouseEnter","onClick","onMouseLeave"],an=["id"],rn=["id"];function qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qt(Object(a),!0).forEach(function(r){nn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function nn(e,t,a){return(t=sn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function sn(e){var t=on(e,"string");return typeof t=="symbol"?t:t+""}function on(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function je(){return je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},je.apply(null,arguments)}function ut(e,t){if(e==null)return{};var a,r,i=ln(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function ln(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function dn(e){var t=l.useMemo(()=>It(e.children,me),[e.children]),a=pe(r=>Xr(r,e.id,t));return a==null?null:l.createElement(nr,{legendPayload:a})}var cn=l.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:i,strokeWidth:o,fill:u,name:f,hide:x,tooltipType:p}=e,g={dataDefinedOnItem:r.map(b=>b.tooltipPayload),positions:r.map(b=>b.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:u,dataKey:t,nameKey:a,name:nt(f,t),hide:x,type:p,color:u,unit:""}};return l.createElement(oa,{tooltipEntrySettings:g})}),un=(e,t)=>e>t?"start":e<t?"end":"middle",mn=(e,t,a)=>typeof t=="function"?ye(t(e),a,a*.8):ye(t,a,a*.8),pn=(e,t,a)=>{var{top:r,left:i,width:o,height:u}=t,f=cr(o,u),x=i+ye(e.cx,o,o/2),p=r+ye(e.cy,u,u/2),g=ye(e.innerRadius,f,0),b=mn(a,e.outerRadius,f),v=e.maxRadius||Math.sqrt(o*o+u*u)/2;return{cx:x,cy:p,innerRadius:g,outerRadius:b,maxRadius:v}},fn=(e,t)=>{var a=Ke(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function vn(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var hn=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var a=ot("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=ut(t,en);return l.createElement(ur,je({},i,{type:"linear",className:a}))},gn=(e,t,a)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),l.isValidElement(r)))return r;var i=ot("recharts-pie-label-text",vn(e));return l.createElement(mr,je({},t,{alignmentBaseline:"middle",className:i}),r)};function xn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i,labelLine:o,dataKey:u}=a;if(!r||!i||!t)return null;var f=At(a),x=yt(i),p=yt(o),g=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,b=t.map((v,O)=>{var A=(v.startAngle+v.endAngle)/2,P=bt(v.cx,v.cy,v.outerRadius+g,A),k=V(V(V(V({},f),v),{},{stroke:"none"},x),{},{index:O,textAnchor:un(P.x,v.cx)},P),h=V(V(V(V({},f),v),{},{fill:"none",stroke:v.fill},p),{},{index:O,points:[bt(v.cx,v.cy,v.outerRadius,A),P],key:"line"});return l.createElement(Je,{zIndex:Ge.label,key:"label-".concat(v.startAngle,"-").concat(v.endAngle,"-").concat(v.midAngle,"-").concat(O)},l.createElement(ue,null,o&&hn(o,h),gn(i,k,ce(v,u))))});return l.createElement(ue,{className:"recharts-pie-labels"},b)}function bn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i}=a;return typeof i=="object"&&i!=null&&"position"in i?l.createElement(ma,{label:i}):l.createElement(xn,{sectors:t,props:a,showLabels:r})}function yn(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:i,shape:o,id:u}=e,f=pe(kt),x=pe(ca),p=pe(or),{onMouseEnter:g,onClick:b,onMouseLeave:v}=i,O=ut(i,tn),A=Dt(g,i.dataKey,u),P=Nt(v),k=Ct(b,i.dataKey,u);return t==null||t.length===0?null:l.createElement(l.Fragment,null,t.map((h,y)=>{if(h?.startAngle===0&&h?.endAngle===0&&t.length!==1)return null;var B=p==null||p===u,I=String(y)===f&&(x==null||i.dataKey===x)&&B,E=f?r:null,w=a&&I?a:E,D=V(V({},h),{},{stroke:h.stroke,tabIndex:-1,[dr]:y,[lr]:i.dataKey});return l.createElement(ue,je({key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},_t(O,h,y),{onMouseEnter:A(h,y),onMouseLeave:P(h,y),onClick:k(h,y)}),l.createElement(ua,je({option:o??w,index:y,shapeType:"sector",isActive:I},D)))}))}function jn(e){var t,{pieSettings:a,displayedData:r,cells:i,offset:o}=e,{cornerRadius:u,startAngle:f,endAngle:x,dataKey:p,nameKey:g,tooltipType:b}=a,v=Math.abs(a.minAngle),O=fn(f,x),A=Math.abs(O),P=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,k=r.filter(w=>ce(w,p,0)!==0).length,h=(A>=360?k:k-1)*P,y=A-k*v-h,B=r.reduce((w,D)=>{var K=ce(D,p,0);return w+(tt(K)?K:0)},0),I;if(B>0){var E;I=r.map((w,D)=>{var K=ce(w,p,0),z=ce(w,g,D),R=pn(a,o,w),H=(tt(K)?K:0)/B,N,G=V(V({},w),i&&i[D]&&i[D].props);D?N=E.endAngle+Ke(O)*P*(K!==0?1:0):N=f;var $=N+Ke(O)*((K!==0?v:0)+H*y),J=(N+$)/2,se=(R.innerRadius+R.outerRadius)/2,Oe=[{name:z,value:K,payload:G,dataKey:p,type:b}],re=bt(R.cx,R.cy,se,J);return E=V(V(V(V({},a.presentationProps),{},{percent:H,cornerRadius:typeof u=="string"?parseFloat(u):u,name:z,tooltipPayload:Oe,midAngle:J,middleRadius:se,tooltipPosition:re},G),R),{},{value:K,dataKey:p,startAngle:N,endAngle:$,payload:G,paddingAngle:Ke(O)*P}),E})}return I}function Pn(e){var{showLabels:t,sectors:a,children:r}=e,i=l.useMemo(()=>!t||!a?[]:a.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[a,t]);return l.createElement(sr,{value:t?i:void 0},r)}function wn(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:i,isAnimationActive:o,animationBegin:u,animationDuration:f,animationEasing:x,activeShape:p,inactiveShape:g,onAnimationStart:b,onAnimationEnd:v}=t,O=la(t,"recharts-pie-"),A=a.current,[P,k]=l.useState(!1),h=l.useCallback(()=>{typeof v=="function"&&v(),k(!1)},[v]),y=l.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]);return l.createElement(Pn,{showLabels:!P,sectors:i},l.createElement(da,{animationId:O,begin:u,duration:f,isActive:o,easing:x,onAnimationStart:y,onAnimationEnd:h,key:O},B=>{var I=[],E=i&&i[0],w=E?.startAngle;return i?.forEach((D,K)=>{var z=A&&A[K],R=K>0?ir(D,"paddingAngle",0):0;if(z){var H=de(z.endAngle-z.startAngle,D.endAngle-D.startAngle,B),N=V(V({},D),{},{startAngle:w+R,endAngle:w+H+R});I.push(N),w=N.endAngle}else{var{endAngle:G,startAngle:$}=D,J=de(0,G-$,B),se=V(V({},D),{},{startAngle:w+R,endAngle:w+J+R});I.push(se),w=se.endAngle}}),a.current=I,l.createElement(ue,null,l.createElement(yn,{sectors:I,activeShape:p,inactiveShape:g,allOtherPieProps:t,shape:t.shape,id:r}))}),l.createElement(bn,{showLabels:!P,sectors:i,props:t}),t.children)}var On={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ge.area};function An(e){var{id:t}=e,a=ut(e,an),{hide:r,className:i,rootTabIndex:o}=e,u=l.useMemo(()=>It(e.children,me),[e.children]),f=pe(g=>Zr(g,t,u)),x=l.useRef(null),p=ot("recharts-pie",i);return r||f==null?(x.current=null,l.createElement(ue,{tabIndex:o,className:p})):l.createElement(Je,{zIndex:e.zIndex},l.createElement(cn,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:f,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),l.createElement(ue,{tabIndex:o,className:p},l.createElement(wn,{props:V(V({},a),{},{sectors:f}),previousSectorsRef:x,id:t})))}function Pt(e){var t=st(e,On),{id:a}=t,r=ut(t,rn),i=At(r);return l.createElement(sa,{id:a,type:"pie"},o=>l.createElement(l.Fragment,null,l.createElement(rr,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),l.createElement(dn,je({},r,{id:o})),l.createElement(An,je({},r,{id:o}))))}Pt.displayName="Pie";var In="Invariant failed";function kn(e,t){throw new Error(In)}var _n=["x","y"];function wt(){return wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},wt.apply(null,arguments)}function Yt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function $e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Yt(Object(a),!0).forEach(function(r){Sn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Sn(e,t,a){return(t=En(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function En(e){var t=Dn(e,"string");return typeof t=="symbol"?t:t+""}function Dn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nn(e,t){if(e==null)return{};var a,r,i=Cn(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Cn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Bn(e,t){var{x:a,y:r}=e,i=Nn(e,_n),o="".concat(a),u=parseInt(o,10),f="".concat(r),x=parseInt(f,10),p="".concat(t.height||i.height),g=parseInt(p,10),b="".concat(t.width||i.width),v=parseInt(b,10);return $e($e($e($e($e({},t),i),u?{x:u}:{}),x?{y:x}:{}),{},{height:g,width:v,name:t.name,radius:t.radius})}function at(e){return l.createElement(ua,wt({shapeType:"rectangle",propTransformer:Bn,activeClassName:"recharts-active-bar"},e))}var Kn=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(tt(t))return t;var o=tt(r)||lt(r);return o?t(r,i):(o||kn(),a)}};function Rn(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&jt(e.zIndex)?e.zIndex:t}var Mn=["onMouseEnter","onMouseLeave","onClick"],Tn=["value","background","tooltipPosition"],Ln=["id"],zn=["onMouseEnter","onClick","onMouseLeave"];function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(null,arguments)}function Ht(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ht(Object(a),!0).forEach(function(r){Vn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ht(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Vn(e,t,a){return(t=Wn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Wn(e){var t=$n(e,"string");return typeof t=="symbol"?t:t+""}function $n(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rt(e,t){if(e==null)return{};var a,r,i=Fn(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Fn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Gn=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:nt(a,t),payload:e}]},Jn=l.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:o,hide:u,unit:f,tooltipType:x}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:nt(o,t),hide:u,type:x,color:i,unit:f}};return l.createElement(oa,{tooltipEntrySettings:p})});function Un(e){var t=pe(kt),{data:a,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:f,onClick:x}=o,p=rt(o,Mn),g=Dt(u,r),b=Nt(f),v=Ct(x,r);if(!i||a==null)return null;var O=yt(i);return l.createElement(Je,{zIndex:Rn(i,Ge.barBackground)},a.map((A,P)=>{var{value:k,background:h,tooltipPosition:y}=A,B=rt(A,Tn);if(!h)return null;var I=g(A,P),E=b(A,P),w=v(A,P),D=Y(Y(Y(Y(Y({option:i,isActive:String(P)===t},B),{},{fill:"#eee"},h),O),_t(p,A,P)),{},{onMouseEnter:I,onMouseLeave:E,onClick:w,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return l.createElement(at,fe({key:"background-bar-".concat(P)},D))}))}function qn(e){var{showLabels:t,children:a,rects:r}=e,i=r?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Y(Y({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return l.createElement(wr,{value:t?i:void 0},a)}function Yn(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:o,dataKey:u}=e,f=pe(kt),x=pe(ca),p=a&&String(o)===f&&(x==null||u===x),g=p?a:t;return p?l.createElement(Je,{zIndex:Ge.activeBar},l.createElement(at,fe({},r,{name:String(r.name)},i,{isActive:p,option:g,index:o,dataKey:u}))):l.createElement(at,fe({},r,{name:String(r.name)},i,{isActive:p,option:g,index:o,dataKey:u}))}function Hn(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:o}=e;return l.createElement(at,fe({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:o}))}function Qn(e){var t,{data:a,props:r}=e,i=(t=At(r))!==null&&t!==void 0?t:{},{id:o}=i,u=rt(i,Ln),{shape:f,dataKey:x,activeBar:p}=r,{onMouseEnter:g,onClick:b,onMouseLeave:v}=r,O=rt(r,zn),A=Dt(g,x),P=Nt(v),k=Ct(b,x);return a?l.createElement(l.Fragment,null,a.map((h,y)=>l.createElement(ue,fe({key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(y),className:"recharts-bar-rectangle"},_t(O,h,y),{onMouseEnter:A(h,y),onMouseLeave:P(h,y),onClick:k(h,y)}),p?l.createElement(Yn,{shape:f,activeBar:p,baseProps:u,entry:h,index:y,dataKey:x}):l.createElement(Hn,{shape:f,baseProps:u,entry:h,index:y,dataKey:x})))):null}function Xn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:u,animationDuration:f,animationEasing:x,onAnimationEnd:p,onAnimationStart:g}=t,b=a.current,v=la(t,"recharts-bar-"),[O,A]=l.useState(!1),P=!O,k=l.useCallback(()=>{typeof p=="function"&&p(),A(!1)},[p]),h=l.useCallback(()=>{typeof g=="function"&&g(),A(!0)},[g]);return l.createElement(qn,{showLabels:P,rects:r},l.createElement(da,{animationId:v,begin:u,duration:f,isActive:o,easing:x,onAnimationEnd:k,onAnimationStart:h,key:v},y=>{var B=y===1?r:r?.map((I,E)=>{var w=b&&b[E];if(w)return Y(Y({},I),{},{x:de(w.x,I.x,y),y:de(w.y,I.y,y),width:de(w.width,I.width,y),height:de(w.height,I.height,y)});if(i==="horizontal"){var D=de(0,I.height,y),K=de(I.stackedBarStart,I.y,y);return Y(Y({},I),{},{y:K,height:D})}var z=de(0,I.width,y),R=de(I.stackedBarStart,I.x,y);return Y(Y({},I),{},{width:z,x:R})});return y>0&&(a.current=B??null),B==null?null:l.createElement(ue,null,l.createElement(Qn,{props:t,data:B}))}),l.createElement(ma,{label:t.label}),t.children)}function Zn(e){var t=l.useRef(null);return l.createElement(Xn,{previousRectanglesRef:t,props:e})}var ja=0,ei=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:ce(e,t)}};class ti extends l.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:i,xAxisId:o,yAxisId:u,needClip:f,background:x,id:p}=this.props;if(t||a==null)return null;var g=ot("recharts-bar",i),b=p;return l.createElement(ue,{className:g,id:p},f&&l.createElement("defs",null,l.createElement(yr,{clipPathId:b,xAxisId:o,yAxisId:u})),l.createElement(ue,{className:"recharts-bar-rectangles",clipPath:f?"url(#clipPath-".concat(b,")"):void 0},l.createElement(Un,{data:a,dataKey:r,background:x,allOtherBarProps:this.props}),l.createElement(Zn,this.props)))}}var ai={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ja,xAxisId:0,yAxisId:0,zIndex:Ge.bar};function ri(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:o,activeBar:u,animationBegin:f,animationDuration:x,animationEasing:p,isAnimationActive:g}=e,{needClip:b}=gr(t,a),v=xr(),O=pa(),A=It(e.children,me),P=pe(y=>Di(y,t,a,O,e.id,A));if(v!=="vertical"&&v!=="horizontal")return null;var k,h=P?.[0];return h==null||h.height==null||h.width==null?k=0:k=v==="vertical"?h.height/2:h.width/2,l.createElement(br,{xAxisId:t,yAxisId:a,data:P,dataPointFormatter:ei,errorBarOffset:k},l.createElement(ti,fe({},e,{layout:v,needClip:b,data:P,xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:o,activeBar:u,animationBegin:f,animationDuration:x,animationEasing:p,isAnimationActive:g})))}function ni(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:o,xAxis:u,yAxis:f,xAxisTicks:x,yAxisTicks:p,stackedData:g,displayedData:b,offset:v,cells:O,parentViewBox:A,dataStartIndex:P}=e,k=t==="horizontal"?f:u,h=g?k.scale.domain():null,y=jr({numericAxis:k}),B=k.scale(y);return b.map((I,E)=>{var w,D,K,z,R,H;g?w=Pr(g[E+P],h):(w=ce(I,a),Array.isArray(w)||(w=[y,w]));var N=Kn(r,ja)(w[1],E);if(t==="horizontal"){var G,[$,J]=[f.scale(w[0]),f.scale(w[1])];D=Wt({axis:u,ticks:x,bandSize:o,offset:i.offset,entry:I,index:E}),K=(G=J??$)!==null&&G!==void 0?G:void 0,z=i.size;var se=$-J;if(R=Or(se)?0:se,H={x:D,y:v.top,width:z,height:v.height},Math.abs(N)>0&&Math.abs(R)<Math.abs(N)){var Oe=Ke(R||N)*(Math.abs(N)-Math.abs(R));K-=Oe,R+=Oe}}else{var[re,Ae]=[u.scale(w[0]),u.scale(w[1])];if(D=re,K=Wt({axis:f,ticks:p,bandSize:o,offset:i.offset,entry:I,index:E}),z=Ae-re,R=i.size,H={x:v.left,y:K,width:v.width,height:R},Math.abs(N)>0&&Math.abs(z)<Math.abs(N)){var ve=Ke(z||N)*(Math.abs(N)-Math.abs(z));z+=ve}}if(D==null||K==null||z==null||R==null)return null;var Ie=Y(Y({},I),{},{stackedBarStart:B,x:D,y:K,width:z,height:R,value:g?w:w[1],payload:I,background:H,tooltipPosition:{x:D+z/2,y:K+R/2},parentViewBox:A},O&&O[E]&&O[E].props);return Ie}).filter(Boolean)}function ii(e){var t=st(e,ai),a=pa();return l.createElement(sa,{id:t.id,type:"bar"},r=>l.createElement(l.Fragment,null,l.createElement(fr,{legendPayload:Gn(t)}),l.createElement(Jn,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),l.createElement(vr,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:hr(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),l.createElement(Je,{zIndex:t.zIndex},l.createElement(ri,fe({},t,{id:r})))))}var et=l.memo(ii,pr);et.displayName="Bar";function Qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Xe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Qt(Object(a),!0).forEach(function(r){si(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function si(e,t,a){return(t=oi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function oi(e){var t=li(e,"string");return typeof t=="symbol"?t:t+""}function li(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var di=(e,t)=>t,ci=(e,t,a)=>a,ui=(e,t,a,r)=>r,mi=(e,t,a,r,i)=>i,Ue=L([va,mi],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),pi=L([Ue],e=>e?.maxBarSize),fi=(e,t,a,r,i,o)=>o,Xt=(e,t,a)=>{var r=a??e;if(!lt(r))return ye(r,t,0)},vi=L([we,va,di,ci,ui],(e,t,a,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===a:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),hi=(e,t,a,r)=>{var i=we(e);return i==="horizontal"?$t(e,"yAxis",a,r):$t(e,"xAxis",t,r)},gi=(e,t,a)=>{var r=we(e);return r==="horizontal"?Ft(e,"xAxis",t):Ft(e,"yAxis",a)},xi=(e,t,a)=>{var r={},i=e.filter(Dr),o=e.filter(p=>p.stackId==null),u=i.reduce((p,g)=>(p[g.stackId]||(p[g.stackId]=[]),p[g.stackId].push(g),p),r),f=Object.entries(u).map(p=>{var[g,b]=p,v=b.map(A=>A.dataKey),O=Xt(t,a,b[0].barSize);return{stackId:g,dataKeys:v,barSize:O}}),x=o.map(p=>{var g=[p.dataKey].filter(v=>v!=null),b=Xt(t,a,p.barSize);return{stackId:void 0,dataKeys:g,barSize:b}});return[...f,...x]},bi=L([vi,Er,gi],xi),yi=(e,t,a,r,i)=>{var o,u,f=Ue(e,t,a,r,i);if(f!=null){var x=we(e),p=ha(e),{maxBarSize:g}=f,b=lt(g)?p:g,v,O;return x==="horizontal"?(v=Re(e,"xAxis",t,r),O=Me(e,"xAxis",t,r)):(v=Re(e,"yAxis",a,r),O=Me(e,"yAxis",a,r)),(o=(u=fa(v,O,!0))!==null&&u!==void 0?u:b)!==null&&o!==void 0?o:0}},Pa=(e,t,a,r)=>{var i=we(e),o,u;return i==="horizontal"?(o=Re(e,"xAxis",t,r),u=Me(e,"xAxis",t,r)):(o=Re(e,"yAxis",a,r),u=Me(e,"yAxis",a,r)),fa(o,u)};function ji(e,t,a,r,i){var o=r.length;if(!(o<1)){var u=ye(e,a,0,!0),f,x=[];if(jt(r[0].barSize)){var p=!1,g=a/o,b=r.reduce((h,y)=>h+(y.barSize||0),0);b+=(o-1)*u,b>=a&&(b-=(o-1)*u,u=0),b>=a&&g>0&&(p=!0,g*=.9,b=o*g);var v=(a-b)/2>>0,O={offset:v-u,size:0};f=r.reduce((h,y)=>{var B,I={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:O.offset+O.size+u,size:p?g:(B=y.barSize)!==null&&B!==void 0?B:0}},E=[...h,I];return O=E[E.length-1].position,E},x)}else{var A=ye(t,a,0,!0);a-2*A-(o-1)*u<=0&&(u=0);var P=(a-2*A-(o-1)*u)/o;P>1&&(P>>=0);var k=jt(i)?Math.min(P,i):P;f=r.reduce((h,y,B)=>[...h,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A+(P+u)*B+(P-k)/2,size:k}}],x)}return f}}var Pi=(e,t,a,r,i,o,u)=>{var f=lt(u)?t:u,x=ji(a,r,i!==o?i:o,e,f);return i!==o&&x!=null&&(x=x.map(p=>Xe(Xe({},p),{},{position:Xe(Xe({},p.position),{},{offset:p.position.offset-i/2})}))),x},wi=L([bi,ha,kr,_r,yi,Pa,pi],Pi),Oi=(e,t,a,r)=>Re(e,"xAxis",t,r),Ai=(e,t,a,r)=>Re(e,"yAxis",a,r),Ii=(e,t,a,r)=>Me(e,"xAxis",t,r),ki=(e,t,a,r)=>Me(e,"yAxis",a,r),_i=L([wi,Ue],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),Si=(e,t)=>{var a=Sr(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(u=>u.key===a)}}}},Ei=L([hi,Ue],Si),Di=L([ia,Ar,Oi,Ai,Ii,ki,_i,we,Ir,Pa,Ei,Ue,fi],(e,t,a,r,i,o,u,f,x,p,g,b,v)=>{var{chartData:O,dataStartIndex:A,dataEndIndex:P}=x;if(!(b==null||u==null||t==null||f!=="horizontal"&&f!=="vertical"||a==null||r==null||i==null||o==null||p==null)){var{data:k}=b,h;if(k!=null&&k.length>0?h=k:h=O?.slice(A,P+1),h!=null)return ni({layout:f,barSettings:b,pos:u,parentViewBox:t,bandSize:p,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:g,displayedData:h,offset:e,cells:v,dataStartIndex:A})}}),Ni=["axis","item"],xt=l.forwardRef((e,t)=>l.createElement(Nr,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Ni,tooltipPayloadSearcher:ga,categoricalChartProps:e,ref:t}));function Ci(e){var t=it();return l.useEffect(()=>{t(Cr(e))},[t,e]),null}var Bi=["layout"];function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Ot.apply(null,arguments)}function Ki(e,t){if(e==null)return{};var a,r,i=Ri(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ri(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Mi={top:5,right:5,bottom:5,left:5},wa={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Mi,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ti=l.forwardRef(function(t,a){var r,i=st(t.categoricalChartProps,wa),{layout:o}=i,u=Ki(i,Bi),{chartName:f,defaultTooltipEventType:x,validateTooltipEventTypes:p,tooltipPayloadSearcher:g}=t,b={chartName:f,defaultTooltipEventType:x,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return l.createElement(Br,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:f},l.createElement(Kr,{chartData:i.data}),l.createElement(Rr,{layout:o,margin:i.margin}),l.createElement(Mr,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),l.createElement(Ci,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),l.createElement(Tr,Ot({},u,{ref:a})))});function Zt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function ea(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Zt(Object(a),!0).forEach(function(r){Li(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Zt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Li(e,t,a){return(t=zi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function zi(e){var t=Vi(e,"string");return typeof t=="symbol"?t:t+""}function Vi(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wi=["item"],$i=ea(ea({},wa),{},{layout:"centric",startAngle:0,endAngle:360}),ta=l.forwardRef((e,t)=>{var a=st(e,$i);return l.createElement(Ti,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Wi,tooltipPayloadSearcher:ga,categoricalChartProps:a,ref:t})});const Ce=[{id:"kpis",titulo:"KPIs principais"},{id:"vendas_destino",titulo:"Vendas por destino"},{id:"vendas_produto",titulo:"Vendas por produto"},{id:"timeline",titulo:"Evolução das vendas"},{id:"orcamentos",titulo:"Orçamentos recentes"},{id:"viagens",titulo:"Próximas viagens"},{id:"aniversariantes",titulo:"Aniversariantes"}],Be=[{id:"kpi_vendas_total",titulo:"Vendas no período"},{id:"kpi_qtd_vendas",titulo:"Qtd. vendas"},{id:"kpi_ticket_medio",titulo:"Ticket médio"},{id:"kpi_orcamentos",titulo:"Orçamentos"},{id:"kpi_conversao",titulo:"Conv. Orç → Vendas"},{id:"kpi_meta",titulo:"Meta somada"},{id:"kpi_atingimento",titulo:"Atingimento meta"},{id:"kpi_dias_restantes",titulo:"Dias restantes"}];function ee(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function aa(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),r=i=>i.toISOString().substring(0,10);return{inicio:r(t),fim:r(a)}}function Fi(e){const t=new Date,a=new Date;a.setDate(t.getDate()-(e-1));const r=i=>i.toISOString().substring(0,10);return{inicio:r(a),fim:r(t)}}function Ze(e,t){const a=e.filter(i=>t.includes(i)),r=t.filter(i=>!a.includes(i));return[...a,...r]}function ra(e){if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return null;const a=new Date;let r=a.getFullYear()-t.getFullYear();const i=a.getMonth()-t.getMonth();return(i<0||i===0&&a.getDate()<t.getDate())&&r--,r}const ae=["#7c3aed","#a855f7","#6366f1","#ec4899","#22c55e"],Xi=()=>{const[e,t]=l.useState(null),[a,r]=l.useState(!0),i=Vt("dashboard"),o=Vt("Operacao"),[u,f]=l.useState("mes_atual"),[x,p]=l.useState(""),[g,b]=l.useState(""),[v,O]=l.useState([]),[A,P]=l.useState([]),[k,h]=l.useState([]),[y,B]=l.useState([]),[I,E]=l.useState([]),[w,D]=l.useState([]),[K,z]=l.useState(!0),[R,H]=l.useState(null),[N,G]=l.useState(Ce.map(d=>d.id)),[$,J]=l.useState(()=>Ce.reduce((d,m)=>({...d,[m.id]:!0}),{})),[se,Oe]=l.useState(!1),[re,Ae]=l.useState(Be.map(d=>d.id)),[ve,Ie]=l.useState(()=>Be.reduce((d,m)=>({...d,[m.id]:!0}),{})),ke=l.useMemo(()=>[...Be,...w],[w]),Te=l.useMemo(()=>{const d=ke.map(c=>c.id),m=re.filter(c=>d.includes(c)),s=d.filter(c=>!m.includes(c));return[...m,...s]},[re,ke]),Le=l.useMemo(()=>{const d={};return ke.forEach(m=>{d[m.id]=ve[m.id]!==!1}),d},[ve,ke]),[oe,qe]=l.useState({vendas_destino:"pie",vendas_produto:"bar",timeline:"line"});l.useEffect(()=>{const d=Ce.map(m=>m.id);G(m=>{const s=m.filter(S=>d.includes(S)),c=d.filter(S=>!s.includes(S)),j=[...s,...c];return JSON.stringify(j)===JSON.stringify(m)?m:j}),J(m=>{const s={...m};return d.forEach(c=>{s[c]===void 0&&(s[c]=!0)}),Object.keys(s).forEach(c=>{d.includes(c)||delete s[c]}),s})},[]);const Oa=d=>{const m={...$,[d]:!$[d]};J(m),Ve(N,m,{order:Te,visible:Le})},Aa=d=>{const m={...Le,[d]:!Le[d]};Ie(m),Ve(N,$,{order:Te,visible:m})},Bt=(d,m)=>{const s=N.indexOf(d);if(s===-1)return;const c=[...N],j=m==="up"?s-1:s+1;j<0||j>=c.length||([c[s],c[j]]=[c[j],c[s]],G(c),Ve(c,$,{order:re,visible:ve},oe))},Kt=(d,m)=>{const s=re.indexOf(d);if(s===-1)return;const c=[...re],j=m==="up"?s-1:s+1;j<0||j>=c.length||([c[s],c[j]]=[c[j],c[s]],Ae(c),Ve(N,$,{order:c,visible:ve},oe))},mt=(d,m)=>{const s={...oe,[d]:m};qe(s),Ve(N,$,{order:re,visible:ve},s)},ze=d=>$[d]!==!1;function Ia(d,m,s){typeof window<"u"&&(window.localStorage.setItem("dashboard_kpis",JSON.stringify({order:d,visible:m})),s&&window.localStorage.setItem("dashboard_charts",JSON.stringify(s)))}async function Ve(d,m,s,c){try{if(e?.usuarioId){const j=d.map((S,W)=>({usuario_id:e.usuarioId,widget:S,ordem:W,visivel:m[S]!==!1,settings:S==="kpis"&&s?{kpis:{order:s.order,visible:s.visible},charts:c||null}:S==="vendas_destino"||S==="vendas_produto"||S==="timeline"?{charts:c||null}:null}));await Z.from("dashboard_widgets").delete().eq("usuario_id",e.usuarioId);try{await Z.from("dashboard_widgets").insert(j)}catch{const W=j.map(X=>{const F={...X};return delete F.settings,F});await Z.from("dashboard_widgets").insert(W)}}}catch(j){console.warn("Não foi possível salvar preferências no Supabase, mantendo localStorage.",j)}finally{typeof window<"u"&&(window.localStorage.setItem("dashboard_widgets",JSON.stringify({order:d,visible:m})),s&&Ia(s.order,s.visible,c),c&&window.localStorage.setItem("dashboard_charts",JSON.stringify(c)))}}const[ne,Rt]=l.useState(null),[_e,Mt]=l.useState(null);l.useEffect(()=>{const{inicio:d,fim:m}=aa();p(d),b(m),f("mes_atual")},[]);function Tt(d){if(f(d),d==="mes_atual"){const{inicio:m,fim:s}=aa();p(m),b(s)}else if(d==="ultimos_30"){const{inicio:m,fim:s}=Fi(30);p(m),b(s)}}l.useEffect(()=>{async function d(){try{r(!0),H(null);const{data:m,error:s}=await Z.auth.getUser();if(s||!m?.user){H("Usuário não autenticado.");return}const c=m.user.id,{data:j,error:S}=await Z.from("users").select("id, nome_completo, user_types(name)").eq("id",c).maybeSingle();S&&console.error(S);const W=j?.user_types?.name||m.user.user_metadata?.name||"",X=String(W||"").toUpperCase();let F="VENDEDOR";X.includes("ADMIN")?F="ADMIN":X.includes("GESTOR")?F="GESTOR":X.includes("VENDEDOR")?F="VENDEDOR":F="OUTRO";let he=[c];if(F==="GESTOR"){const{data:Ee,error:ge}=await Z.from("gestor_vendedor").select("vendedor_id").eq("gestor_id",c);if(!ge&&Ee){const le=Ee.map(T=>T.vendedor_id).filter(T=>!!T);he=Array.from(new Set([c,...le]))}}else F==="ADMIN"&&(he=[]);t({usuarioId:c,nome:j?.nome_completo||null,papel:F,vendedorIds:he})}catch(m){console.error(m),H("Erro ao carregar contexto do usuário.")}finally{r(!1)}}d()},[]),l.useEffect(()=>{const d=ke.map(m=>m.id);Ae(m=>{const s=Ze(m,d);return JSON.stringify(s)===JSON.stringify(m)?m:s}),Ie(m=>{const s={...m};return d.forEach(c=>{s[c]===void 0&&(s[c]=!0)}),Object.keys(s).forEach(c=>{d.includes(c)||delete s[c]}),s})},[ke]),l.useEffect(()=>{if(!e||!x||!g||o.loading)return;async function d(){try{z(!0),H(null);const{data:m}=await Z.from("tipo_produtos").select("id, nome, exibe_kpi_comissao");let s=Z.from("vendas").select(`
          id,
          data_lancamento,
          data_embarque,
          cancelada,
          vendedor_id,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome),
          vendas_recibos (
            id,
            valor_total,
            valor_taxas,
            produtos:tipo_produtos!produto_id (id, nome, regra_comissionamento, exibe_kpi_comissao)
          )
        `).gte("data_lancamento",x).lte("data_lancamento",g).eq("cancelada",!1);e.vendedorIds.length>0&&(s=s.in("vendedor_id",e.vendedorIds));const{data:c,error:j}=await s;if(j)throw j;const{data:S,error:W}=await Z.from("orcamentos").select(`
          id,
          data_orcamento,
          data_viagem,
          status,
          valor,
          notas,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome)
        `).gte("data_orcamento",x).lte("data_orcamento",g).order("data_orcamento",{ascending:!1});if(W)throw W;let X=Z.from("metas_vendedor").select("id, vendedor_id, periodo, meta_geral, meta_diferenciada, ativo").gte("periodo",x).lte("periodo",g).eq("ativo",!0);e.vendedorIds.length>0&&(X=X.in("vendedor_id",e.vendedorIds));const{data:F,error:he}=await X;if(he)throw he;const{data:Ee,error:ge}=await Z.from("clientes").select("id, nome, nascimento, telefone");if(ge)throw ge;if(o.permissao==="none")E([]);else try{const T=new Date().toISOString().slice(0,10);let te=Z.from("viagens").select("id, data_inicio, data_fim, status, origem, destino, responsavel_user_id").gte("data_inicio",T).order("data_inicio",{ascending:!0}).limit(20);e.vendedorIds.length>0&&(te=te.in("responsavel_user_id",e.vendedorIds));const{data:U,error:q}=await te;if(q)throw q;E(U||[])}catch(T){console.warn("Não foi possível carregar viagens no dashboard:",T),E([])}const le=(m||[]).filter(T=>T.exibe_kpi_comissao!==!1).map(T=>({id:`kpi_prod_${T.id}`,titulo:T.nome||"Produto",produtoId:T.id}))||[];D(le),O(c||[]),P(S||[]),h(F||[]),B(Ee||[]);try{const{data:T,error:te}=await Z.from("dashboard_widgets").select("widget, ordem, visivel, settings").eq("usuario_id",e.usuarioId).order("ordem",{ascending:!0});if(!te&&T&&T.length>0){const U=new Set([...Be.map(_=>_.id),...le.map(_=>_.id)]),q=T.map(_=>_.widget).filter(_=>Ce.some(Q=>Q.id===_)),xe={...$};let C={},M=null;T.forEach(_=>{const Q=_.widget;if(Ce.some(be=>be.id===Q)&&(xe[Q]=_.visivel!==!1),Q==="kpis"&&_.settings?.kpis&&(Array.isArray(_.settings.kpis.order)&&(C.order=_.settings.kpis.order.filter(be=>U.has(be))),_.settings.kpis.visible)){const be={};Object.entries(_.settings.kpis.visible).forEach(([zt,Ra])=>{U.has(zt)&&(be[zt]=Ra)}),C.visible={...ve,...be}}_.settings?.charts&&(M={...M||{},..._.settings.charts})}),q.length>0&&G(q),J(xe);const ie=Array.from(U);C.order&&C.order.length>0&&Ae(Ze(C.order,ie)),C.visible&&Ie(C.visible),M&&qe(_=>({..._,...M}))}else{const U=new Set([...Be.map(M=>M.id),...le.map(M=>M.id)]),q=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(q){const M=JSON.parse(q);M.order&&M.visible&&(G(M.order),J(M.visible))}const xe=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(xe){const M=JSON.parse(xe),ie=Array.from(U);if(M.order){const _=M.order.filter(Q=>U.has(Q));_.length>0&&Ae(Ze(_,ie))}if(M.visible){const _={};Object.entries(M.visible).forEach(([Q,be])=>{U.has(Q)&&(_[Q]=be)}),Ie(Q=>({...Q,..._}))}}const C=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(C){const M=JSON.parse(C);qe(ie=>({...ie,...M}))}}}catch(T){console.warn("Preferências do dashboard não carregadas, usando padrão.",T);const te=new Set([...Be.map(C=>C.id),...le.map(C=>C.id)]),U=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(U){const C=JSON.parse(U);C.order&&C.visible&&(G(C.order),J(C.visible))}const q=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(q){const C=JSON.parse(q),M=Array.from(te);if(C.order){const ie=C.order.filter(_=>te.has(_));ie.length>0&&Ae(Ze(ie,M))}if(C.visible){const ie={};Object.entries(C.visible).forEach(([_,Q])=>{te.has(_)&&(ie[_]=Q)}),Ie(_=>({..._,...ie}))}}const xe=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(xe){const C=JSON.parse(xe);qe(M=>({...M,...C}))}}}catch(m){console.error(m),H("Erro ao carregar dados do dashboard.")}finally{z(!1)}}d()},[e,x,g,o.loading,o.permissao]);const{totalVendas:ka,qtdVendas:_a,ticketMedio:Sa,totalOrcamentos:Ea,conversao:Da,metaSomada:Na,atingimentoMeta:Ca,valorPorProduto:Ba,diasRestantes:Ka}=l.useMemo(()=>{let d=0,m=v.length;const s={};v.forEach(ge=>{const le=ge.vendas_recibos||[];let T=0;le.forEach(te=>{const U=Number(te.valor_total||0);T+=U;const q=te.produtos?.id||"";q&&(s[q]=(s[q]||0)+U)}),d+=T});const c=m>0?d/m:0,j=A.length,S=j>0?m/j*100:0,W=k.reduce((ge,le)=>ge+Number(le.meta_geral||0),0),X=W>0?d/W*100:0,F=new Date,he=new Date(F.getFullYear(),F.getMonth()+1,0),Ee=Math.max(0,he.getDate()-F.getDate());return{totalVendas:d,qtdVendas:m,ticketMedio:c,totalOrcamentos:j,conversao:S,metaSomada:W,atingimentoMeta:X,valorPorProduto:s,diasRestantes:Ee}},[v,A,k]),We=l.useMemo(()=>{const d=new Map;return v.forEach(m=>{const s=m.destinos?.nome||"Sem destino",c=(m.vendas_recibos||[]).reduce((j,S)=>j+Number(S.valor_total||0),0);d.set(s,(d.get(s)||0)+c)}),Array.from(d.entries()).map(([m,s])=>({name:m,value:s})).sort((m,s)=>s.value-m.value)},[v]),pt=l.useMemo(()=>We.slice(0,5),[We]),Se=l.useMemo(()=>{const d=new Map;return v.forEach(m=>{(m.vendas_recibos||[]).forEach(s=>{const c=s.produtos?.nome||"Sem produto",j=Number(s.valor_total||0);d.set(c,(d.get(c)||0)+j)})}),Array.from(d.entries()).map(([m,s])=>({name:m,value:s}))},[v]),Ye=l.useMemo(()=>{const d=new Map;return v.forEach(s=>{const c=(s.data_lancamento||"").slice(0,10);if(!c)return;const j=(s.vendas_recibos||[]).reduce((S,W)=>S+Number(W.valor_total||0),0);d.set(c,(d.get(c)||0)+j)}),Array.from(d.entries()).sort(([s],[c])=>s<c?-1:1).map(([s,c])=>{const[j,S,W]=s.split("-"),X=j&&S&&W?`${W.padStart(2,"0")}/${S.padStart(2,"0")}`:s;return{date:s,label:X,value:c}})},[v]),ft=l.useMemo(()=>[...A].sort((m,s)=>m.data_orcamento<s.data_orcamento?1:-1).slice(0,10),[A]),vt=l.useMemo(()=>{const m=new Date().getMonth();return y.filter(s=>{if(!s.nascimento)return!1;const c=new Date(s.nascimento);return isNaN(c.getTime())?!1:c.getMonth()===m})},[y]),ht=l.useMemo(()=>[...I].filter(m=>(m.status||"").toLowerCase()!=="cancelada").sort((m,s)=>{const c=m.data_inicio||"",j=s.data_inicio||"";return c===j?0:c?j?c<j?-1:1:-1:1}).slice(0,10),[I]),Lt=d=>d.length?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:d.map((m,s)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:2,background:ae[s%ae.length]}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:m.name}),n.jsx("div",{style:{color:"#475569"},children:ee(Number(m.value||0))})]})]},`${m.name}-${s}`))}):null;if(a&&!e||i.loading)return n.jsx(Ma,{});if(!i.ativo)return n.jsx("div",{children:"Você não possui acesso ao módulo de Dashboard."});const gt=d=>{switch(d){case"kpis":return n.jsx("div",{className:"card-base card-purple mb-3",style:{paddingBottom:12},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:Te.filter(s=>Le[s]!==!1).map(s=>{if(s==="kpi_vendas_total")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Vendas no período"}),n.jsx("div",{className:"kpi-value",children:ee(ka)})]},s);if(s==="kpi_qtd_vendas")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Qtd. vendas"}),n.jsx("div",{className:"kpi-value",children:_a})]},s);if(s==="kpi_ticket_medio")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Ticket médio"}),n.jsx("div",{className:"kpi-value",children:ee(Sa)})]},s);if(s==="kpi_orcamentos")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Orçamentos"}),n.jsx("div",{className:"kpi-value",children:Ea})]},s);if(s==="kpi_conversao")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Conv. Orç → Vendas"}),n.jsxs("div",{className:"kpi-value",children:[Da.toFixed(1),"%"]})]},s);if(s==="kpi_meta")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Meta somada"}),n.jsx("div",{className:"kpi-value",children:ee(Na)})]},s);if(s==="kpi_atingimento")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Atingimento meta"}),n.jsxs("div",{className:"kpi-value",children:[Ca.toFixed(1),"%"]})]},s);if(s==="kpi_dias_restantes")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Dias restantes"}),n.jsx("div",{className:"kpi-value",children:Ka})]},s);if(s.startsWith("kpi_prod_")){const c=w.find(S=>S.id===s),j=c&&Ba[c.produtoId]||0;return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:c?.titulo||"Produto"}),n.jsx("div",{className:"kpi-value",children:ee(j)})]},s)}return null})})});case"vendas_destino":const m=oe.vendas_destino==="bar"?"Vendas por Destino (Visão Completa)":"Vendas por destino (Top 5)";return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:m}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:oe.vendas_destino||"pie",onChange:s=>mt("vendas_destino",s.target.value),children:[n.jsx("option",{value:"pie",children:"Pizza"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:280},children:We.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):oe.vendas_destino==="bar"?n.jsx(De,{children:n.jsxs(xt,{data:We,children:[n.jsx(He,{dataKey:"name",hide:!0}),n.jsx(Qe,{}),n.jsx(Ne,{formatter:s=>ee(Number(s||0))}),n.jsx(et,{dataKey:"value",children:We.map((s,c)=>n.jsx(me,{fill:ae[c%ae.length]},`cell-dest-${c}`))})]})}):n.jsxs("div",{style:{width:"100%",minHeight:220,display:"flex",gap:8,alignItems:"center",justifyContent:"center",flexWrap:"wrap"},children:[n.jsx("div",{style:{flex:"1 1 220px",minWidth:180,maxWidth:260,height:220,display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(De,{width:"100%",height:180,children:n.jsxs(ta,{children:[n.jsx(Pt,{data:pt,dataKey:"value",nameKey:"name",outerRadius:70,label:!1,labelLine:!1,children:pt.map((s,c)=>n.jsx(me,{fill:ae[c%ae.length]},`cell-dest-pie-${c}`))}),n.jsx(Ne,{formatter:s=>ee(Number(s||0))})]})})}),n.jsx("div",{style:{flex:"0 0 180px",minWidth:140,maxWidth:200,maxHeight:220,padding:8,boxSizing:"border-box",overflowY:"auto",borderRadius:8,background:"#0f172a10",marginLeft:8},children:Lt(pt)})]})})]});case"vendas_produto":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Vendas por produto"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:oe.vendas_produto||"bar",onChange:s=>mt("vendas_produto",s.target.value),children:[n.jsx("option",{value:"bar",children:"Barras"}),n.jsx("option",{value:"pie",children:"Pizza"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Se.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):oe.vendas_produto==="pie"?n.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",justifyContent:"center",minHeight:220,flexWrap:"wrap"},children:[n.jsx("div",{style:{flex:"1 1 220px",minWidth:180,maxWidth:260,height:220,display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx(De,{width:"100%",height:180,children:n.jsxs(ta,{children:[n.jsx(Pt,{data:Se,dataKey:"value",nameKey:"name",outerRadius:70,label:!1,labelLine:!1,children:Se.map((s,c)=>n.jsx(me,{fill:ae[c%ae.length]},`cell-prod-pie-${c}`))}),n.jsx(Ne,{formatter:s=>ee(Number(s||0))})]})})}),n.jsx("div",{style:{flex:"0 0 180px",minWidth:140,maxWidth:200,maxHeight:220,padding:8,boxSizing:"border-box",overflowY:"auto",borderRadius:8,background:"#0f172a10",marginLeft:8},children:Lt(Se)})]}):n.jsx(De,{children:n.jsxs(xt,{data:Se,children:[n.jsx(He,{dataKey:"name",hide:!0}),n.jsx(Qe,{}),n.jsx(Ne,{formatter:s=>ee(Number(s||0))}),n.jsx(et,{dataKey:"value",children:Se.map((s,c)=>n.jsx(me,{fill:ae[c%ae.length]},`cell-prod-${c}`))})]})})})]});case"timeline":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Evolução das vendas no período"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:oe.timeline||"line",onChange:s=>mt("timeline",s.target.value),children:[n.jsx("option",{value:"line",children:"Linha"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Ye.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):oe.timeline==="bar"?n.jsx(De,{children:n.jsxs(xt,{data:Ye,children:[n.jsx(He,{dataKey:"label"}),n.jsx(Qe,{}),n.jsx(Ne,{formatter:s=>ee(Number(s||0))}),n.jsx(et,{dataKey:"value",children:Ye.map((s,c)=>n.jsx(me,{fill:ae[c%ae.length]},`cell-time-${c}`))})]})}):n.jsx(De,{children:n.jsxs(Lr,{data:Ye,children:[n.jsx(He,{dataKey:"label"}),n.jsx(Qe,{}),n.jsx(Ne,{formatter:s=>ee(Number(s||0))}),n.jsx(zr,{type:"monotone",dataKey:"value",stroke:"#a855f7",strokeWidth:2,dot:!1})]})})})]});case"orcamentos":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Orçamentos recentes (",ft.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[680px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Data"}),n.jsx("th",{children:"Cliente"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Valor"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[ft.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhum orçamento no período."})}),ft.map(s=>n.jsxs("tr",{children:[n.jsx("td",{children:s.data_orcamento?new Date(s.data_orcamento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:s.clientes?.nome||"-"}),n.jsx("td",{children:s.destinos?.nome||"-"}),n.jsx("td",{children:s.status||"-"}),n.jsx("td",{children:ee(Number(s.valor||0))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>Rt(s),children:"Ver"})})]},s.id))]})]})})]});case"viagens":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Próximas viagens (",ht.length,")"]}),o.permissao==="none"?n.jsx("div",{children:"Você não possui acesso ao módulo de Operação/Viagens."}):n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[640px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Início"}),n.jsx("th",{children:"Fim"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Origem"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[ht.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhuma viagem futura."})}),ht.map(s=>n.jsxs("tr",{children:[n.jsx("td",{children:s.data_inicio?new Date(s.data_inicio).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:s.data_fim?new Date(s.data_fim).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:s.status||"-"}),n.jsx("td",{children:s.origem||"-"}),n.jsx("td",{children:s.destino||"-"}),n.jsx("td",{children:n.jsx("a",{className:"btn btn-light",href:`/operacao/viagens/${s.id}`,children:"Abrir"})})]},s.id))]})]})})]});case"aniversariantes":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Aniversariantes do mês (",vt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[520px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nome"}),n.jsx("th",{children:"Data nasc."}),n.jsx("th",{children:"Idade"}),n.jsx("th",{children:"Telefone"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[vt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:"Nenhum aniversariante este mês."})}),vt.map(s=>{const c=ra(s.nascimento);return n.jsxs("tr",{children:[n.jsx("td",{children:s.nome}),n.jsx("td",{children:s.nascimento?new Date(s.nascimento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:c??"-"}),n.jsx("td",{children:s.telefone||"-"}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>Mt(s),children:"Ver"})})]},s.id)})]})]})})]});default:return null}};return n.jsxs("div",{className:"dashboard-geral-page",children:[n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:u==="mes_atual"?"#4f46e5":void 0,color:u==="mes_atual"?"#e5e7eb":void 0},onClick:()=>Tt("mes_atual"),children:"Mês atual"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:u==="ultimos_30"?"#4f46e5":void 0,color:u==="ultimos_30"?"#e5e7eb":void 0},onClick:()=>Tt("ultimos_30"),children:"Últimos 30 dias"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:u==="personalizado"?"#4f46e5":void 0,color:u==="personalizado"?"#e5e7eb":void 0},onClick:()=>f("personalizado"),children:"Personalizado"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>Oe(!0),children:"Personalizar dashboard"})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data início"}),n.jsx("input",{type:"date",className:"form-input",value:x,onChange:d=>{f("personalizado"),p(d.target.value)}})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data fim"}),n.jsx("input",{type:"date",className:"form-input",value:g,onChange:d=>{f("personalizado"),b(d.target.value)}})]})]})]}),ze("kpis")&&n.jsx("div",{children:gt("kpis")}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:N.filter(d=>["vendas_destino","vendas_produto","timeline"].includes(d)&&ze(d)).map(d=>n.jsx("div",{children:gt(d)},d))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:N.filter(d=>["orcamentos","viagens","aniversariantes"].includes(d)&&ze(d)).map(d=>n.jsx("div",{children:gt(d)},d))}),se&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:60},children:n.jsxs("div",{style:{width:"95%",maxWidth:520,background:"#0f172a",border:"1px solid #1f2937",borderRadius:10,padding:16,color:"#e5e7eb",maxHeight:"90vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12,alignItems:"center"},children:[n.jsx("h3",{children:"Personalizar dashboard"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Oe(!1),children:"Fechar"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:N.map((d,m)=>{const s=Ce.find(c=>c.id===d);return s?n.jsxs("div",{style:{border:"1px solid #1f2937",borderRadius:8,padding:10,display:"flex",alignItems:"center",gap:8,flexDirection:"column"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:8},children:[n.jsx("input",{type:"checkbox",checked:ze(d),onChange:()=>Oa(d)}),n.jsx("div",{style:{flex:1},children:s.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Bt(d,"up"),disabled:m===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Bt(d,"down"),disabled:m===N.length-1,children:"↓"})]})]}),d==="kpis"&&ze(d)&&n.jsxs("div",{style:{width:"100%",borderTop:"1px solid #1f2937",paddingTop:8,marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:"KPIs visíveis e ordem"}),Te.map((c,j)=>{const S=ke.find(W=>W.id===c);return S?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Le[c]!==!1,onChange:()=>Aa(c)}),n.jsx("div",{style:{flex:1},children:S.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Kt(c,"up"),disabled:j===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Kt(c,"down"),disabled:j===Te.length-1,children:"↓"})]})]},c):null})]})]},d):null})})]})}),ne&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:700,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Detalhes do orçamento"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Rt(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Cliente:"})," ",ne.clientes?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Destino:"})," ",ne.destinos?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data orçamento:"})," ",ne.data_orcamento?new Date(ne.data_orcamento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data viagem:"})," ",ne.data_viagem?new Date(ne.data_viagem).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",ne.status||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Valor:"})," ",ee(Number(ne.valor||0))]}),ne.notas&&n.jsxs("p",{style:{marginTop:8},children:[n.jsx("strong",{children:"Notas:"})," ",ne.notas]})]})}),_e&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:600,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Dados do cliente"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Mt(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",_e.nome]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nascimento:"})," ",_e.nascimento?new Date(_e.nascimento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Idade:"})," ",ra(_e.nascimento)??"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Telefone:"})," ",_e.telefone||"-"]})]})}),K&&n.jsx("div",{style:{marginTop:12,fontSize:"0.9rem"},children:"Carregando dados do dashboard..."})]})};export{Xi as default};

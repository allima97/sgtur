import{j as n}from"./jsx-runtime.mfZSNocD.js";import{r as l}from"./index.C0Fn7Wtz.js";import{s as H}from"./supabase.Ng8nq9tn.js";import{u as Lt}from"./usePermissao.DiLe8-Rs.js";import{L as Ba}from"./LoadingUsuarioContext.BaDUNi7o.js";import{c as L,p as We,b as Ka,i as Ra,s as ye,d as Ma,e as Ta,f as aa,g as La,h as za,j as le,k as Va,l as $a,m as Wa,n as Fa,o as je,q as Ga,r as Ua,t as qa,u as Ja,v as Ya,w as Ha,x as at,y as ra,z as rt,A as Qa,B as Xa,C as Za,D as nt,E as Fe,F as wt,G as na,S as er,H as Ot,I as me,J as tr,K as it,M as de,Z as Ge,N as ia,O as sa,P as oa,Q as ar,U as oe,V as Ze,W as Be,_ as gt,$ as rr,a0 as At,a1 as la,a2 as nr,a3 as ir,a4 as sr,a5 as It,a6 as da,a7 as ca,a8 as or,a9 as xe,aa as xt,ab as lr,ac as dr,ad as st,ae as bt,af as cr,ag as ua,ah as ur,ai as mr,aj as pr,ak as vr,al as fr,am as hr,an as gr,ao as xr,ap as br,aq as zt,ar as yr,as as jr,at as Pr,au as Ke,av as Re,aw as wr,ax as ma,ay as pa,az as va,aA as Or,aB as Ar,aC as Vt,aD as Ir,aE as kr,aF as $t,aG as _r,aH as Sr,aI as fa,aJ as Er,aK as Dr,aL as Nr,aM as Cr,aN as Br,aO as Kr,R as Ee,X as Ye,Y as He,T as De,L as Rr,a as Mr}from"./LineChart.BvtkNKdM.js";import"./index.2_Y_w1Vs.js";var ue=e=>null;ue.displayName="Cell";var ha=e=>e.graphicalItems.polarItems,Tr=L([We,Ka],Ra),ot=L([ha,ye,Tr],Ma),Lr=L([ot],Ta),lt=L([Lr,aa],La),zr=L([lt,ye,ot],za);L([lt,ye,ot],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(i=>{var o,u=le(r,(o=t.dataKey)!==null&&o!==void 0?o:i.dataKey);return{value:u,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:le(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Wt=()=>{},Vr=L([lt,ye,ot,Va,We],$a),$r=L([ye,Wa,Fa,Wt,Vr,Wt,je,We],Ga),ga=L([ye,je,lt,zr,Ua,We,$r],qa),Wr=L([ga,ye,Ja],Ya);L([ye,ga,Wr,We],Ha);function Ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Gt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ft(Object(a),!0).forEach(function(r){Fr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ft(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Fr(e,t,a){return(t=Gr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Gr(e){var t=Ur(e,"string");return typeof t=="symbol"?t:t+""}function Ur(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qr=(e,t)=>t,kt=L([ha,qr],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Jr=[],_t=(e,t,a)=>a?.length===0?Jr:a,xa=L([aa,kt,_t],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&a!=null&&(i=a.map(o=>Gt(Gt({},t.presentationProps),o.props))),i!=null)return i}}),Yr=L([xa,kt,_t],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,i)=>{var o,u=le(r,t.nameKey,t.name),v;return a!=null&&(o=a[i])!==null&&o!==void 0&&(o=o.props)!==null&&o!==void 0&&o.fill?v=a[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?v=r.fill:v=t.fill,{value:at(u,t.dataKey),color:v,payload:r,type:t.legendType}})}),Hr=L([xa,kt,_t,ra],(e,t,a,r)=>{if(!(t==null||e==null))return xn({offset:r,pieSettings:t,displayedData:e,cells:a})}),St=(e,t,a)=>{var r=rt();return(i,o)=>u=>{e?.(i,o,u),r(Qa({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},Et=e=>{var t=rt();return(a,r)=>i=>{e?.(a,r,i),t(Xa())}},Dt=(e,t,a)=>{var r=rt();return(i,o)=>u=>{e?.(i,o,u),r(Za({activeIndex:String(o),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},Qr=["key"],Xr=["onMouseEnter","onClick","onMouseLeave"],Zr=["id"],en=["id"];function Ut(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function V(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ut(Object(a),!0).forEach(function(r){tn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ut(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function tn(e,t,a){return(t=an(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function an(e){var t=rn(e,"string");return typeof t=="symbol"?t:t+""}function rn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function be(){return be=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},be.apply(null,arguments)}function dt(e,t){if(e==null)return{};var a,r,i=nn(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function nn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function sn(e){var t=l.useMemo(()=>Ot(e.children,ue),[e.children]),a=me(r=>Yr(r,e.id,t));return a==null?null:l.createElement(tr,{legendPayload:a})}var on=l.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:i,strokeWidth:o,fill:u,name:v,hide:x,tooltipType:p}=e,g={dataDefinedOnItem:r.map(b=>b.tooltipPayload),positions:r.map(b=>b.tooltipPosition),settings:{stroke:i,strokeWidth:o,fill:u,dataKey:t,nameKey:a,name:at(v,t),hide:x,type:p,color:u,unit:""}};return l.createElement(ia,{tooltipEntrySettings:g})}),ln=(e,t)=>e>t?"start":e<t?"end":"middle",dn=(e,t,a)=>typeof t=="function"?xe(t(e),a,a*.8):xe(t,a,a*.8),cn=(e,t,a)=>{var{top:r,left:i,width:o,height:u}=t,v=or(o,u),x=i+xe(e.cx,o,o/2),p=r+xe(e.cy,u,u/2),g=xe(e.innerRadius,v,0),b=dn(a,e.outerRadius,v),f=e.maxRadius||Math.sqrt(o*o+u*u)/2;return{cx:x,cy:p,innerRadius:g,outerRadius:b,maxRadius:f}},un=(e,t)=>{var a=Be(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function mn(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var pn=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var a=it("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=dt(t,Qr);return l.createElement(lr,be({},i,{type:"linear",className:a}))},vn=(e,t,a)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),l.isValidElement(r)))return r;var i=it("recharts-pie-label-text",mn(e));return l.createElement(dr,be({},t,{alignmentBaseline:"middle",className:i}),r)};function fn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i,labelLine:o,dataKey:u}=a;if(!r||!i||!t)return null;var v=wt(a),x=xt(i),p=xt(o),g=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,b=t.map((f,O)=>{var A=(f.startAngle+f.endAngle)/2,P=gt(f.cx,f.cy,f.outerRadius+g,A),k=V(V(V(V({},v),f),{},{stroke:"none"},x),{},{index:O,textAnchor:ln(P.x,f.cx)},P),h=V(V(V(V({},v),f),{},{fill:"none",stroke:f.fill},p),{},{index:O,points:[gt(f.cx,f.cy,f.outerRadius,A),P],key:"line"});return l.createElement(Ge,{zIndex:Fe.label,key:"label-".concat(f.startAngle,"-").concat(f.endAngle,"-").concat(f.midAngle,"-").concat(O)},l.createElement(de,null,o&&pn(o,h),vn(i,k,le(f,u))))});return l.createElement(de,{className:"recharts-pie-labels"},b)}function hn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i}=a;return typeof i=="object"&&i!=null&&"position"in i?l.createElement(ca,{label:i}):l.createElement(fn,{sectors:t,props:a,showLabels:r})}function gn(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:i,shape:o,id:u}=e,v=me(At),x=me(la),p=me(nr),{onMouseEnter:g,onClick:b,onMouseLeave:f}=i,O=dt(i,Xr),A=St(g,i.dataKey,u),P=Et(f),k=Dt(b,i.dataKey,u);return t==null||t.length===0?null:l.createElement(l.Fragment,null,t.map((h,y)=>{if(h?.startAngle===0&&h?.endAngle===0&&t.length!==1)return null;var K=p==null||p===u,I=String(y)===v&&(x==null||i.dataKey===x)&&K,E=v?r:null,w=a&&I?a:E,D=V(V({},h),{},{stroke:h.stroke,tabIndex:-1,[sr]:y,[ir]:i.dataKey});return l.createElement(de,be({key:"sector-".concat(h?.startAngle,"-").concat(h?.endAngle,"-").concat(h.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},It(O,h,y),{onMouseEnter:A(h,y),onMouseLeave:P(h,y),onClick:k(h,y)}),l.createElement(da,be({option:o??w,index:y,shapeType:"sector",isActive:I},D)))}))}function xn(e){var t,{pieSettings:a,displayedData:r,cells:i,offset:o}=e,{cornerRadius:u,startAngle:v,endAngle:x,dataKey:p,nameKey:g,tooltipType:b}=a,f=Math.abs(a.minAngle),O=un(v,x),A=Math.abs(O),P=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,k=r.filter(w=>le(w,p,0)!==0).length,h=(A>=360?k:k-1)*P,y=A-k*f-h,K=r.reduce((w,D)=>{var R=le(D,p,0);return w+(Ze(R)?R:0)},0),I;if(K>0){var E;I=r.map((w,D)=>{var R=le(w,p,0),z=le(w,g,D),M=cn(a,o,w),J=(Ze(R)?R:0)/K,N,G=V(V({},w),i&&i[D]&&i[D].props);D?N=E.endAngle+Be(O)*P*(R!==0?1:0):N=v;var W=N+Be(O)*((R!==0?f:0)+J*y),U=(N+W)/2,re=(M.innerRadius+M.outerRadius)/2,Pe=[{name:z,value:R,payload:G,dataKey:p,type:b}],ee=gt(M.cx,M.cy,re,U);return E=V(V(V(V({},a.presentationProps),{},{percent:J,cornerRadius:typeof u=="string"?parseFloat(u):u,name:z,tooltipPayload:Pe,midAngle:U,middleRadius:re,tooltipPosition:ee},G),M),{},{value:R,dataKey:p,startAngle:N,endAngle:W,payload:G,paddingAngle:Be(O)*P}),E})}return I}function bn(e){var{showLabels:t,sectors:a,children:r}=e,i=l.useMemo(()=>!t||!a?[]:a.map(o=>({value:o.value,payload:o.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:o.cx,cy:o.cy,innerRadius:o.innerRadius,outerRadius:o.outerRadius,startAngle:o.startAngle,endAngle:o.endAngle,clockWise:!1},fill:o.fill})),[a,t]);return l.createElement(rr,{value:t?i:void 0},r)}function yn(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:i,isAnimationActive:o,animationBegin:u,animationDuration:v,animationEasing:x,activeShape:p,inactiveShape:g,onAnimationStart:b,onAnimationEnd:f}=t,O=sa(t,"recharts-pie-"),A=a.current,[P,k]=l.useState(!1),h=l.useCallback(()=>{typeof f=="function"&&f(),k(!1)},[f]),y=l.useCallback(()=>{typeof b=="function"&&b(),k(!0)},[b]);return l.createElement(bn,{showLabels:!P,sectors:i},l.createElement(oa,{animationId:O,begin:u,duration:v,isActive:o,easing:x,onAnimationStart:y,onAnimationEnd:h,key:O},K=>{var I=[],E=i&&i[0],w=E?.startAngle;return i?.forEach((D,R)=>{var z=A&&A[R],M=R>0?ar(D,"paddingAngle",0):0;if(z){var J=oe(z.endAngle-z.startAngle,D.endAngle-D.startAngle,K),N=V(V({},D),{},{startAngle:w+M,endAngle:w+J+M});I.push(N),w=N.endAngle}else{var{endAngle:G,startAngle:W}=D,U=oe(0,G-W,K),re=V(V({},D),{},{startAngle:w+M,endAngle:w+U+M});I.push(re),w=re.endAngle}}),a.current=I,l.createElement(de,null,l.createElement(gn,{sectors:I,activeShape:p,inactiveShape:g,allOtherPieProps:t,shape:t.shape,id:r}))}),l.createElement(hn,{showLabels:!P,sectors:i,props:t}),t.children)}var jn={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Fe.area};function Pn(e){var{id:t}=e,a=dt(e,Zr),{hide:r,className:i,rootTabIndex:o}=e,u=l.useMemo(()=>Ot(e.children,ue),[e.children]),v=me(g=>Hr(g,t,u)),x=l.useRef(null),p=it("recharts-pie",i);return r||v==null?(x.current=null,l.createElement(de,{tabIndex:o,className:p})):l.createElement(Ge,{zIndex:e.zIndex},l.createElement(on,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:v,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),l.createElement(de,{tabIndex:o,className:p},l.createElement(yn,{props:V(V({},a),{},{sectors:v}),previousSectorsRef:x,id:t})))}function yt(e){var t=nt(e,jn),{id:a}=t,r=dt(t,en),i=wt(r);return l.createElement(na,{id:a,type:"pie"},o=>l.createElement(l.Fragment,null,l.createElement(er,{type:"pie",id:o,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),l.createElement(sn,be({},r,{id:o})),l.createElement(Pn,be({},r,{id:o}))))}yt.displayName="Pie";var wn="Invariant failed";function On(e,t){throw new Error(wn)}var An=["x","y"];function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},jt.apply(null,arguments)}function qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function $e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?qt(Object(a),!0).forEach(function(r){In(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):qt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function In(e,t,a){return(t=kn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function kn(e){var t=_n(e,"string");return typeof t=="symbol"?t:t+""}function _n(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sn(e,t){if(e==null)return{};var a,r,i=En(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function En(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Dn(e,t){var{x:a,y:r}=e,i=Sn(e,An),o="".concat(a),u=parseInt(o,10),v="".concat(r),x=parseInt(v,10),p="".concat(t.height||i.height),g=parseInt(p,10),b="".concat(t.width||i.width),f=parseInt(b,10);return $e($e($e($e($e({},t),i),u?{x:u}:{}),x?{y:x}:{}),{},{height:g,width:f,name:t.name,radius:t.radius})}function et(e){return l.createElement(da,jt({shapeType:"rectangle",propTransformer:Dn,activeClassName:"recharts-active-bar"},e))}var Nn=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ze(t))return t;var o=Ze(r)||st(r);return o?t(r,i):(o||On(),a)}};function Cn(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&bt(e.zIndex)?e.zIndex:t}var Bn=["onMouseEnter","onMouseLeave","onClick"],Kn=["value","background","tooltipPosition"],Rn=["id"],Mn=["onMouseEnter","onClick","onMouseLeave"];function pe(){return pe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},pe.apply(null,arguments)}function Jt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Jt(Object(a),!0).forEach(function(r){Tn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Jt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Tn(e,t,a){return(t=Ln(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Ln(e){var t=zn(e,"string");return typeof t=="symbol"?t:t+""}function zn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tt(e,t){if(e==null)return{};var a,r,i=Vn(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Vn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var $n=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:o}=e;return[{inactive:o,dataKey:t,type:i,color:r,value:at(a,t),payload:e}]},Wn=l.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:o,hide:u,unit:v,tooltipType:x}=e,p={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:at(o,t),hide:u,type:x,color:i,unit:v}};return l.createElement(ia,{tooltipEntrySettings:p})});function Fn(e){var t=me(At),{data:a,dataKey:r,background:i,allOtherBarProps:o}=e,{onMouseEnter:u,onMouseLeave:v,onClick:x}=o,p=tt(o,Bn),g=St(u,r),b=Et(v),f=Dt(x,r);if(!i||a==null)return null;var O=xt(i);return l.createElement(Ge,{zIndex:Cn(i,Fe.barBackground)},a.map((A,P)=>{var{value:k,background:h,tooltipPosition:y}=A,K=tt(A,Kn);if(!h)return null;var I=g(A,P),E=b(A,P),w=f(A,P),D=q(q(q(q(q({option:i,isActive:String(P)===t},K),{},{fill:"#eee"},h),O),It(p,A,P)),{},{onMouseEnter:I,onMouseLeave:E,onClick:w,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return l.createElement(et,pe({key:"background-bar-".concat(P)},D))}))}function Gn(e){var{showLabels:t,children:a,rects:r}=e,i=r?.map(o=>{var u={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return q(q({},u),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:u,fill:o.fill})});return l.createElement(yr,{value:t?i:void 0},a)}function Un(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:o,dataKey:u}=e,v=me(At),x=me(la),p=a&&String(o)===v&&(x==null||u===x),g=p?a:t;return p?l.createElement(Ge,{zIndex:Fe.activeBar},l.createElement(et,pe({},r,{name:String(r.name)},i,{isActive:p,option:g,index:o,dataKey:u}))):l.createElement(et,pe({},r,{name:String(r.name)},i,{isActive:p,option:g,index:o,dataKey:u}))}function qn(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:o}=e;return l.createElement(et,pe({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:o}))}function Jn(e){var t,{data:a,props:r}=e,i=(t=wt(r))!==null&&t!==void 0?t:{},{id:o}=i,u=tt(i,Rn),{shape:v,dataKey:x,activeBar:p}=r,{onMouseEnter:g,onClick:b,onMouseLeave:f}=r,O=tt(r,Mn),A=St(g,x),P=Et(f),k=Dt(b,x);return a?l.createElement(l.Fragment,null,a.map((h,y)=>l.createElement(de,pe({key:"rectangle-".concat(h?.x,"-").concat(h?.y,"-").concat(h?.value,"-").concat(y),className:"recharts-bar-rectangle"},It(O,h,y),{onMouseEnter:A(h,y),onMouseLeave:P(h,y),onClick:k(h,y)}),p?l.createElement(Un,{shape:v,activeBar:p,baseProps:u,entry:h,index:y,dataKey:x}):l.createElement(qn,{shape:v,baseProps:u,entry:h,index:y,dataKey:x})))):null}function Yn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:o,animationBegin:u,animationDuration:v,animationEasing:x,onAnimationEnd:p,onAnimationStart:g}=t,b=a.current,f=sa(t,"recharts-bar-"),[O,A]=l.useState(!1),P=!O,k=l.useCallback(()=>{typeof p=="function"&&p(),A(!1)},[p]),h=l.useCallback(()=>{typeof g=="function"&&g(),A(!0)},[g]);return l.createElement(Gn,{showLabels:P,rects:r},l.createElement(oa,{animationId:f,begin:u,duration:v,isActive:o,easing:x,onAnimationEnd:k,onAnimationStart:h,key:f},y=>{var K=y===1?r:r?.map((I,E)=>{var w=b&&b[E];if(w)return q(q({},I),{},{x:oe(w.x,I.x,y),y:oe(w.y,I.y,y),width:oe(w.width,I.width,y),height:oe(w.height,I.height,y)});if(i==="horizontal"){var D=oe(0,I.height,y),R=oe(I.stackedBarStart,I.y,y);return q(q({},I),{},{y:R,height:D})}var z=oe(0,I.width,y),M=oe(I.stackedBarStart,I.x,y);return q(q({},I),{},{width:z,x:M})});return y>0&&(a.current=K??null),K==null?null:l.createElement(de,null,l.createElement(Jn,{props:t,data:K}))}),l.createElement(ca,{label:t.label}),t.children)}function Hn(e){var t=l.useRef(null);return l.createElement(Yn,{previousRectanglesRef:t,props:e})}var ba=0,Qn=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:le(e,t)}};class Xn extends l.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:i,xAxisId:o,yAxisId:u,needClip:v,background:x,id:p}=this.props;if(t||a==null)return null;var g=it("recharts-bar",i),b=p;return l.createElement(de,{className:g,id:p},v&&l.createElement("defs",null,l.createElement(gr,{clipPathId:b,xAxisId:o,yAxisId:u})),l.createElement(de,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(b,")"):void 0},l.createElement(Fn,{data:a,dataKey:r,background:x,allOtherBarProps:this.props}),l.createElement(Hn,this.props)))}}var Zn={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:ba,xAxisId:0,yAxisId:0,zIndex:Fe.bar};function ei(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:o,activeBar:u,animationBegin:v,animationDuration:x,animationEasing:p,isAnimationActive:g}=e,{needClip:b}=vr(t,a),f=fr(),O=ua(),A=Ot(e.children,ue),P=me(y=>_i(y,t,a,O,e.id,A));if(f!=="vertical"&&f!=="horizontal")return null;var k,h=P?.[0];return h==null||h.height==null||h.width==null?k=0:k=f==="vertical"?h.height/2:h.width/2,l.createElement(hr,{xAxisId:t,yAxisId:a,data:P,dataPointFormatter:Qn,errorBarOffset:k},l.createElement(Xn,pe({},e,{layout:f,needClip:b,data:P,xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:o,activeBar:u,animationBegin:v,animationDuration:x,animationEasing:p,isAnimationActive:g})))}function ti(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:o,xAxis:u,yAxis:v,xAxisTicks:x,yAxisTicks:p,stackedData:g,displayedData:b,offset:f,cells:O,parentViewBox:A,dataStartIndex:P}=e,k=t==="horizontal"?v:u,h=g?k.scale.domain():null,y=xr({numericAxis:k}),K=k.scale(y);return b.map((I,E)=>{var w,D,R,z,M,J;g?w=br(g[E+P],h):(w=le(I,a),Array.isArray(w)||(w=[y,w]));var N=Nn(r,ba)(w[1],E);if(t==="horizontal"){var G,[W,U]=[v.scale(w[0]),v.scale(w[1])];D=zt({axis:u,ticks:x,bandSize:o,offset:i.offset,entry:I,index:E}),R=(G=U??W)!==null&&G!==void 0?G:void 0,z=i.size;var re=W-U;if(M=jr(re)?0:re,J={x:D,y:f.top,width:z,height:f.height},Math.abs(N)>0&&Math.abs(M)<Math.abs(N)){var Pe=Be(M||N)*(Math.abs(N)-Math.abs(M));R-=Pe,M+=Pe}}else{var[ee,we]=[u.scale(w[0]),u.scale(w[1])];if(D=ee,R=zt({axis:v,ticks:p,bandSize:o,offset:i.offset,entry:I,index:E}),z=we-ee,M=i.size,J={x:f.left,y:R,width:f.width,height:M},Math.abs(N)>0&&Math.abs(z)<Math.abs(N)){var ve=Be(z||N)*(Math.abs(N)-Math.abs(z));z+=ve}}if(D==null||R==null||z==null||M==null)return null;var Oe=q(q({},I),{},{stackedBarStart:K,x:D,y:R,width:z,height:M,value:g?w:w[1],payload:I,background:J,tooltipPosition:{x:D+z/2,y:R+M/2},parentViewBox:A},O&&O[E]&&O[E].props);return Oe}).filter(Boolean)}function ai(e){var t=nt(e,Zn),a=ua();return l.createElement(na,{id:t.id,type:"bar"},r=>l.createElement(l.Fragment,null,l.createElement(ur,{legendPayload:$n(t)}),l.createElement(Wn,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),l.createElement(mr,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:pr(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),l.createElement(Ge,{zIndex:t.zIndex},l.createElement(ei,pe({},t,{id:r})))))}var Xe=l.memo(ai,cr);Xe.displayName="Bar";function Yt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Qe(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Yt(Object(a),!0).forEach(function(r){ri(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Yt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ri(e,t,a){return(t=ni(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ni(e){var t=ii(e,"string");return typeof t=="symbol"?t:t+""}function ii(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var si=(e,t)=>t,oi=(e,t,a)=>a,li=(e,t,a,r)=>r,di=(e,t,a,r,i)=>i,Ue=L([pa,di],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),ci=L([Ue],e=>e?.maxBarSize),ui=(e,t,a,r,i,o)=>o,Ht=(e,t,a)=>{var r=a??e;if(!st(r))return xe(r,t,0)},mi=L([je,pa,si,oi,li],(e,t,a,r,i)=>t.filter(o=>e==="horizontal"?o.xAxisId===a:o.yAxisId===r).filter(o=>o.isPanorama===i).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),pi=(e,t,a,r)=>{var i=je(e);return i==="horizontal"?Vt(e,"yAxis",a,r):Vt(e,"xAxis",t,r)},vi=(e,t,a)=>{var r=je(e);return r==="horizontal"?$t(e,"xAxis",t):$t(e,"yAxis",a)},fi=(e,t,a)=>{var r={},i=e.filter(_r),o=e.filter(p=>p.stackId==null),u=i.reduce((p,g)=>(p[g.stackId]||(p[g.stackId]=[]),p[g.stackId].push(g),p),r),v=Object.entries(u).map(p=>{var[g,b]=p,f=b.map(A=>A.dataKey),O=Ht(t,a,b[0].barSize);return{stackId:g,dataKeys:f,barSize:O}}),x=o.map(p=>{var g=[p.dataKey].filter(f=>f!=null),b=Ht(t,a,p.barSize);return{stackId:void 0,dataKeys:g,barSize:b}});return[...v,...x]},hi=L([mi,kr,vi],fi),gi=(e,t,a,r,i)=>{var o,u,v=Ue(e,t,a,r,i);if(v!=null){var x=je(e),p=va(e),{maxBarSize:g}=v,b=st(g)?p:g,f,O;return x==="horizontal"?(f=Ke(e,"xAxis",t,r),O=Re(e,"xAxis",t,r)):(f=Ke(e,"yAxis",a,r),O=Re(e,"yAxis",a,r)),(o=(u=ma(f,O,!0))!==null&&u!==void 0?u:b)!==null&&o!==void 0?o:0}},ya=(e,t,a,r)=>{var i=je(e),o,u;return i==="horizontal"?(o=Ke(e,"xAxis",t,r),u=Re(e,"xAxis",t,r)):(o=Ke(e,"yAxis",a,r),u=Re(e,"yAxis",a,r)),ma(o,u)};function xi(e,t,a,r,i){var o=r.length;if(!(o<1)){var u=xe(e,a,0,!0),v,x=[];if(bt(r[0].barSize)){var p=!1,g=a/o,b=r.reduce((h,y)=>h+(y.barSize||0),0);b+=(o-1)*u,b>=a&&(b-=(o-1)*u,u=0),b>=a&&g>0&&(p=!0,g*=.9,b=o*g);var f=(a-b)/2>>0,O={offset:f-u,size:0};v=r.reduce((h,y)=>{var K,I={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:O.offset+O.size+u,size:p?g:(K=y.barSize)!==null&&K!==void 0?K:0}},E=[...h,I];return O=E[E.length-1].position,E},x)}else{var A=xe(t,a,0,!0);a-2*A-(o-1)*u<=0&&(u=0);var P=(a-2*A-(o-1)*u)/o;P>1&&(P>>=0);var k=bt(i)?Math.min(P,i):P;v=r.reduce((h,y,K)=>[...h,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A+(P+u)*K+(P-k)/2,size:k}}],x)}return v}}var bi=(e,t,a,r,i,o,u)=>{var v=st(u)?t:u,x=xi(a,r,i!==o?i:o,e,v);return i!==o&&x!=null&&(x=x.map(p=>Qe(Qe({},p),{},{position:Qe(Qe({},p.position),{},{offset:p.position.offset-i/2})}))),x},yi=L([hi,va,Or,Ar,gi,ya,ci],bi),ji=(e,t,a,r)=>Ke(e,"xAxis",t,r),Pi=(e,t,a,r)=>Ke(e,"yAxis",a,r),wi=(e,t,a,r)=>Re(e,"xAxis",t,r),Oi=(e,t,a,r)=>Re(e,"yAxis",a,r),Ai=L([yi,Ue],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),Ii=(e,t)=>{var a=Ir(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:o}=i;if(o)return o.find(u=>u.key===a)}}}},ki=L([pi,Ue],Ii),_i=L([ra,Pr,ji,Pi,wi,Oi,Ai,je,wr,ya,ki,Ue,ui],(e,t,a,r,i,o,u,v,x,p,g,b,f)=>{var{chartData:O,dataStartIndex:A,dataEndIndex:P}=x;if(!(b==null||u==null||t==null||v!=="horizontal"&&v!=="vertical"||a==null||r==null||i==null||o==null||p==null)){var{data:k}=b,h;if(k!=null&&k.length>0?h=k:h=O?.slice(A,P+1),h!=null)return ti({layout:v,barSettings:b,pos:u,parentViewBox:t,bandSize:p,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:o,stackedData:g,displayedData:h,offset:e,cells:f,dataStartIndex:A})}}),Si=["axis","item"],ht=l.forwardRef((e,t)=>l.createElement(Sr,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Si,tooltipPayloadSearcher:fa,categoricalChartProps:e,ref:t}));function Ei(e){var t=rt();return l.useEffect(()=>{t(Er(e))},[t,e]),null}var Di=["layout"];function Pt(){return Pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},Pt.apply(null,arguments)}function Ni(e,t){if(e==null)return{};var a,r,i=Ci(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Ci(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Bi={top:5,right:5,bottom:5,left:5},ja={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Bi,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Ki=l.forwardRef(function(t,a){var r,i=nt(t.categoricalChartProps,ja),{layout:o}=i,u=Ni(i,Di),{chartName:v,defaultTooltipEventType:x,validateTooltipEventTypes:p,tooltipPayloadSearcher:g}=t,b={chartName:v,defaultTooltipEventType:x,validateTooltipEventTypes:p,tooltipPayloadSearcher:g,eventEmitter:void 0};return l.createElement(Dr,{preloadedState:{options:b},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:v},l.createElement(Nr,{chartData:i.data}),l.createElement(Cr,{layout:o,margin:i.margin}),l.createElement(Br,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),l.createElement(Ei,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),l.createElement(Kr,Pt({},u,{ref:a})))});function Qt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Xt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Qt(Object(a),!0).forEach(function(r){Ri(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Qt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Ri(e,t,a){return(t=Mi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Mi(e){var t=Ti(e,"string");return typeof t=="symbol"?t:t+""}function Ti(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Li=["item"],zi=Xt(Xt({},ja),{},{layout:"centric",startAngle:0,endAngle:360}),Zt=l.forwardRef((e,t)=>{var a=nt(e,zi);return l.createElement(Ki,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Li,tooltipPayloadSearcher:fa,categoricalChartProps:a,ref:t})});const Ne=[{id:"kpis",titulo:"KPIs principais"},{id:"vendas_destino",titulo:"Vendas por destino"},{id:"vendas_produto",titulo:"Vendas por produto"},{id:"timeline",titulo:"Evolução das vendas"},{id:"orcamentos",titulo:"Orçamentos recentes"},{id:"viagens",titulo:"Próximas viagens"},{id:"aniversariantes",titulo:"Aniversariantes"}],Ce=[{id:"kpi_vendas_total",titulo:"Vendas no período"},{id:"kpi_qtd_vendas",titulo:"Qtd. vendas"},{id:"kpi_ticket_medio",titulo:"Ticket médio"},{id:"kpi_orcamentos",titulo:"Orçamentos"},{id:"kpi_conversao",titulo:"Conv. Orç → Vendas"},{id:"kpi_meta",titulo:"Meta somada (R$)"},{id:"kpi_atingimento",titulo:"Atingimento da meta"}];function Q(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function ea(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),r=i=>i.toISOString().substring(0,10);return{inicio:r(t),fim:r(a)}}function Vi(e){const t=new Date,a=new Date;a.setDate(t.getDate()-(e-1));const r=i=>i.toISOString().substring(0,10);return{inicio:r(a),fim:r(t)}}function ta(e){if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return null;const a=new Date;let r=a.getFullYear()-t.getFullYear();const i=a.getMonth()-t.getMonth();return(i<0||i===0&&a.getDate()<t.getDate())&&r--,r}const Z=["#7c3aed","#a855f7","#6366f1","#ec4899","#22c55e"],Yi=()=>{const[e,t]=l.useState(null),[a,r]=l.useState(!0),i=Lt("dashboard"),o=Lt("Operacao"),[u,v]=l.useState("mes_atual"),[x,p]=l.useState(""),[g,b]=l.useState(""),[f,O]=l.useState([]),[A,P]=l.useState([]),[k,h]=l.useState([]),[y,K]=l.useState([]),[I,E]=l.useState([]),[w,D]=l.useState([]),[R,z]=l.useState(!0),[M,J]=l.useState(null),[N,G]=l.useState(Ne.map(c=>c.id)),[W,U]=l.useState(()=>Ne.reduce((c,m)=>({...c,[m.id]:!0}),{})),[re,Pe]=l.useState(!1),[ee,we]=l.useState(Ce.map(c=>c.id)),[ve,Oe]=l.useState(()=>Ce.reduce((c,m)=>({...c,[m.id]:!0}),{})),Ae=l.useMemo(()=>[...Ce,...w],[w]),Me=l.useMemo(()=>{const c=Ae.map(d=>d.id),m=ee.filter(d=>c.includes(d)),s=c.filter(d=>!m.includes(d));return[...m,...s]},[ee,Ae]),Te=l.useMemo(()=>{const c={};return Ae.forEach(m=>{c[m.id]=ve[m.id]!==!1}),c},[ve,Ae]),[ne,qe]=l.useState({vendas_destino:"pie",vendas_produto:"bar",timeline:"line"});l.useEffect(()=>{const c=Ne.map(m=>m.id);G(m=>{const s=m.filter(S=>c.includes(S)),d=c.filter(S=>!s.includes(S)),j=[...s,...d];return JSON.stringify(j)===JSON.stringify(m)?m:j}),U(m=>{const s={...m};return c.forEach(d=>{s[d]===void 0&&(s[d]=!0)}),Object.keys(s).forEach(d=>{c.includes(d)||delete s[d]}),s})},[]);const Pa=c=>{const m={...W,[c]:!W[c]};U(m),ze(N,m,{order:Me,visible:Te})},wa=c=>{const m={...Te,[c]:!Te[c]};Oe(m),ze(N,W,{order:Me,visible:m})},Nt=(c,m)=>{const s=N.indexOf(c);if(s===-1)return;const d=[...N],j=m==="up"?s-1:s+1;j<0||j>=d.length||([d[s],d[j]]=[d[j],d[s]],G(d),ze(d,W,{order:ee,visible:ve},ne))},Ct=(c,m)=>{const s=ee.indexOf(c);if(s===-1)return;const d=[...ee],j=m==="up"?s-1:s+1;j<0||j>=d.length||([d[s],d[j]]=[d[j],d[s]],we(d),ze(N,W,{order:d,visible:ve},ne))},ct=(c,m)=>{const s={...ne,[c]:m};qe(s),ze(N,W,{order:ee,visible:ve},s)},Le=c=>W[c]!==!1;function Oa(c,m,s){typeof window<"u"&&(window.localStorage.setItem("dashboard_kpis",JSON.stringify({order:c,visible:m})),s&&window.localStorage.setItem("dashboard_charts",JSON.stringify(s)))}async function ze(c,m,s,d){try{if(e?.usuarioId){const j=c.map((S,$)=>({usuario_id:e.usuarioId,widget:S,ordem:$,visivel:m[S]!==!1,settings:S==="kpis"&&s?{kpis:{order:s.order,visible:s.visible},charts:d||null}:S==="vendas_destino"||S==="vendas_produto"||S==="timeline"?{charts:d||null}:null}));await H.from("dashboard_widgets").delete().eq("usuario_id",e.usuarioId);try{await H.from("dashboard_widgets").insert(j)}catch{const $=j.map(Y=>{const F={...Y};return delete F.settings,F});await H.from("dashboard_widgets").insert($)}}}catch(j){console.warn("Não foi possível salvar preferências no Supabase, mantendo localStorage.",j)}finally{typeof window<"u"&&(window.localStorage.setItem("dashboard_widgets",JSON.stringify({order:c,visible:m})),s&&Oa(s.order,s.visible,d),d&&window.localStorage.setItem("dashboard_charts",JSON.stringify(d)))}}const[te,Bt]=l.useState(null),[_e,Kt]=l.useState(null);l.useEffect(()=>{const{inicio:c,fim:m}=ea();p(c),b(m),v("mes_atual")},[]);function Rt(c){if(v(c),c==="mes_atual"){const{inicio:m,fim:s}=ea();p(m),b(s)}else if(c==="ultimos_30"){const{inicio:m,fim:s}=Vi(30);p(m),b(s)}}l.useEffect(()=>{async function c(){try{r(!0),J(null);const{data:m,error:s}=await H.auth.getUser();if(s||!m?.user){J("Usuário não autenticado.");return}const d=m.user.id,{data:j,error:S}=await H.from("users").select("id, nome_completo, user_types(name)").eq("id",d).maybeSingle();S&&console.error(S);const $=j?.user_types?.name||m.user.user_metadata?.name||"",Y=String($||"").toUpperCase();let F="VENDEDOR";Y.includes("ADMIN")?F="ADMIN":Y.includes("GESTOR")?F="GESTOR":Y.includes("VENDEDOR")?F="VENDEDOR":F="OUTRO";let ie=[d];if(F==="GESTOR"){const{data:Ie,error:ke}=await H.from("gestor_vendedor").select("vendedor_id").eq("gestor_id",d);if(!ke&&Ie){const ce=Ie.map(T=>T.vendedor_id).filter(T=>!!T);ie=Array.from(new Set([d,...ce]))}}else F==="ADMIN"&&(ie=[]);t({usuarioId:d,nome:j?.nome_completo||null,papel:F,vendedorIds:ie})}catch(m){console.error(m),J("Erro ao carregar contexto do usuário.")}finally{r(!1)}}c()},[]),l.useEffect(()=>{const c=Ae.map(m=>m.id);we(m=>{const s=m.filter(j=>c.includes(j)),d=c.filter(j=>!s.includes(j));return[...s,...d]}),Oe(m=>{const s={...m};return c.forEach(d=>{s[d]===void 0&&(s[d]=!0)}),Object.keys(s).forEach(d=>{c.includes(d)||delete s[d]}),s})},[Ae]),l.useEffect(()=>{if(!e||!x||!g||o.loading)return;async function c(){try{z(!0),J(null);const{data:m}=await H.from("tipo_produtos").select("id, nome, exibe_kpi_comissao");let s=H.from("vendas").select(`
          id,
          data_lancamento,
          data_embarque,
          cancelada,
          vendedor_id,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome),
          vendas_recibos (
            id,
            valor_total,
            valor_taxas,
            produtos:tipo_produtos!produto_id (id, nome, regra_comissionamento, exibe_kpi_comissao)
          )
        `).gte("data_lancamento",x).lte("data_lancamento",g).eq("cancelada",!1);e.vendedorIds.length>0&&(s=s.in("vendedor_id",e.vendedorIds));const{data:d,error:j}=await s;if(j)throw j;const{data:S,error:$}=await H.from("orcamentos").select(`
          id,
          data_orcamento,
          data_viagem,
          status,
          valor,
          notas,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome)
        `).gte("data_orcamento",x).lte("data_orcamento",g).order("data_orcamento",{ascending:!1});if($)throw $;let Y=H.from("metas_vendedor").select("id, vendedor_id, periodo, meta_geral, meta_diferenciada, ativo").gte("periodo",x).lte("periodo",g).eq("ativo",!0);e.vendedorIds.length>0&&(Y=Y.in("vendedor_id",e.vendedorIds));const{data:F,error:ie}=await Y;if(ie)throw ie;const{data:Ie,error:ke}=await H.from("clientes").select("id, nome, nascimento, telefone");if(ke)throw ke;if(o.permissao==="none")E([]);else try{const T=new Date().toISOString().slice(0,10);let fe=H.from("viagens").select("id, data_inicio, data_fim, status, origem, destino, responsavel_user_id").gte("data_inicio",T).order("data_inicio",{ascending:!0}).limit(20);e.vendedorIds.length>0&&(fe=fe.in("responsavel_user_id",e.vendedorIds));const{data:se,error:ae}=await fe;if(ae)throw ae;E(se||[])}catch(T){console.warn("Não foi possível carregar viagens no dashboard:",T),E([])}const ce=(m||[]).filter(T=>T.exibe_kpi_comissao!==!1).map(T=>({id:`kpi_prod_${T.id}`,titulo:T.nome||"Produto",produtoId:T.id}))||[];D(ce),O(d||[]),P(S||[]),h(F||[]),K(Ie||[]);try{const{data:T,error:fe}=await H.from("dashboard_widgets").select("widget, ordem, visivel, settings").eq("usuario_id",e.usuarioId).order("ordem",{ascending:!0});if(!fe&&T&&T.length>0){const se=new Set([...Ce.map(_=>_.id),...ce.map(_=>_.id)]),ae=T.map(_=>_.widget).filter(_=>Ne.some(X=>X.id===_)),he={...W};let B={},C=null;T.forEach(_=>{const X=_.widget;if(Ne.some(ge=>ge.id===X)&&(he[X]=_.visivel!==!1),X==="kpis"&&_.settings?.kpis&&(Array.isArray(_.settings.kpis.order)&&(B.order=_.settings.kpis.order.filter(ge=>se.has(ge))),_.settings.kpis.visible)){const ge={};Object.entries(_.settings.kpis.visible).forEach(([Tt,Ca])=>{se.has(Tt)&&(ge[Tt]=Ca)}),B.visible={...ve,...ge}}_.settings?.charts&&(C={...C||{},..._.settings.charts})}),ae.length>0&&G(ae),U(he),B.order&&B.order.length>0&&we(B.order),B.visible&&Oe(B.visible),C&&qe(_=>({..._,...C}))}else{const se=new Set([...Ce.map(C=>C.id),...ce.map(C=>C.id)]),ae=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(ae){const C=JSON.parse(ae);C.order&&C.visible&&(G(C.order),U(C.visible))}const he=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(he){const C=JSON.parse(he);if(C.order&&we(C.order.filter(_=>se.has(_))),C.visible){const _={};Object.entries(C.visible).forEach(([X,ge])=>{se.has(X)&&(_[X]=ge)}),Oe(X=>({...X,..._}))}}const B=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(B){const C=JSON.parse(B);qe(_=>({..._,...C}))}}}catch(T){console.warn("Preferências do dashboard não carregadas, usando padrão.",T);const fe=new Set([...Ce.map(B=>B.id),...ce.map(B=>B.id)]),se=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(se){const B=JSON.parse(se);B.order&&B.visible&&(G(B.order),U(B.visible))}const ae=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(ae){const B=JSON.parse(ae);if(B.order&&we(B.order.filter(C=>fe.has(C))),B.visible){const C={};Object.entries(B.visible).forEach(([_,X])=>{fe.has(_)&&(C[_]=X)}),Oe(_=>({..._,...C}))}}const he=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(he){const B=JSON.parse(he);qe(C=>({...C,...B}))}}}catch(m){console.error(m),J("Erro ao carregar dados do dashboard.")}finally{z(!1)}}c()},[e,x,g,o.loading,o.permissao]);const{totalVendas:Aa,qtdVendas:Ia,ticketMedio:ka,totalOrcamentos:_a,conversao:Sa,metaSomada:Ea,atingimentoMeta:Da,valorPorProduto:Na}=l.useMemo(()=>{let c=0,m=f.length;const s={};f.forEach(F=>{const ie=F.vendas_recibos||[];let Ie=0;ie.forEach(ke=>{const ce=Number(ke.valor_total||0);Ie+=ce;const T=ke.produtos?.id||"";T&&(s[T]=(s[T]||0)+ce)}),c+=Ie});const d=m>0?c/m:0,j=A.length,S=j>0?m/j*100:0,$=k.reduce((F,ie)=>F+Number(ie.meta_geral||0),0),Y=$>0?c/$*100:0;return{totalVendas:c,qtdVendas:m,ticketMedio:d,totalOrcamentos:j,conversao:S,metaSomada:$,atingimentoMeta:Y,valorPorProduto:s}},[f,A,k]),Ve=l.useMemo(()=>{const c=new Map;return f.forEach(m=>{const s=m.destinos?.nome||"Sem destino",d=(m.vendas_recibos||[]).reduce((j,S)=>j+Number(S.valor_total||0),0);c.set(s,(c.get(s)||0)+d)}),Array.from(c.entries()).map(([m,s])=>({name:m,value:s})).sort((m,s)=>s.value-m.value)},[f]),ut=l.useMemo(()=>Ve.slice(0,5),[Ve]),Se=l.useMemo(()=>{const c=new Map;return f.forEach(m=>{(m.vendas_recibos||[]).forEach(s=>{const d=s.produtos?.nome||"Sem produto",j=Number(s.valor_total||0);c.set(d,(c.get(d)||0)+j)})}),Array.from(c.entries()).map(([m,s])=>({name:m,value:s}))},[f]),Je=l.useMemo(()=>{const c=new Map;return f.forEach(s=>{const d=(s.data_lancamento||"").slice(0,10);if(!d)return;const j=(s.vendas_recibos||[]).reduce((S,$)=>S+Number($.valor_total||0),0);c.set(d,(c.get(d)||0)+j)}),Array.from(c.entries()).sort(([s],[d])=>s<d?-1:1).map(([s,d])=>{const[j,S,$]=s.split("-"),Y=j&&S&&$?`${$.padStart(2,"0")}/${S.padStart(2,"0")}`:s;return{date:s,label:Y,value:d}})},[f]),mt=l.useMemo(()=>[...A].sort((m,s)=>m.data_orcamento<s.data_orcamento?1:-1).slice(0,10),[A]),pt=l.useMemo(()=>{const m=new Date().getMonth();return y.filter(s=>{if(!s.nascimento)return!1;const d=new Date(s.nascimento);return isNaN(d.getTime())?!1:d.getMonth()===m})},[y]),vt=l.useMemo(()=>[...I].filter(m=>(m.status||"").toLowerCase()!=="cancelada").sort((m,s)=>{const d=m.data_inicio||"",j=s.data_inicio||"";return d===j?0:d?j?d<j?-1:1:-1:1}).slice(0,10),[I]),Mt=c=>c.length?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:c.map((m,s)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:2,background:Z[s%Z.length]}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:m.name}),n.jsx("div",{style:{color:"#475569"},children:Q(Number(m.value||0))})]})]},`${m.name}-${s}`))}):null;if(a&&!e||i.loading)return n.jsx(Ba,{});if(!i.ativo)return n.jsx("div",{children:"Você não possui acesso ao módulo de Dashboard."});const ft=c=>{switch(c){case"kpis":return n.jsx("div",{className:"card-base card-purple mb-3",style:{paddingBottom:12},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:Me.filter(s=>Te[s]!==!1).map(s=>{if(s==="kpi_vendas_total")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Vendas no período"}),n.jsx("div",{className:"kpi-value",children:Q(Aa)})]},s);if(s==="kpi_qtd_vendas")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Qtd. vendas"}),n.jsx("div",{className:"kpi-value",children:Ia})]},s);if(s==="kpi_ticket_medio")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Ticket médio"}),n.jsx("div",{className:"kpi-value",children:Q(ka)})]},s);if(s==="kpi_orcamentos")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Orçamentos"}),n.jsx("div",{className:"kpi-value",children:_a})]},s);if(s==="kpi_conversao")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Conv. Orç → Vendas"}),n.jsxs("div",{className:"kpi-value",children:[Sa.toFixed(1),"%"]})]},s);if(s==="kpi_meta")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Meta somada (R$)"}),n.jsx("div",{className:"kpi-value",children:Q(Ea)})]},s);if(s==="kpi_atingimento")return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Atingimento da meta"}),n.jsxs("div",{className:"kpi-value",children:[Da.toFixed(1),"%"]})]},s);if(s.startsWith("kpi_prod_")){const d=w.find(S=>S.id===s),j=d&&Na[d.produtoId]||0;return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:d?.titulo||"Produto"}),n.jsx("div",{className:"kpi-value",children:Q(j)})]},s)}return null})})});case"vendas_destino":const m=ne.vendas_destino==="bar"?"Vendas por Destino (Visão Completa)":"Vendas por destino (Top 5)";return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:m}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:ne.vendas_destino||"pie",onChange:s=>ct("vendas_destino",s.target.value),children:[n.jsx("option",{value:"pie",children:"Pizza"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Ve.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):ne.vendas_destino==="bar"?n.jsx(Ee,{children:n.jsxs(ht,{data:Ve,children:[n.jsx(Ye,{dataKey:"name",hide:!0}),n.jsx(He,{}),n.jsx(De,{formatter:s=>Q(Number(s||0))}),n.jsx(Xe,{dataKey:"value",children:Ve.map((s,d)=>n.jsx(ue,{fill:Z[d%Z.length]},`cell-dest-${d}`))})]})}):n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(Ee,{children:n.jsxs(Zt,{children:[n.jsx(yt,{data:ut,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:ut.map((s,d)=>n.jsx(ue,{fill:Z[d%Z.length]},`cell-${d}`))}),n.jsx(De,{formatter:s=>Q(Number(s||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:Mt(ut)})]})})]});case"vendas_produto":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Vendas por produto"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:ne.vendas_produto||"bar",onChange:s=>ct("vendas_produto",s.target.value),children:[n.jsx("option",{value:"bar",children:"Barras"}),n.jsx("option",{value:"pie",children:"Pizza"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Se.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):ne.vendas_produto==="pie"?n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(Ee,{children:n.jsxs(Zt,{children:[n.jsx(yt,{data:Se,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:Se.map((s,d)=>n.jsx(ue,{fill:Z[d%Z.length]},`cell-prod-pie-${d}`))}),n.jsx(De,{formatter:s=>Q(Number(s||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:Mt(Se)})]}):n.jsx(Ee,{children:n.jsxs(ht,{data:Se,children:[n.jsx(Ye,{dataKey:"name",hide:!0}),n.jsx(He,{}),n.jsx(De,{formatter:s=>Q(Number(s||0))}),n.jsx(Xe,{dataKey:"value",children:Se.map((s,d)=>n.jsx(ue,{fill:Z[d%Z.length]},`cell-prod-${d}`))})]})})})]});case"timeline":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Evolução das vendas no período"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:ne.timeline||"line",onChange:s=>ct("timeline",s.target.value),children:[n.jsx("option",{value:"line",children:"Linha"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Je.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):ne.timeline==="bar"?n.jsx(Ee,{children:n.jsxs(ht,{data:Je,children:[n.jsx(Ye,{dataKey:"label"}),n.jsx(He,{}),n.jsx(De,{formatter:s=>Q(Number(s||0))}),n.jsx(Xe,{dataKey:"value",children:Je.map((s,d)=>n.jsx(ue,{fill:Z[d%Z.length]},`cell-time-${d}`))})]})}):n.jsx(Ee,{children:n.jsxs(Rr,{data:Je,children:[n.jsx(Ye,{dataKey:"label"}),n.jsx(He,{}),n.jsx(De,{formatter:s=>Q(Number(s||0))}),n.jsx(Mr,{type:"monotone",dataKey:"value",stroke:"#a855f7",strokeWidth:2,dot:!1})]})})})]});case"orcamentos":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Orçamentos recentes (",mt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[680px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Data"}),n.jsx("th",{children:"Cliente"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Valor"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[mt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhum orçamento no período."})}),mt.map(s=>n.jsxs("tr",{children:[n.jsx("td",{children:s.data_orcamento?new Date(s.data_orcamento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:s.clientes?.nome||"-"}),n.jsx("td",{children:s.destinos?.nome||"-"}),n.jsx("td",{children:s.status||"-"}),n.jsx("td",{children:Q(Number(s.valor||0))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>Bt(s),children:"Ver"})})]},s.id))]})]})})]});case"viagens":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Próximas viagens (",vt.length,")"]}),o.permissao==="none"?n.jsx("div",{children:"Você não possui acesso ao módulo de Operação/Viagens."}):n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[640px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Início"}),n.jsx("th",{children:"Fim"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Origem"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[vt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhuma viagem futura."})}),vt.map(s=>n.jsxs("tr",{children:[n.jsx("td",{children:s.data_inicio?new Date(s.data_inicio).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:s.data_fim?new Date(s.data_fim).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:s.status||"-"}),n.jsx("td",{children:s.origem||"-"}),n.jsx("td",{children:s.destino||"-"}),n.jsx("td",{children:n.jsx("a",{className:"btn btn-light",href:`/operacao/viagens/${s.id}`,children:"Abrir"})})]},s.id))]})]})})]});case"aniversariantes":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Aniversariantes do mês (",pt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[520px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nome"}),n.jsx("th",{children:"Data nasc."}),n.jsx("th",{children:"Idade"}),n.jsx("th",{children:"Telefone"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[pt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:"Nenhum aniversariante este mês."})}),pt.map(s=>{const d=ta(s.nascimento);return n.jsxs("tr",{children:[n.jsx("td",{children:s.nome}),n.jsx("td",{children:s.nascimento?new Date(s.nascimento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:d??"-"}),n.jsx("td",{children:s.telefone||"-"}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>Kt(s),children:"Ver"})})]},s.id)})]})]})})]});default:return null}};return n.jsxs("div",{className:"dashboard-geral-page",children:[n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:u==="mes_atual"?"#4f46e5":void 0,color:u==="mes_atual"?"#e5e7eb":void 0},onClick:()=>Rt("mes_atual"),children:"Mês atual"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:u==="ultimos_30"?"#4f46e5":void 0,color:u==="ultimos_30"?"#e5e7eb":void 0},onClick:()=>Rt("ultimos_30"),children:"Últimos 30 dias"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:u==="personalizado"?"#4f46e5":void 0,color:u==="personalizado"?"#e5e7eb":void 0},onClick:()=>v("personalizado"),children:"Personalizado"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>Pe(!0),children:"Personalizar dashboard"})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data início"}),n.jsx("input",{type:"date",className:"form-input",value:x,onChange:c=>{v("personalizado"),p(c.target.value)}})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data fim"}),n.jsx("input",{type:"date",className:"form-input",value:g,onChange:c=>{v("personalizado"),b(c.target.value)}})]})]})]}),Le("kpis")&&n.jsx("div",{children:ft("kpis")}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:N.filter(c=>["vendas_destino","vendas_produto","timeline"].includes(c)&&Le(c)).map(c=>n.jsx("div",{children:ft(c)},c))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:N.filter(c=>["orcamentos","viagens","aniversariantes"].includes(c)&&Le(c)).map(c=>n.jsx("div",{children:ft(c)},c))}),re&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:60},children:n.jsxs("div",{style:{width:"95%",maxWidth:520,background:"#0f172a",border:"1px solid #1f2937",borderRadius:10,padding:16,color:"#e5e7eb",maxHeight:"90vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12,alignItems:"center"},children:[n.jsx("h3",{children:"Personalizar dashboard"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Pe(!1),children:"Fechar"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:N.map((c,m)=>{const s=Ne.find(d=>d.id===c);return s?n.jsxs("div",{style:{border:"1px solid #1f2937",borderRadius:8,padding:10,display:"flex",alignItems:"center",gap:8,flexDirection:"column"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Le(c),onChange:()=>Pa(c)}),n.jsx("div",{style:{flex:1},children:s.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Nt(c,"up"),disabled:m===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Nt(c,"down"),disabled:m===N.length-1,children:"↓"})]})]}),c==="kpis"&&Le(c)&&n.jsxs("div",{style:{width:"100%",borderTop:"1px solid #1f2937",paddingTop:8,marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:"KPIs visíveis e ordem"}),Me.map((d,j)=>{const S=Ae.find($=>$.id===d);return S?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Te[d]!==!1,onChange:()=>wa(d)}),n.jsx("div",{style:{flex:1},children:S.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Ct(d,"up"),disabled:j===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Ct(d,"down"),disabled:j===Me.length-1,children:"↓"})]})]},d):null})]})]},c):null})})]})}),te&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:700,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Detalhes do orçamento"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Bt(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Cliente:"})," ",te.clientes?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Destino:"})," ",te.destinos?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data orçamento:"})," ",te.data_orcamento?new Date(te.data_orcamento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data viagem:"})," ",te.data_viagem?new Date(te.data_viagem).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",te.status||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Valor:"})," ",Q(Number(te.valor||0))]}),te.notas&&n.jsxs("p",{style:{marginTop:8},children:[n.jsx("strong",{children:"Notas:"})," ",te.notas]})]})}),_e&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:600,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Dados do cliente"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Kt(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",_e.nome]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nascimento:"})," ",_e.nascimento?new Date(_e.nascimento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Idade:"})," ",ta(_e.nascimento)??"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Telefone:"})," ",_e.telefone||"-"]})]})}),R&&n.jsx("div",{style:{marginTop:12,fontSize:"0.9rem"},children:"Carregando dados do dashboard..."})]})};export{Yi as default};

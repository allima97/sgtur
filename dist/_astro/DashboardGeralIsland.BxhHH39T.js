import{j as n,s as te}from"./supabase.DNkd6bxA.js";import{r as o}from"./index.C0Fn7Wtz.js";import{u as ba}from"./usePermissao.72SYthuA.js";import{c as K,p as De,b as ya,i as ja,s as he,d as Pa,e as wa,f as Wt,g as Aa,h as Oa,j as ne,k as Ia,l as ka,m as Sa,n as Ea,o as ge,q as _a,r as Da,t as Na,u as Ca,v as Ba,w as Ka,x as Ge,y as Ft,z as qe,A as Ra,B as Ta,C as Ma,D as Ue,E as Ne,F as vt,G as Gt,S as La,H as pt,I as ce,J as za,K as Ye,M as ie,Z as Ce,N as qt,O as Ut,P as Yt,Q as $a,U as re,V as Ve,W as we,_ as ot,$ as Va,a0 as ft,a1 as Jt,a2 as Wa,a3 as Fa,a4 as Ga,a5 as ht,a6 as Ht,a7 as Xt,a8 as qa,a9 as pe,aa as lt,ab as Ua,ac as Ya,ad as Je,ae as dt,af as Ja,ag as Qt,ah as Ha,ai as Xa,aj as Qa,ak as Za,al as er,am as tr,an as ar,ao as rr,ap as nr,aq as kt,ar as ir,as as sr,at as or,au as Ae,av as Oe,aw as lr,ax as Zt,ay as ea,az as ta,aA as dr,aB as cr,aC as St,aD as ur,aE as mr,aF as Et,aG as vr,aH as pr,aI as aa,aJ as fr,aK as hr,aL as gr,aM as xr,aN as br,aO as yr,R as je,X as Te,Y as Me,T as Pe,L as jr,a as Pr}from"./LineChart.BvtkNKdM.js";import"./index.2_Y_w1Vs.js";var de=e=>null;de.displayName="Cell";var ra=e=>e.graphicalItems.polarItems,wr=K([De,ya],ja),He=K([ra,he,wr],Pa),Ar=K([He],wa),Xe=K([Ar,Wt],Aa),Or=K([Xe,he,He],Oa);K([Xe,he,He],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(i=>{var s,d=ne(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:ne(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var _t=()=>{},Ir=K([Xe,he,He,Ia,De],ka),kr=K([he,Sa,Ea,_t,Ir,_t,ge,De],_a),na=K([he,ge,Xe,Or,Da,De,kr],Na),Sr=K([na,he,Ca],Ba);K([he,na,Sr,De],Ka);function Dt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Nt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Dt(Object(a),!0).forEach(function(r){Er(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Dt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Er(e,t,a){return(t=_r(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function _r(e){var t=Dr(e,"string");return typeof t=="symbol"?t:t+""}function Dr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nr=(e,t)=>t,gt=K([ra,Nr],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Cr=[],xt=(e,t,a)=>a?.length===0?Cr:a,ia=K([Wt,gt,xt],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&a!=null&&(i=a.map(s=>Nt(Nt({},t.presentationProps),s.props))),i!=null)return i}}),Br=K([ia,gt,xt],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,d=ne(r,t.nameKey,t.name),v;return a!=null&&(s=a[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?v=a[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?v=r.fill:v=t.fill,{value:Ge(d,t.dataKey),color:v,payload:r,type:t.legendType}})}),Kr=K([ia,gt,xt,Ft],(e,t,a,r)=>{if(!(t==null||e==null))return an({offset:r,pieSettings:t,displayedData:e,cells:a})}),bt=(e,t,a)=>{var r=qe();return(i,s)=>d=>{e?.(i,s,d),r(Ra({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},yt=e=>{var t=qe();return(a,r)=>i=>{e?.(a,r,i),t(Ta())}},jt=(e,t,a)=>{var r=qe();return(i,s)=>d=>{e?.(i,s,d),r(Ma({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},Rr=["key"],Tr=["onMouseEnter","onClick","onMouseLeave"],Mr=["id"],Lr=["id"];function Ct(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Ct(Object(a),!0).forEach(function(r){zr(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ct(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function zr(e,t,a){return(t=$r(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $r(e){var t=Vr(e,"string");return typeof t=="symbol"?t:t+""}function Vr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(null,arguments)}function Qe(e,t){if(e==null)return{};var a,r,i=Wr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Wr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Fr(e){var t=o.useMemo(()=>pt(e.children,de),[e.children]),a=ce(r=>Br(r,e.id,t));return a==null?null:o.createElement(za,{legendPayload:a})}var Gr=o.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:i,strokeWidth:s,fill:d,name:v,hide:x,tooltipType:m}=e,f={dataDefinedOnItem:r.map(h=>h.tooltipPayload),positions:r.map(h=>h.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:d,dataKey:t,nameKey:a,name:Ge(v,t),hide:x,type:m,color:d,unit:""}};return o.createElement(qt,{tooltipEntrySettings:f})}),qr=(e,t)=>e>t?"start":e<t?"end":"middle",Ur=(e,t,a)=>typeof t=="function"?pe(t(e),a,a*.8):pe(t,a,a*.8),Yr=(e,t,a)=>{var{top:r,left:i,width:s,height:d}=t,v=qa(s,d),x=i+pe(e.cx,s,s/2),m=r+pe(e.cy,d,d/2),f=pe(e.innerRadius,v,0),h=Ur(a,e.outerRadius,v),g=e.maxRadius||Math.sqrt(s*s+d*d)/2;return{cx:x,cy:m,innerRadius:f,outerRadius:h,maxRadius:g}},Jr=(e,t)=>{var a=we(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function Hr(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Xr=(e,t)=>{if(o.isValidElement(e))return o.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Ye("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=Qe(t,Rr);return o.createElement(Ua,fe({},i,{type:"linear",className:a}))},Qr=(e,t,a)=>{if(o.isValidElement(e))return o.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),o.isValidElement(r)))return r;var i=Ye("recharts-pie-label-text",Hr(e));return o.createElement(Ya,fe({},t,{alignmentBaseline:"middle",className:i}),r)};function Zr(e){var{sectors:t,props:a,showLabels:r}=e,{label:i,labelLine:s,dataKey:d}=a;if(!r||!i||!t)return null;var v=vt(a),x=lt(i),m=lt(s),f=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,h=t.map((g,j)=>{var A=(g.startAngle+g.endAngle)/2,P=ot(g.cx,g.cy,g.outerRadius+f,A),S=T(T(T(T({},v),g),{},{stroke:"none"},x),{},{index:j,textAnchor:qr(P.x,g.cx)},P),p=T(T(T(T({},v),g),{},{fill:"none",stroke:g.fill},m),{},{index:j,points:[ot(g.cx,g.cy,g.outerRadius,A),P],key:"line"});return o.createElement(Ce,{zIndex:Ne.label,key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(j)},o.createElement(ie,null,s&&Xr(s,p),Qr(i,S,ne(g,d))))});return o.createElement(ie,{className:"recharts-pie-labels"},h)}function en(e){var{sectors:t,props:a,showLabels:r}=e,{label:i}=a;return typeof i=="object"&&i!=null&&"position"in i?o.createElement(Xt,{label:i}):o.createElement(Zr,{sectors:t,props:a,showLabels:r})}function tn(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:i,shape:s,id:d}=e,v=ce(ft),x=ce(Jt),m=ce(Wa),{onMouseEnter:f,onClick:h,onMouseLeave:g}=i,j=Qe(i,Tr),A=bt(f,i.dataKey,d),P=yt(g),S=jt(h,i.dataKey,d);return t==null||t.length===0?null:o.createElement(o.Fragment,null,t.map((p,y)=>{if(p?.startAngle===0&&p?.endAngle===0&&t.length!==1)return null;var N=m==null||m===d,O=String(y)===v&&(x==null||i.dataKey===x)&&N,C=v?r:null,w=a&&O?a:C,I=T(T({},p),{},{stroke:p.stroke,tabIndex:-1,[Ga]:y,[Fa]:i.dataKey});return o.createElement(ie,fe({key:"sector-".concat(p?.startAngle,"-").concat(p?.endAngle,"-").concat(p.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},ht(j,p,y),{onMouseEnter:A(p,y),onMouseLeave:P(p,y),onClick:S(p,y)}),o.createElement(Ht,fe({option:s??w,index:y,shapeType:"sector",isActive:O},I)))}))}function an(e){var t,{pieSettings:a,displayedData:r,cells:i,offset:s}=e,{cornerRadius:d,startAngle:v,endAngle:x,dataKey:m,nameKey:f,tooltipType:h}=a,g=Math.abs(a.minAngle),j=Jr(v,x),A=Math.abs(j),P=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,S=r.filter(w=>ne(w,m,0)!==0).length,p=(A>=360?S:S-1)*P,y=A-S*g-p,N=r.reduce((w,I)=>{var D=ne(I,m,0);return w+(Ve(D)?D:0)},0),O;if(N>0){var C;O=r.map((w,I)=>{var D=ne(w,m,0),E=ne(w,f,I),_=Yr(a,s,w),ae=(Ve(D)?D:0)/N,M,z=T(T({},w),i&&i[I]&&i[I].props);I?M=C.endAngle+we(j)*P*(D!==0?1:0):M=v;var H=M+we(j)*((D!==0?g:0)+ae*y),$=(M+H)/2,U=(_.innerRadius+_.outerRadius)/2,q=[{name:E,value:D,payload:z,dataKey:m,type:h}],se=ot(_.cx,_.cy,U,$);return C=T(T(T(T({},a.presentationProps),{},{percent:ae,cornerRadius:typeof d=="string"?parseFloat(d):d,name:E,tooltipPayload:q,midAngle:$,middleRadius:U,tooltipPosition:se},z),_),{},{value:D,dataKey:m,startAngle:M,endAngle:H,payload:z,paddingAngle:we(j)*P}),C})}return O}function rn(e){var{showLabels:t,sectors:a,children:r}=e,i=o.useMemo(()=>!t||!a?[]:a.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[a,t]);return o.createElement(Va,{value:t?i:void 0},r)}function nn(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:i,isAnimationActive:s,animationBegin:d,animationDuration:v,animationEasing:x,activeShape:m,inactiveShape:f,onAnimationStart:h,onAnimationEnd:g}=t,j=Ut(t,"recharts-pie-"),A=a.current,[P,S]=o.useState(!1),p=o.useCallback(()=>{typeof g=="function"&&g(),S(!1)},[g]),y=o.useCallback(()=>{typeof h=="function"&&h(),S(!0)},[h]);return o.createElement(rn,{showLabels:!P,sectors:i},o.createElement(Yt,{animationId:j,begin:d,duration:v,isActive:s,easing:x,onAnimationStart:y,onAnimationEnd:p,key:j},N=>{var O=[],C=i&&i[0],w=C?.startAngle;return i?.forEach((I,D)=>{var E=A&&A[D],_=D>0?$a(I,"paddingAngle",0):0;if(E){var ae=re(E.endAngle-E.startAngle,I.endAngle-I.startAngle,N),M=T(T({},I),{},{startAngle:w+_,endAngle:w+ae+_});O.push(M),w=M.endAngle}else{var{endAngle:z,startAngle:H}=I,$=re(0,z-H,N),U=T(T({},I),{},{startAngle:w+_,endAngle:w+$+_});O.push(U),w=U.endAngle}}),a.current=O,o.createElement(ie,null,o.createElement(tn,{sectors:O,activeShape:m,inactiveShape:f,allOtherPieProps:t,shape:t.shape,id:r}))}),o.createElement(en,{showLabels:!P,sectors:i,props:t}),t.children)}var sn={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ne.area};function on(e){var{id:t}=e,a=Qe(e,Mr),{hide:r,className:i,rootTabIndex:s}=e,d=o.useMemo(()=>pt(e.children,de),[e.children]),v=ce(f=>Kr(f,t,d)),x=o.useRef(null),m=Ye("recharts-pie",i);return r||v==null?(x.current=null,o.createElement(ie,{tabIndex:s,className:m})):o.createElement(Ce,{zIndex:e.zIndex},o.createElement(Gr,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:v,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),o.createElement(ie,{tabIndex:s,className:m},o.createElement(nn,{props:T(T({},a),{},{sectors:v}),previousSectorsRef:x,id:t})))}function ct(e){var t=Ue(e,sn),{id:a}=t,r=Qe(t,Lr),i=vt(r);return o.createElement(Gt,{id:a,type:"pie"},s=>o.createElement(o.Fragment,null,o.createElement(La,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),o.createElement(Fr,fe({},r,{id:s})),o.createElement(on,fe({},r,{id:s}))))}ct.displayName="Pie";var ln="Invariant failed";function dn(e,t){throw new Error(ln)}var cn=["x","y"];function ut(){return ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ut.apply(null,arguments)}function Bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Ee(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Bt(Object(a),!0).forEach(function(r){un(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function un(e,t,a){return(t=mn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function mn(e){var t=vn(e,"string");return typeof t=="symbol"?t:t+""}function vn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pn(e,t){if(e==null)return{};var a,r,i=fn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function fn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function hn(e,t){var{x:a,y:r}=e,i=pn(e,cn),s="".concat(a),d=parseInt(s,10),v="".concat(r),x=parseInt(v,10),m="".concat(t.height||i.height),f=parseInt(m,10),h="".concat(t.width||i.width),g=parseInt(h,10);return Ee(Ee(Ee(Ee(Ee({},t),i),d?{x:d}:{}),x?{y:x}:{}),{},{height:f,width:g,name:t.name,radius:t.radius})}function We(e){return o.createElement(Ht,ut({shapeType:"rectangle",propTransformer:hn,activeClassName:"recharts-active-bar"},e))}var gn=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ve(t))return t;var s=Ve(r)||Je(r);return s?t(r,i):(s||dn(),a)}};function xn(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&dt(e.zIndex)?e.zIndex:t}var bn=["onMouseEnter","onMouseLeave","onClick"],yn=["value","background","tooltipPosition"],jn=["id"],Pn=["onMouseEnter","onClick","onMouseLeave"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ue.apply(null,arguments)}function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Kt(Object(a),!0).forEach(function(r){wn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function wn(e,t,a){return(t=An(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function An(e){var t=On(e,"string");return typeof t=="symbol"?t:t+""}function On(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fe(e,t){if(e==null)return{};var a,r,i=In(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function In(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var kn=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Ge(a,t),payload:e}]},Sn=o.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:s,hide:d,unit:v,tooltipType:x}=e,m={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Ge(s,t),hide:d,type:x,color:i,unit:v}};return o.createElement(qt,{tooltipEntrySettings:m})});function En(e){var t=ce(ft),{data:a,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:d,onMouseLeave:v,onClick:x}=s,m=Fe(s,bn),f=bt(d,r),h=yt(v),g=jt(x,r);if(!i||a==null)return null;var j=lt(i);return o.createElement(Ce,{zIndex:xn(i,Ne.barBackground)},a.map((A,P)=>{var{value:S,background:p,tooltipPosition:y}=A,N=Fe(A,yn);if(!p)return null;var O=f(A,P),C=h(A,P),w=g(A,P),I=G(G(G(G(G({option:i,isActive:String(P)===t},N),{},{fill:"#eee"},p),j),ht(m,A,P)),{},{onMouseEnter:O,onMouseLeave:C,onClick:w,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return o.createElement(We,ue({key:"background-bar-".concat(P)},I))}))}function _n(e){var{showLabels:t,children:a,rects:r}=e,i=r?.map(s=>{var d={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return G(G({},d),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:d,fill:s.fill})});return o.createElement(ir,{value:t?i:void 0},a)}function Dn(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:s,dataKey:d}=e,v=ce(ft),x=ce(Jt),m=a&&String(s)===v&&(x==null||d===x),f=m?a:t;return m?o.createElement(Ce,{zIndex:Ne.activeBar},o.createElement(We,ue({},r,{name:String(r.name)},i,{isActive:m,option:f,index:s,dataKey:d}))):o.createElement(We,ue({},r,{name:String(r.name)},i,{isActive:m,option:f,index:s,dataKey:d}))}function Nn(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:s}=e;return o.createElement(We,ue({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:s}))}function Cn(e){var t,{data:a,props:r}=e,i=(t=vt(r))!==null&&t!==void 0?t:{},{id:s}=i,d=Fe(i,jn),{shape:v,dataKey:x,activeBar:m}=r,{onMouseEnter:f,onClick:h,onMouseLeave:g}=r,j=Fe(r,Pn),A=bt(f,x),P=yt(g),S=jt(h,x);return a?o.createElement(o.Fragment,null,a.map((p,y)=>o.createElement(ie,ue({key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(y),className:"recharts-bar-rectangle"},ht(j,p,y),{onMouseEnter:A(p,y),onMouseLeave:P(p,y),onClick:S(p,y)}),m?o.createElement(Dn,{shape:v,activeBar:m,baseProps:d,entry:p,index:y,dataKey:x}):o.createElement(Nn,{shape:v,baseProps:d,entry:p,index:y,dataKey:x})))):null}function Bn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:d,animationDuration:v,animationEasing:x,onAnimationEnd:m,onAnimationStart:f}=t,h=a.current,g=Ut(t,"recharts-bar-"),[j,A]=o.useState(!1),P=!j,S=o.useCallback(()=>{typeof m=="function"&&m(),A(!1)},[m]),p=o.useCallback(()=>{typeof f=="function"&&f(),A(!0)},[f]);return o.createElement(_n,{showLabels:P,rects:r},o.createElement(Yt,{animationId:g,begin:d,duration:v,isActive:s,easing:x,onAnimationEnd:S,onAnimationStart:p,key:g},y=>{var N=y===1?r:r?.map((O,C)=>{var w=h&&h[C];if(w)return G(G({},O),{},{x:re(w.x,O.x,y),y:re(w.y,O.y,y),width:re(w.width,O.width,y),height:re(w.height,O.height,y)});if(i==="horizontal"){var I=re(0,O.height,y),D=re(O.stackedBarStart,O.y,y);return G(G({},O),{},{y:D,height:I})}var E=re(0,O.width,y),_=re(O.stackedBarStart,O.x,y);return G(G({},O),{},{width:E,x:_})});return y>0&&(a.current=N??null),N==null?null:o.createElement(ie,null,o.createElement(Cn,{props:t,data:N}))}),o.createElement(Xt,{label:t.label}),t.children)}function Kn(e){var t=o.useRef(null);return o.createElement(Bn,{previousRectanglesRef:t,props:e})}var sa=0,Rn=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:ne(e,t)}};class Tn extends o.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:i,xAxisId:s,yAxisId:d,needClip:v,background:x,id:m}=this.props;if(t||a==null)return null;var f=Ye("recharts-bar",i),h=m;return o.createElement(ie,{className:f,id:m},v&&o.createElement("defs",null,o.createElement(ar,{clipPathId:h,xAxisId:s,yAxisId:d})),o.createElement(ie,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(h,")"):void 0},o.createElement(En,{data:a,dataKey:r,background:x,allOtherBarProps:this.props}),o.createElement(Kn,this.props)))}}var Mn={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:sa,xAxisId:0,yAxisId:0,zIndex:Ne.bar};function Ln(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:s,activeBar:d,animationBegin:v,animationDuration:x,animationEasing:m,isAnimationActive:f}=e,{needClip:h}=Za(t,a),g=er(),j=Qt(),A=pt(e.children,de),P=ce(y=>vi(y,t,a,j,e.id,A));if(g!=="vertical"&&g!=="horizontal")return null;var S,p=P?.[0];return p==null||p.height==null||p.width==null?S=0:S=g==="vertical"?p.height/2:p.width/2,o.createElement(tr,{xAxisId:t,yAxisId:a,data:P,dataPointFormatter:Rn,errorBarOffset:S},o.createElement(Tn,ue({},e,{layout:g,needClip:h,data:P,xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:s,activeBar:d,animationBegin:v,animationDuration:x,animationEasing:m,isAnimationActive:f})))}function zn(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:s,xAxis:d,yAxis:v,xAxisTicks:x,yAxisTicks:m,stackedData:f,displayedData:h,offset:g,cells:j,parentViewBox:A,dataStartIndex:P}=e,S=t==="horizontal"?v:d,p=f?S.scale.domain():null,y=rr({numericAxis:S}),N=S.scale(y);return h.map((O,C)=>{var w,I,D,E,_,ae;f?w=nr(f[C+P],p):(w=ne(O,a),Array.isArray(w)||(w=[y,w]));var M=gn(r,sa)(w[1],C);if(t==="horizontal"){var z,[H,$]=[v.scale(w[0]),v.scale(w[1])];I=kt({axis:d,ticks:x,bandSize:s,offset:i.offset,entry:O,index:C}),D=(z=$??H)!==null&&z!==void 0?z:void 0,E=i.size;var U=H-$;if(_=sr(U)?0:U,ae={x:I,y:g.top,width:E,height:g.height},Math.abs(M)>0&&Math.abs(_)<Math.abs(M)){var q=we(_||M)*(Math.abs(M)-Math.abs(_));D-=q,_+=q}}else{var[se,Ze]=[d.scale(w[0]),d.scale(w[1])];if(I=se,D=kt({axis:v,ticks:m,bandSize:s,offset:i.offset,entry:O,index:C}),E=Ze-se,_=i.size,ae={x:g.left,y:D,width:g.width,height:_},Math.abs(M)>0&&Math.abs(E)<Math.abs(M)){var et=we(E||M)*(Math.abs(M)-Math.abs(E));E+=et}}if(I==null||D==null||E==null||_==null)return null;var Ke=G(G({},O),{},{stackedBarStart:N,x:I,y:D,width:E,height:_,value:f?w:w[1],payload:O,background:ae,tooltipPosition:{x:I+E/2,y:D+_/2},parentViewBox:A},j&&j[C]&&j[C].props);return Ke}).filter(Boolean)}function $n(e){var t=Ue(e,Mn),a=Qt();return o.createElement(Gt,{id:t.id,type:"bar"},r=>o.createElement(o.Fragment,null,o.createElement(Ha,{legendPayload:kn(t)}),o.createElement(Sn,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),o.createElement(Xa,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Qa(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),o.createElement(Ce,{zIndex:t.zIndex},o.createElement(Ln,ue({},t,{id:r})))))}var $e=o.memo($n,Ja);$e.displayName="Bar";function Rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(a),!0).forEach(function(r){Vn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Vn(e,t,a){return(t=Wn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Wn(e){var t=Fn(e,"string");return typeof t=="symbol"?t:t+""}function Fn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Gn=(e,t)=>t,qn=(e,t,a)=>a,Un=(e,t,a,r)=>r,Yn=(e,t,a,r,i)=>i,Be=K([ea,Yn],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),Jn=K([Be],e=>e?.maxBarSize),Hn=(e,t,a,r,i,s)=>s,Tt=(e,t,a)=>{var r=a??e;if(!Je(r))return pe(r,t,0)},Xn=K([ge,ea,Gn,qn,Un],(e,t,a,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===a:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Qn=(e,t,a,r)=>{var i=ge(e);return i==="horizontal"?St(e,"yAxis",a,r):St(e,"xAxis",t,r)},Zn=(e,t,a)=>{var r=ge(e);return r==="horizontal"?Et(e,"xAxis",t):Et(e,"yAxis",a)},ei=(e,t,a)=>{var r={},i=e.filter(vr),s=e.filter(m=>m.stackId==null),d=i.reduce((m,f)=>(m[f.stackId]||(m[f.stackId]=[]),m[f.stackId].push(f),m),r),v=Object.entries(d).map(m=>{var[f,h]=m,g=h.map(A=>A.dataKey),j=Tt(t,a,h[0].barSize);return{stackId:f,dataKeys:g,barSize:j}}),x=s.map(m=>{var f=[m.dataKey].filter(g=>g!=null),h=Tt(t,a,m.barSize);return{stackId:void 0,dataKeys:f,barSize:h}});return[...v,...x]},ti=K([Xn,mr,Zn],ei),ai=(e,t,a,r,i)=>{var s,d,v=Be(e,t,a,r,i);if(v!=null){var x=ge(e),m=ta(e),{maxBarSize:f}=v,h=Je(f)?m:f,g,j;return x==="horizontal"?(g=Ae(e,"xAxis",t,r),j=Oe(e,"xAxis",t,r)):(g=Ae(e,"yAxis",a,r),j=Oe(e,"yAxis",a,r)),(s=(d=Zt(g,j,!0))!==null&&d!==void 0?d:h)!==null&&s!==void 0?s:0}},oa=(e,t,a,r)=>{var i=ge(e),s,d;return i==="horizontal"?(s=Ae(e,"xAxis",t,r),d=Oe(e,"xAxis",t,r)):(s=Ae(e,"yAxis",a,r),d=Oe(e,"yAxis",a,r)),Zt(s,d)};function ri(e,t,a,r,i){var s=r.length;if(!(s<1)){var d=pe(e,a,0,!0),v,x=[];if(dt(r[0].barSize)){var m=!1,f=a/s,h=r.reduce((p,y)=>p+(y.barSize||0),0);h+=(s-1)*d,h>=a&&(h-=(s-1)*d,d=0),h>=a&&f>0&&(m=!0,f*=.9,h=s*f);var g=(a-h)/2>>0,j={offset:g-d,size:0};v=r.reduce((p,y)=>{var N,O={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:j.offset+j.size+d,size:m?f:(N=y.barSize)!==null&&N!==void 0?N:0}},C=[...p,O];return j=C[C.length-1].position,C},x)}else{var A=pe(t,a,0,!0);a-2*A-(s-1)*d<=0&&(d=0);var P=(a-2*A-(s-1)*d)/s;P>1&&(P>>=0);var S=dt(i)?Math.min(P,i):P;v=r.reduce((p,y,N)=>[...p,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A+(P+d)*N+(P-S)/2,size:S}}],x)}return v}}var ni=(e,t,a,r,i,s,d)=>{var v=Je(d)?t:d,x=ri(a,r,i!==s?i:s,e,v);return i!==s&&x!=null&&(x=x.map(m=>Le(Le({},m),{},{position:Le(Le({},m.position),{},{offset:m.position.offset-i/2})}))),x},ii=K([ti,ta,dr,cr,ai,oa,Jn],ni),si=(e,t,a,r)=>Ae(e,"xAxis",t,r),oi=(e,t,a,r)=>Ae(e,"yAxis",a,r),li=(e,t,a,r)=>Oe(e,"xAxis",t,r),di=(e,t,a,r)=>Oe(e,"yAxis",a,r),ci=K([ii,Be],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),ui=(e,t)=>{var a=ur(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(d=>d.key===a)}}}},mi=K([Qn,Be],ui),vi=K([Ft,or,si,oi,li,di,ci,ge,lr,oa,mi,Be,Hn],(e,t,a,r,i,s,d,v,x,m,f,h,g)=>{var{chartData:j,dataStartIndex:A,dataEndIndex:P}=x;if(!(h==null||d==null||t==null||v!=="horizontal"&&v!=="vertical"||a==null||r==null||i==null||s==null||m==null)){var{data:S}=h,p;if(S!=null&&S.length>0?p=S:p=j?.slice(A,P+1),p!=null)return zn({layout:v,barSettings:h,pos:d,parentViewBox:t,bandSize:m,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:f,displayedData:p,offset:e,cells:g,dataStartIndex:A})}}),pi=["axis","item"],st=o.forwardRef((e,t)=>o.createElement(pr,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pi,tooltipPayloadSearcher:aa,categoricalChartProps:e,ref:t}));function fi(e){var t=qe();return o.useEffect(()=>{t(fr(e))},[t,e]),null}var hi=["layout"];function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},mt.apply(null,arguments)}function gi(e,t){if(e==null)return{};var a,r,i=xi(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function xi(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var bi={top:5,right:5,bottom:5,left:5},la={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:bi,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},yi=o.forwardRef(function(t,a){var r,i=Ue(t.categoricalChartProps,la),{layout:s}=i,d=gi(i,hi),{chartName:v,defaultTooltipEventType:x,validateTooltipEventTypes:m,tooltipPayloadSearcher:f}=t,h={chartName:v,defaultTooltipEventType:x,validateTooltipEventTypes:m,tooltipPayloadSearcher:f,eventEmitter:void 0};return o.createElement(hr,{preloadedState:{options:h},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:v},o.createElement(gr,{chartData:i.data}),o.createElement(xr,{layout:s,margin:i.margin}),o.createElement(br,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),o.createElement(fi,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),o.createElement(yr,mt({},d,{ref:a})))});function Mt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Lt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Mt(Object(a),!0).forEach(function(r){ji(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Mt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function ji(e,t,a){return(t=Pi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Pi(e){var t=wi(e,"string");return typeof t=="symbol"?t:t+""}function wi(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ai=["item"],Oi=Lt(Lt({},la),{},{layout:"centric",startAngle:0,endAngle:360}),zt=o.forwardRef((e,t)=>{var a=Ue(e,Oi);return o.createElement(yi,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Ai,tooltipPayloadSearcher:aa,categoricalChartProps:a,ref:t})});const _e=[{id:"kpis",titulo:"KPIs principais"},{id:"vendas_destino",titulo:"Vendas por destino"},{id:"vendas_produto",titulo:"Vendas por produto"},{id:"timeline",titulo:"Evolução das vendas"},{id:"orcamentos",titulo:"Orçamentos recentes"},{id:"aniversariantes",titulo:"Aniversariantes"}],ze=[{id:"kpi_vendas_total",titulo:"Vendas no período"},{id:"kpi_qtd_vendas",titulo:"Qtd. vendas"},{id:"kpi_ticket_medio",titulo:"Ticket médio"},{id:"kpi_diferenciado",titulo:"Comissão Diferenciada"},{id:"kpi_orcamentos",titulo:"Orçamentos"},{id:"kpi_conversao",titulo:"Conv. Orç → Vendas"},{id:"kpi_meta",titulo:"Meta somada (R$)"},{id:"kpi_atingimento",titulo:"Atingimento da meta"}];function J(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function $t(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),r=i=>i.toISOString().substring(0,10);return{inicio:r(t),fim:r(a)}}function Ii(e){const t=new Date,a=new Date;a.setDate(t.getDate()-(e-1));const r=i=>i.toISOString().substring(0,10);return{inicio:r(a),fim:r(t)}}function Vt(e){if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return null;const a=new Date;let r=a.getFullYear()-t.getFullYear();const i=a.getMonth()-t.getMonth();return(i<0||i===0&&a.getDate()<t.getDate())&&r--,r}const X=["#7c3aed","#a855f7","#6366f1","#ec4899","#22c55e"],Ni=()=>{const[e,t]=o.useState(null),[a,r]=o.useState(!0),i=ba("Dashboard"),[s,d]=o.useState("mes_atual"),[v,x]=o.useState(""),[m,f]=o.useState(""),[h,g]=o.useState([]),[j,A]=o.useState([]),[P,S]=o.useState([]),[p,y]=o.useState([]),[N,O]=o.useState(!0),[C,w]=o.useState(null),[I,D]=o.useState(_e.map(c=>c.id)),[E,_]=o.useState(()=>_e.reduce((c,l)=>({...c,[l.id]:!0}),{})),[ae,M]=o.useState(!1),[z,H]=o.useState(ze.map(c=>c.id)),[$,U]=o.useState(()=>ze.reduce((c,l)=>({...c,[l.id]:!0}),{})),[q,se]=o.useState({vendas_destino:"pie",vendas_produto:"bar",timeline:"line"}),Ze=c=>{const l={...E,[c]:!E[c]};_(l),ke(I,l,{order:z,visible:$})},et=c=>{const l={...$,[c]:!$[c]};U(l),ke(I,E,{order:z,visible:l})},Ke=(c,l)=>{const u=I.indexOf(c);if(u===-1)return;const b=[...I],k=l==="up"?u-1:u+1;k<0||k>=b.length||([b[u],b[k]]=[b[k],b[u]],D(b),ke(b,E,{order:z,visible:$},q))},Pt=(c,l)=>{const u=z.indexOf(c);if(u===-1)return;const b=[...z],k=l==="up"?u-1:u+1;k<0||k>=b.length||([b[u],b[k]]=[b[k],b[u]],H(b),ke(I,E,{order:b,visible:$},q))},tt=(c,l)=>{const u={...q,[c]:l};se(u),ke(I,E,{order:z,visible:$},u)},Ie=c=>E[c]!==!1;function da(c,l,u){typeof window<"u"&&(window.localStorage.setItem("dashboard_kpis",JSON.stringify({order:c,visible:l})),u&&window.localStorage.setItem("dashboard_charts",JSON.stringify(u)))}async function ke(c,l,u,b){try{if(e?.usuarioId){const k=c.map((B,L)=>({usuario_id:e.usuarioId,widget:B,ordem:L,visivel:l[B]!==!1,settings:B==="kpis"&&u?{kpis:{order:u.order,visible:u.visible},charts:b||null}:B==="vendas_destino"||B==="vendas_produto"||B==="timeline"?{charts:b||null}:null}));await te.from("dashboard_widgets").delete().eq("usuario_id",e.usuarioId);try{await te.from("dashboard_widgets").insert(k)}catch{const L=k.map(Z=>{const W={...Z};return delete W.settings,W});await te.from("dashboard_widgets").insert(L)}}}catch(k){console.warn("Não foi possível salvar preferências no Supabase, mantendo localStorage.",k)}finally{typeof window<"u"&&(window.localStorage.setItem("dashboard_widgets",JSON.stringify({order:c,visible:l})),u&&da(u.order,u.visible,b),b&&window.localStorage.setItem("dashboard_charts",JSON.stringify(b)))}}const[Q,wt]=o.useState(null),[xe,At]=o.useState(null);o.useEffect(()=>{const{inicio:c,fim:l}=$t();x(c),f(l),d("mes_atual")},[]);function Ot(c){if(d(c),c==="mes_atual"){const{inicio:l,fim:u}=$t();x(l),f(u)}else if(c==="ultimos_30"){const{inicio:l,fim:u}=Ii(30);x(l),f(u)}}o.useEffect(()=>{async function c(){try{r(!0),w(null);const{data:l,error:u}=await te.auth.getUser();if(u||!l?.user){w("Usuário não autenticado.");return}const b=l.user.id,{data:k,error:B}=await te.from("users").select("id, nome_completo, user_types(name)").eq("id",b).maybeSingle();B&&console.error(B);const L=k?.user_types?.name||l.user.user_metadata?.name||"",Z=String(L||"").toUpperCase();let W="VENDEDOR";Z.includes("ADMIN")?W="ADMIN":Z.includes("GESTOR")?W="GESTOR":Z.includes("VENDEDOR")?W="VENDEDOR":W="OUTRO";let oe=[b];if(W==="GESTOR"){const{data:me,error:ee}=await te.from("gestor_vendedor").select("vendedor_id").eq("gestor_id",b);if(!ee&&me){const le=me.map(Y=>Y.vendedor_id).filter(Y=>!!Y);oe=Array.from(new Set([b,...le]))}}else W==="ADMIN"&&(oe=[]);t({usuarioId:b,nome:k?.nome_completo||null,papel:W,vendedorIds:oe})}catch(l){console.error(l),w("Erro ao carregar contexto do usuário.")}finally{r(!1)}}c()},[]),o.useEffect(()=>{if(!e||!v||!m)return;async function c(){try{O(!0),w(null);let l=te.from("vendas").select(`
          id,
          data_lancamento,
          data_embarque,
          cancelada,
          vendedor_id,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome),
          vendas_recibos (
            id,
            valor_total,
            valor_taxas,
            produtos:tipo_produtos!produto_id (id, nome, regra_comissionamento)
          )
        `).gte("data_lancamento",v).lte("data_lancamento",m).eq("cancelada",!1);e.vendedorIds.length>0&&(l=l.in("vendedor_id",e.vendedorIds));const{data:u,error:b}=await l;if(b)throw b;const{data:k,error:B}=await te.from("orcamentos").select(`
          id,
          data_orcamento,
          data_viagem,
          status,
          valor,
          notas,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome)
        `).gte("data_orcamento",v).lte("data_orcamento",m).order("data_orcamento",{ascending:!1});if(B)throw B;let L=te.from("metas_vendedor").select("id, vendedor_id, periodo, meta_geral, meta_diferenciada, ativo").gte("periodo",v).lte("periodo",m).eq("ativo",!0);e.vendedorIds.length>0&&(L=L.in("vendedor_id",e.vendedorIds));const{data:Z,error:W}=await L;if(W)throw W;const{data:oe,error:me}=await te.from("clientes").select("id, nome, nascimento, telefone");if(me)throw me;g(u||[]),A(k||[]),S(Z||[]),y(oe||[]);try{const{data:ee,error:le}=await te.from("dashboard_widgets").select("widget, ordem, visivel, settings").eq("usuario_id",e.usuarioId).order("ordem",{ascending:!0});if(!le&&ee&&ee.length>0){const Y=ee.map(F=>F.widget).filter(F=>_e.some(Se=>Se.id===F)),ve={...E};let R={},V=null;ee.forEach(F=>{const Se=F.widget;_e.some(it=>it.id===Se)&&(ve[Se]=F.visivel!==!1),Se==="kpis"&&F.settings?.kpis&&(Array.isArray(F.settings.kpis.order)&&(R.order=F.settings.kpis.order.filter(it=>ze.some(xa=>xa.id===it))),F.settings.kpis.visible&&(R.visible={...$,...F.settings.kpis.visible})),F.settings?.charts&&(V={...V||{},...F.settings.charts})}),Y.length>0&&D(Y),_(ve),R.order&&R.order.length>0&&H(R.order),R.visible&&U(R.visible),V&&se(F=>({...F,...V}))}else{const Y=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(Y){const V=JSON.parse(Y);V.order&&V.visible&&(D(V.order),_(V.visible))}const ve=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(ve){const V=JSON.parse(ve);V.order&&H(V.order),V.visible&&U(V.visible)}const R=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(R){const V=JSON.parse(R);se(F=>({...F,...V}))}}}catch(ee){console.warn("Preferências do dashboard não carregadas, usando padrão.",ee);const le=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(le){const R=JSON.parse(le);R.order&&R.visible&&(D(R.order),_(R.visible))}const Y=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(Y){const R=JSON.parse(Y);R.order&&H(R.order),R.visible&&U(R.visible)}const ve=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(ve){const R=JSON.parse(ve);se(V=>({...V,...R}))}}}catch(l){console.error(l),w("Erro ao carregar dados do dashboard.")}finally{O(!1)}}c()},[e,v,m]);const{totalVendas:ca,qtdVendas:ua,ticketMedio:ma,totalDiferenciado:va,totalOrcamentos:pa,conversao:fa,metaSomada:ha,atingimentoMeta:ga}=o.useMemo(()=>{let c=0,l=h.length,u=0;h.forEach(W=>{const oe=W.vendas_recibos||[];let me=0;oe.forEach(ee=>{const le=Number(ee.valor_total||0);me+=le,(ee.produtos?.regra_comissionamento?.toLowerCase()||"")==="diferenciado"&&(u+=le)}),c+=me});const b=l>0?c/l:0,k=j.length,B=k>0?l/k*100:0,L=P.reduce((W,oe)=>W+Number(oe.meta_geral||0),0),Z=L>0?c/L*100:0;return{totalVendas:c,qtdVendas:l,ticketMedio:b,totalDiferenciado:u,totalOrcamentos:k,conversao:B,metaSomada:L,atingimentoMeta:Z}},[h,j,P]),be=o.useMemo(()=>{const c=new Map;return h.forEach(l=>{const u=l.destinos?.nome||"Sem destino",b=(l.vendas_recibos||[]).reduce((k,B)=>k+Number(B.valor_total||0),0);c.set(u,(c.get(u)||0)+b)}),Array.from(c.entries()).map(([l,u])=>({name:l,value:u}))},[h]),ye=o.useMemo(()=>{const c=new Map;return h.forEach(l=>{(l.vendas_recibos||[]).forEach(u=>{const b=u.produtos?.nome||"Sem produto",k=Number(u.valor_total||0);c.set(b,(c.get(b)||0)+k)})}),Array.from(c.entries()).map(([l,u])=>({name:l,value:u}))},[h]),Re=o.useMemo(()=>{const c=new Map;return h.forEach(u=>{const b=(u.data_lancamento||"").slice(0,10);if(!b)return;const k=(u.vendas_recibos||[]).reduce((B,L)=>B+Number(L.valor_total||0),0);c.set(b,(c.get(b)||0)+k)}),Array.from(c.entries()).sort(([u],[b])=>u<b?-1:1).map(([u,b])=>{const[k,B,L]=u.split("-"),Z=k&&B&&L?`${L.padStart(2,"0")}/${B.padStart(2,"0")}`:u;return{date:u,label:Z,value:b}})},[h]),at=o.useMemo(()=>[...j].sort((l,u)=>l.data_orcamento<u.data_orcamento?1:-1).slice(0,10),[j]),rt=o.useMemo(()=>{const l=new Date().getMonth();return p.filter(u=>{if(!u.nascimento)return!1;const b=new Date(u.nascimento);return isNaN(b.getTime())?!1:b.getMonth()===l})},[p]),It=c=>c.length?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:c.map((l,u)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:2,background:X[u%X.length]}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:l.name}),n.jsx("div",{style:{color:"#475569"},children:J(Number(l.value||0))})]})]},`${l.name}-${u}`))}):null;if(a&&!e||i.loading)return n.jsx("div",{children:"Carregando contexto do dashboard..."});if(!i.ativo)return n.jsx("div",{children:"Você não possui acesso ao módulo de Dashboard."});const nt=c=>{switch(c){case"kpis":return n.jsx("div",{className:"card-base card-purple mb-3",style:{paddingBottom:12},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:z.filter(l=>$[l]!==!1).map(l=>{switch(l){case"kpi_vendas_total":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Vendas no período"}),n.jsx("div",{className:"kpi-value",children:J(ca)})]},l);case"kpi_qtd_vendas":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Qtd. vendas"}),n.jsx("div",{className:"kpi-value",children:ua})]},l);case"kpi_ticket_medio":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Ticket médio"}),n.jsx("div",{className:"kpi-value",children:J(ma)})]},l);case"kpi_diferenciado":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Comissão Diferenciada"}),n.jsx("div",{className:"kpi-value",children:J(va)})]},l);case"kpi_orcamentos":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Orçamentos"}),n.jsx("div",{className:"kpi-value",children:pa})]},l);case"kpi_conversao":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Conv. Orç → Vendas"}),n.jsxs("div",{className:"kpi-value",children:[fa.toFixed(1),"%"]})]},l);case"kpi_meta":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Meta somada (R$)"}),n.jsx("div",{className:"kpi-value",children:J(ha)})]},l);case"kpi_atingimento":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Atingimento da meta"}),n.jsxs("div",{className:"kpi-value",children:[ga.toFixed(1),"%"]})]},l);default:return null}})})});case"vendas_destino":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Vendas por destino"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:q.vendas_destino||"pie",onChange:l=>tt("vendas_destino",l.target.value),children:[n.jsx("option",{value:"pie",children:"Pizza"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:be.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):q.vendas_destino==="bar"?n.jsx(je,{children:n.jsxs(st,{data:be,children:[n.jsx(Te,{dataKey:"name",hide:!0}),n.jsx(Me,{}),n.jsx(Pe,{formatter:l=>J(Number(l||0))}),n.jsx($e,{dataKey:"value",children:be.map((l,u)=>n.jsx(de,{fill:X[u%X.length]},`cell-dest-${u}`))})]})}):n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(je,{children:n.jsxs(zt,{children:[n.jsx(ct,{data:be,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:be.map((l,u)=>n.jsx(de,{fill:X[u%X.length]},`cell-${u}`))}),n.jsx(Pe,{formatter:l=>J(Number(l||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:It(be)})]})})]});case"vendas_produto":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Vendas por produto"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:q.vendas_produto||"bar",onChange:l=>tt("vendas_produto",l.target.value),children:[n.jsx("option",{value:"bar",children:"Barras"}),n.jsx("option",{value:"pie",children:"Pizza"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:ye.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):q.vendas_produto==="pie"?n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(je,{children:n.jsxs(zt,{children:[n.jsx(ct,{data:ye,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:ye.map((l,u)=>n.jsx(de,{fill:X[u%X.length]},`cell-prod-pie-${u}`))}),n.jsx(Pe,{formatter:l=>J(Number(l||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:It(ye)})]}):n.jsx(je,{children:n.jsxs(st,{data:ye,children:[n.jsx(Te,{dataKey:"name",hide:!0}),n.jsx(Me,{}),n.jsx(Pe,{formatter:l=>J(Number(l||0))}),n.jsx($e,{dataKey:"value",children:ye.map((l,u)=>n.jsx(de,{fill:X[u%X.length]},`cell-prod-${u}`))})]})})})]});case"timeline":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Evolução das vendas no período"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:q.timeline||"line",onChange:l=>tt("timeline",l.target.value),children:[n.jsx("option",{value:"line",children:"Linha"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Re.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):q.timeline==="bar"?n.jsx(je,{children:n.jsxs(st,{data:Re,children:[n.jsx(Te,{dataKey:"label"}),n.jsx(Me,{}),n.jsx(Pe,{formatter:l=>J(Number(l||0))}),n.jsx($e,{dataKey:"value",children:Re.map((l,u)=>n.jsx(de,{fill:X[u%X.length]},`cell-time-${u}`))})]})}):n.jsx(je,{children:n.jsxs(jr,{data:Re,children:[n.jsx(Te,{dataKey:"label"}),n.jsx(Me,{}),n.jsx(Pe,{formatter:l=>J(Number(l||0))}),n.jsx(Pr,{type:"monotone",dataKey:"value",stroke:"#a855f7",strokeWidth:2,dot:!1})]})})})]});case"orcamentos":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Orçamentos recentes (",at.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[680px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Data"}),n.jsx("th",{children:"Cliente"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Valor"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[at.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhum orçamento no período."})}),at.map(l=>n.jsxs("tr",{children:[n.jsx("td",{children:l.data_orcamento?new Date(l.data_orcamento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:l.clientes?.nome||"-"}),n.jsx("td",{children:l.destinos?.nome||"-"}),n.jsx("td",{children:l.status||"-"}),n.jsx("td",{children:J(Number(l.valor||0))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>wt(l),children:"Ver"})})]},l.id))]})]})})]});case"aniversariantes":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Aniversariantes do mês (",rt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[520px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nome"}),n.jsx("th",{children:"Data nasc."}),n.jsx("th",{children:"Idade"}),n.jsx("th",{children:"Telefone"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[rt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:"Nenhum aniversariante este mês."})}),rt.map(l=>{const u=Vt(l.nascimento);return n.jsxs("tr",{children:[n.jsx("td",{children:l.nome}),n.jsx("td",{children:l.nascimento?new Date(l.nascimento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:u??"-"}),n.jsx("td",{children:l.telefone||"-"}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>At(l),children:"Ver"})})]},l.id)})]})]})})]});default:return null}};return n.jsxs("div",{className:"dashboard-geral-page",children:[n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="mes_atual"?"#4f46e5":void 0,color:s==="mes_atual"?"#e5e7eb":void 0},onClick:()=>Ot("mes_atual"),children:"Mês atual"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="ultimos_30"?"#4f46e5":void 0,color:s==="ultimos_30"?"#e5e7eb":void 0},onClick:()=>Ot("ultimos_30"),children:"Últimos 30 dias"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="personalizado"?"#4f46e5":void 0,color:s==="personalizado"?"#e5e7eb":void 0},onClick:()=>d("personalizado"),children:"Personalizado"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>M(!0),children:"Personalizar dashboard"})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data início"}),n.jsx("input",{type:"date",className:"form-input",value:v,onChange:c=>{d("personalizado"),x(c.target.value)}})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data fim"}),n.jsx("input",{type:"date",className:"form-input",value:m,onChange:c=>{d("personalizado"),f(c.target.value)}})]})]})]}),Ie("kpis")&&n.jsx("div",{children:nt("kpis")}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:I.filter(c=>["vendas_destino","vendas_produto","timeline"].includes(c)&&Ie(c)).map(c=>n.jsx("div",{children:nt(c)},c))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:I.filter(c=>["orcamentos","aniversariantes"].includes(c)&&Ie(c)).map(c=>n.jsx("div",{children:nt(c)},c))}),ae&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:60},children:n.jsxs("div",{style:{width:"95%",maxWidth:520,background:"#0f172a",border:"1px solid #1f2937",borderRadius:10,padding:16,color:"#e5e7eb",maxHeight:"90vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12,alignItems:"center"},children:[n.jsx("h3",{children:"Personalizar dashboard"}),n.jsx("button",{className:"btn btn-light",onClick:()=>M(!1),children:"Fechar"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:I.map((c,l)=>{const u=_e.find(b=>b.id===c);return u?n.jsxs("div",{style:{border:"1px solid #1f2937",borderRadius:8,padding:10,display:"flex",alignItems:"center",gap:8,flexDirection:"column"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Ie(c),onChange:()=>Ze(c)}),n.jsx("div",{style:{flex:1},children:u.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Ke(c,"up"),disabled:l===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Ke(c,"down"),disabled:l===I.length-1,children:"↓"})]})]}),c==="kpis"&&Ie(c)&&n.jsxs("div",{style:{width:"100%",borderTop:"1px solid #1f2937",paddingTop:8,marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:"KPIs visíveis e ordem"}),z.map((b,k)=>{const B=ze.find(L=>L.id===b);return B?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:$[b]!==!1,onChange:()=>et(b)}),n.jsx("div",{style:{flex:1},children:B.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Pt(b,"up"),disabled:k===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Pt(b,"down"),disabled:k===z.length-1,children:"↓"})]})]},b):null})]})]},c):null})})]})}),Q&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:700,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Detalhes do orçamento"}),n.jsx("button",{className:"btn btn-light",onClick:()=>wt(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Cliente:"})," ",Q.clientes?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Destino:"})," ",Q.destinos?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data orçamento:"})," ",Q.data_orcamento?new Date(Q.data_orcamento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data viagem:"})," ",Q.data_viagem?new Date(Q.data_viagem).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",Q.status||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Valor:"})," ",J(Number(Q.valor||0))]}),Q.notas&&n.jsxs("p",{style:{marginTop:8},children:[n.jsx("strong",{children:"Notas:"})," ",Q.notas]})]})}),xe&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:600,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Dados do cliente"}),n.jsx("button",{className:"btn btn-light",onClick:()=>At(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",xe.nome]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nascimento:"})," ",xe.nascimento?new Date(xe.nascimento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Idade:"})," ",Vt(xe.nascimento)??"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Telefone:"})," ",xe.telefone||"-"]})]})}),N&&n.jsx("div",{style:{marginTop:12,fontSize:"0.9rem"},children:"Carregando dados do dashboard..."})]})};export{Ni as default};

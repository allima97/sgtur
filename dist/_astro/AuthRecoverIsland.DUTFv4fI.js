import{j as e,s as x}from"./supabase.CWKfsr2i.js";import{r as s}from"./index.DVhKKaGN.js";import{r as v}from"./logs.z45cSWoX.js";function g(){const[i,h]=s.useState(""),[r,t]=s.useState(""),[f,l]=s.useState(!1),[o,n]=s.useState(!1);function c(a){t(a),setTimeout(()=>t(""),6e3)}async function p(a){a.preventDefault(),t(""),l(!1),n(!0);const m=i.trim().toLowerCase(),d=typeof window<"u"?`${window.location.origin}/auth/reset`:void 0;try{await v({user_id:null,acao:"solicitou_recuperacao_senha",modulo:"login",detalhes:{email:m}});const{error:u}=await x.auth.resetPasswordForEmail(m,d?{redirectTo:d}:void 0);u?c("Não foi possível enviar o link. Tente novamente."):l(!0)}catch{c("Erro ao solicitar recuperação.")}finally{n(!1)}}return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"auth-icon",children:e.jsx("i",{className:"fa-solid fa-plane-departure"})}),e.jsx("h1",{children:"Recuperar senha"}),e.jsx("h2",{className:"auth-subtitle",children:"Enviaremos um link para redefinir sua senha."})]}),r&&e.jsx("div",{className:"alert alert-danger",style:{marginBottom:16},children:r}),f&&e.jsx("div",{className:"alert alert-success",style:{marginBottom:16},children:"Instruções enviadas para seu e-mail!"}),e.jsxs("form",{onSubmit:p,className:"auth-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsxs("label",{htmlFor:"email",children:[e.jsx("i",{className:"fa-solid fa-envelope"})," E-mail"]}),e.jsx("input",{type:"email",id:"email",className:"form-control",placeholder:"seu@email.com",required:!0,autoComplete:"email",value:i,onChange:a=>h(a.target.value)})]}),e.jsxs("div",{className:"auth-actions",children:[e.jsxs("button",{type:"submit",className:"btn btn-primary btn-block",disabled:o,children:[e.jsx("i",{className:"fa-solid fa-paper-plane"}),o?" Enviando...":" Enviar link"]}),e.jsx("div",{className:"auth-divider",children:e.jsx("span",{children:"ou"})}),e.jsxs("a",{href:"/auth/login",className:"btn btn-secondary btn-block",children:[e.jsx("i",{className:"fa-solid fa-right-to-bracket"}),"Voltar ao login"]})]})]})]})})}export{g as default};

import{j as n,s as te}from"./supabase.DNkd6bxA.js";import{r as o}from"./index.C0Fn7Wtz.js";import{u as ya}from"./usePermissao.72SYthuA.js";import{c as K,p as De,b as ja,i as Pa,s as he,d as wa,e as Aa,f as Ft,g as Oa,h as Ia,j as ne,k as ka,l as Sa,m as _a,n as Ea,o as ge,q as Da,r as Na,t as Ca,u as Ba,v as Ka,w as Ra,x as Ge,y as Gt,z as qe,A as Ta,B as Ma,C as La,D as Ue,E as Ne,F as pt,G as qt,S as za,H as ft,I as ce,J as $a,K as Ye,M as ie,Z as Ce,N as Ut,O as Yt,P as Jt,Q as Va,U as re,V as Ve,W as Pe,_ as lt,$ as Wa,a0 as ht,a1 as Ht,a2 as Fa,a3 as Ga,a4 as qa,a5 as gt,a6 as Xt,a7 as Qt,a8 as Ua,a9 as pe,aa as dt,ab as Ya,ac as Ja,ad as Je,ae as ct,af as Ha,ag as Zt,ah as Xa,ai as Qa,aj as Za,ak as er,al as tr,am as ar,an as rr,ao as nr,ap as ir,aq as St,ar as sr,as as or,at as lr,au as we,av as Ae,aw as dr,ax as ea,ay as ta,az as aa,aA as cr,aB as ur,aC as _t,aD as mr,aE as vr,aF as Et,aG as pr,aH as fr,aI as ra,aJ as hr,aK as gr,aL as xr,aM as br,aN as yr,aO as jr,R as ye,X as Te,Y as Me,T as je,L as Pr,a as wr}from"./LineChart.BvtkNKdM.js";import"./index.2_Y_w1Vs.js";var de=e=>null;de.displayName="Cell";var na=e=>e.graphicalItems.polarItems,Ar=K([De,ja],Pa),He=K([na,he,Ar],wa),Or=K([He],Aa),Xe=K([Or,Ft],Oa),Ir=K([Xe,he,He],Ia);K([Xe,he,He],(e,t,a)=>a.length>0?e.flatMap(r=>a.flatMap(i=>{var s,d=ne(r,(s=t.dataKey)!==null&&s!==void 0?s:i.dataKey);return{value:d,errorDomain:[]}})).filter(Boolean):t?.dataKey!=null?e.map(r=>({value:ne(r,t.dataKey),errorDomain:[]})):e.map(r=>({value:r,errorDomain:[]})));var Dt=()=>{},kr=K([Xe,he,He,ka,De],Sa),Sr=K([he,_a,Ea,Dt,kr,Dt,ge,De],Da),ia=K([he,ge,Xe,Ir,Na,De,Sr],Ca),_r=K([ia,he,Ba],Ka);K([he,ia,_r,De],Ra);function Nt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Ct(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Nt(Object(a),!0).forEach(function(r){Er(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Nt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Er(e,t,a){return(t=Dr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Dr(e){var t=Nr(e,"string");return typeof t=="symbol"?t:t+""}function Nr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cr=(e,t)=>t,xt=K([na,Cr],(e,t)=>e.filter(a=>a.type==="pie").find(a=>a.id===t)),Br=[],bt=(e,t,a)=>a?.length===0?Br:a,sa=K([Ft,xt,bt],(e,t,a)=>{var{chartData:r}=e;if(t!=null){var i;if(t?.data!=null&&t.data.length>0?i=t.data:i=r,(!i||!i.length)&&a!=null&&(i=a.map(s=>Ct(Ct({},t.presentationProps),s.props))),i!=null)return i}}),Kr=K([sa,xt,bt],(e,t,a)=>{if(!(e==null||t==null))return e.map((r,i)=>{var s,d=ne(r,t.nameKey,t.name),v;return a!=null&&(s=a[i])!==null&&s!==void 0&&(s=s.props)!==null&&s!==void 0&&s.fill?v=a[i].props.fill:typeof r=="object"&&r!=null&&"fill"in r?v=r.fill:v=t.fill,{value:Ge(d,t.dataKey),color:v,payload:r,type:t.legendType}})}),Rr=K([sa,xt,bt,Gt],(e,t,a,r)=>{if(!(t==null||e==null))return rn({offset:r,pieSettings:t,displayedData:e,cells:a})}),yt=(e,t,a)=>{var r=qe();return(i,s)=>d=>{e?.(i,s,d),r(Ta({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},jt=e=>{var t=qe();return(a,r)=>i=>{e?.(a,r,i),t(Ma())}},Pt=(e,t,a)=>{var r=qe();return(i,s)=>d=>{e?.(i,s,d),r(La({activeIndex:String(s),activeDataKey:t,activeCoordinate:i.tooltipPosition,activeGraphicalItemId:a}))}},Tr=["key"],Mr=["onMouseEnter","onClick","onMouseLeave"],Lr=["id"],zr=["id"];function Bt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function T(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Bt(Object(a),!0).forEach(function(r){$r(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Bt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function $r(e,t,a){return(t=Vr(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Vr(e){var t=Wr(e,"string");return typeof t=="symbol"?t:t+""}function Wr(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fe(){return fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},fe.apply(null,arguments)}function Qe(e,t){if(e==null)return{};var a,r,i=Fr(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function Fr(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function Gr(e){var t=o.useMemo(()=>ft(e.children,de),[e.children]),a=ce(r=>Kr(r,e.id,t));return a==null?null:o.createElement($a,{legendPayload:a})}var qr=o.memo(e=>{var{dataKey:t,nameKey:a,sectors:r,stroke:i,strokeWidth:s,fill:d,name:v,hide:b,tooltipType:u}=e,h={dataDefinedOnItem:r.map(g=>g.tooltipPayload),positions:r.map(g=>g.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:d,dataKey:t,nameKey:a,name:Ge(v,t),hide:b,type:u,color:d,unit:""}};return o.createElement(Ut,{tooltipEntrySettings:h})}),Ur=(e,t)=>e>t?"start":e<t?"end":"middle",Yr=(e,t,a)=>typeof t=="function"?pe(t(e),a,a*.8):pe(t,a,a*.8),Jr=(e,t,a)=>{var{top:r,left:i,width:s,height:d}=t,v=Ua(s,d),b=i+pe(e.cx,s,s/2),u=r+pe(e.cy,d,d/2),h=pe(e.innerRadius,v,0),g=Yr(a,e.outerRadius,v),x=e.maxRadius||Math.sqrt(s*s+d*d)/2;return{cx:b,cy:u,innerRadius:h,outerRadius:g,maxRadius:x}},Hr=(e,t)=>{var a=Pe(t-e),r=Math.min(Math.abs(t-e),360);return a*r};function Xr(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Qr=(e,t)=>{if(o.isValidElement(e))return o.cloneElement(e,t);if(typeof e=="function")return e(t);var a=Ye("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:r}=t,i=Qe(t,Tr);return o.createElement(Ya,fe({},i,{type:"linear",className:a}))},Zr=(e,t,a)=>{if(o.isValidElement(e))return o.cloneElement(e,t);var r=a;if(typeof e=="function"&&(r=e(t),o.isValidElement(r)))return r;var i=Ye("recharts-pie-label-text",Xr(e));return o.createElement(Ja,fe({},t,{alignmentBaseline:"middle",className:i}),r)};function en(e){var{sectors:t,props:a,showLabels:r}=e,{label:i,labelLine:s,dataKey:d}=a;if(!r||!i||!t)return null;var v=pt(a),b=dt(i),u=dt(s),h=typeof i=="object"&&"offsetRadius"in i&&typeof i.offsetRadius=="number"&&i.offsetRadius||20,g=t.map((x,j)=>{var A=(x.startAngle+x.endAngle)/2,P=lt(x.cx,x.cy,x.outerRadius+h,A),S=T(T(T(T({},v),x),{},{stroke:"none"},b),{},{index:j,textAnchor:Ur(P.x,x.cx)},P),p=T(T(T(T({},v),x),{},{fill:"none",stroke:x.fill},u),{},{index:j,points:[lt(x.cx,x.cy,x.outerRadius,A),P],key:"line"});return o.createElement(Ce,{zIndex:Ne.label,key:"label-".concat(x.startAngle,"-").concat(x.endAngle,"-").concat(x.midAngle,"-").concat(j)},o.createElement(ie,null,s&&Qr(s,p),Zr(i,S,ne(x,d))))});return o.createElement(ie,{className:"recharts-pie-labels"},g)}function tn(e){var{sectors:t,props:a,showLabels:r}=e,{label:i}=a;return typeof i=="object"&&i!=null&&"position"in i?o.createElement(Qt,{label:i}):o.createElement(en,{sectors:t,props:a,showLabels:r})}function an(e){var{sectors:t,activeShape:a,inactiveShape:r,allOtherPieProps:i,shape:s,id:d}=e,v=ce(ht),b=ce(Ht),u=ce(Fa),{onMouseEnter:h,onClick:g,onMouseLeave:x}=i,j=Qe(i,Mr),A=yt(h,i.dataKey,d),P=jt(x),S=Pt(g,i.dataKey,d);return t==null||t.length===0?null:o.createElement(o.Fragment,null,t.map((p,y)=>{if(p?.startAngle===0&&p?.endAngle===0&&t.length!==1)return null;var N=u==null||u===d,O=String(y)===v&&(b==null||i.dataKey===b)&&N,C=v?r:null,w=a&&O?a:C,I=T(T({},p),{},{stroke:p.stroke,tabIndex:-1,[qa]:y,[Ga]:i.dataKey});return o.createElement(ie,fe({key:"sector-".concat(p?.startAngle,"-").concat(p?.endAngle,"-").concat(p.midAngle,"-").concat(y),tabIndex:-1,className:"recharts-pie-sector"},gt(j,p,y),{onMouseEnter:A(p,y),onMouseLeave:P(p,y),onClick:S(p,y)}),o.createElement(Xt,fe({option:s??w,index:y,shapeType:"sector",isActive:O},I)))}))}function rn(e){var t,{pieSettings:a,displayedData:r,cells:i,offset:s}=e,{cornerRadius:d,startAngle:v,endAngle:b,dataKey:u,nameKey:h,tooltipType:g}=a,x=Math.abs(a.minAngle),j=Hr(v,b),A=Math.abs(j),P=r.length<=1?0:(t=a.paddingAngle)!==null&&t!==void 0?t:0,S=r.filter(w=>ne(w,u,0)!==0).length,p=(A>=360?S:S-1)*P,y=A-S*x-p,N=r.reduce((w,I)=>{var D=ne(I,u,0);return w+(Ve(D)?D:0)},0),O;if(N>0){var C;O=r.map((w,I)=>{var D=ne(w,u,0),_=ne(w,h,I),E=Jr(a,s,w),ae=(Ve(D)?D:0)/N,M,z=T(T({},w),i&&i[I]&&i[I].props);I?M=C.endAngle+Pe(j)*P*(D!==0?1:0):M=v;var H=M+Pe(j)*((D!==0?x:0)+ae*y),$=(M+H)/2,U=(E.innerRadius+E.outerRadius)/2,G=[{name:_,value:D,payload:z,dataKey:u,type:g}],se=lt(E.cx,E.cy,U,$);return C=T(T(T(T({},a.presentationProps),{},{percent:ae,cornerRadius:typeof d=="string"?parseFloat(d):d,name:_,tooltipPayload:G,midAngle:$,middleRadius:U,tooltipPosition:se},z),E),{},{value:D,dataKey:u,startAngle:M,endAngle:H,payload:z,paddingAngle:Pe(j)*P}),C})}return O}function nn(e){var{showLabels:t,sectors:a,children:r}=e,i=o.useMemo(()=>!t||!a?[]:a.map(s=>({value:s.value,payload:s.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:s.cx,cy:s.cy,innerRadius:s.innerRadius,outerRadius:s.outerRadius,startAngle:s.startAngle,endAngle:s.endAngle,clockWise:!1},fill:s.fill})),[a,t]);return o.createElement(Wa,{value:t?i:void 0},r)}function sn(e){var{props:t,previousSectorsRef:a,id:r}=e,{sectors:i,isAnimationActive:s,animationBegin:d,animationDuration:v,animationEasing:b,activeShape:u,inactiveShape:h,onAnimationStart:g,onAnimationEnd:x}=t,j=Yt(t,"recharts-pie-"),A=a.current,[P,S]=o.useState(!1),p=o.useCallback(()=>{typeof x=="function"&&x(),S(!1)},[x]),y=o.useCallback(()=>{typeof g=="function"&&g(),S(!0)},[g]);return o.createElement(nn,{showLabels:!P,sectors:i},o.createElement(Jt,{animationId:j,begin:d,duration:v,isActive:s,easing:b,onAnimationStart:y,onAnimationEnd:p,key:j},N=>{var O=[],C=i&&i[0],w=C?.startAngle;return i?.forEach((I,D)=>{var _=A&&A[D],E=D>0?Va(I,"paddingAngle",0):0;if(_){var ae=re(_.endAngle-_.startAngle,I.endAngle-I.startAngle,N),M=T(T({},I),{},{startAngle:w+E,endAngle:w+ae+E});O.push(M),w=M.endAngle}else{var{endAngle:z,startAngle:H}=I,$=re(0,z-H,N),U=T(T({},I),{},{startAngle:w+E,endAngle:w+$+E});O.push(U),w=U.endAngle}}),a.current=O,o.createElement(ie,null,o.createElement(an,{sectors:O,activeShape:u,inactiveShape:h,allOtherPieProps:t,shape:t.shape,id:r}))}),o.createElement(tn,{showLabels:!P,sectors:i,props:t}),t.children)}var on={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Ne.area};function ln(e){var{id:t}=e,a=Qe(e,Lr),{hide:r,className:i,rootTabIndex:s}=e,d=o.useMemo(()=>ft(e.children,de),[e.children]),v=ce(h=>Rr(h,t,d)),b=o.useRef(null),u=Ye("recharts-pie",i);return r||v==null?(b.current=null,o.createElement(ie,{tabIndex:s,className:u})):o.createElement(Ce,{zIndex:e.zIndex},o.createElement(qr,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:v,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType}),o.createElement(ie,{tabIndex:s,className:u},o.createElement(sn,{props:T(T({},a),{},{sectors:v}),previousSectorsRef:b,id:t})))}function ut(e){var t=Ue(e,on),{id:a}=t,r=Qe(t,zr),i=pt(r);return o.createElement(qt,{id:a,type:"pie"},s=>o.createElement(o.Fragment,null,o.createElement(za,{type:"pie",id:s,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:i,maxRadius:t.maxRadius}),o.createElement(Gr,fe({},r,{id:s})),o.createElement(ln,fe({},r,{id:s}))))}ut.displayName="Pie";var dn="Invariant failed";function cn(e,t){throw new Error(dn)}var un=["x","y"];function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},mt.apply(null,arguments)}function Kt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function _e(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Kt(Object(a),!0).forEach(function(r){mn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function mn(e,t,a){return(t=vn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function vn(e){var t=pn(e,"string");return typeof t=="symbol"?t:t+""}function pn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fn(e,t){if(e==null)return{};var a,r,i=hn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function hn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function gn(e,t){var{x:a,y:r}=e,i=fn(e,un),s="".concat(a),d=parseInt(s,10),v="".concat(r),b=parseInt(v,10),u="".concat(t.height||i.height),h=parseInt(u,10),g="".concat(t.width||i.width),x=parseInt(g,10);return _e(_e(_e(_e(_e({},t),i),d?{x:d}:{}),b?{y:b}:{}),{},{height:h,width:x,name:t.name,radius:t.radius})}function We(e){return o.createElement(Xt,mt({shapeType:"rectangle",propTransformer:gn,activeClassName:"recharts-active-bar"},e))}var xn=function(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(r,i)=>{if(Ve(t))return t;var s=Ve(r)||Je(r);return s?t(r,i):(s||cn(),a)}};function bn(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ct(e.zIndex)?e.zIndex:t}var yn=["onMouseEnter","onMouseLeave","onClick"],jn=["value","background","tooltipPosition"],Pn=["id"],wn=["onMouseEnter","onClick","onMouseLeave"];function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ue.apply(null,arguments)}function Rt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Rt(Object(a),!0).forEach(function(r){An(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Rt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function An(e,t,a){return(t=On(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function On(e){var t=In(e,"string");return typeof t=="symbol"?t:t+""}function In(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fe(e,t){if(e==null)return{};var a,r,i=kn(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function kn(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var Sn=e=>{var{dataKey:t,name:a,fill:r,legendType:i,hide:s}=e;return[{inactive:s,dataKey:t,type:i,color:r,value:Ge(a,t),payload:e}]},_n=o.memo(e=>{var{dataKey:t,stroke:a,strokeWidth:r,fill:i,name:s,hide:d,unit:v,tooltipType:b}=e,u={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:a,strokeWidth:r,fill:i,dataKey:t,nameKey:void 0,name:Ge(s,t),hide:d,type:b,color:i,unit:v}};return o.createElement(Ut,{tooltipEntrySettings:u})});function En(e){var t=ce(ht),{data:a,dataKey:r,background:i,allOtherBarProps:s}=e,{onMouseEnter:d,onMouseLeave:v,onClick:b}=s,u=Fe(s,yn),h=yt(d,r),g=jt(v),x=Pt(b,r);if(!i||a==null)return null;var j=dt(i);return o.createElement(Ce,{zIndex:bn(i,Ne.barBackground)},a.map((A,P)=>{var{value:S,background:p,tooltipPosition:y}=A,N=Fe(A,jn);if(!p)return null;var O=h(A,P),C=g(A,P),w=x(A,P),I=q(q(q(q(q({option:i,isActive:String(P)===t},N),{},{fill:"#eee"},p),j),gt(u,A,P)),{},{onMouseEnter:O,onMouseLeave:C,onClick:w,dataKey:r,index:P,className:"recharts-bar-background-rectangle"});return o.createElement(We,ue({key:"background-bar-".concat(P)},I))}))}function Dn(e){var{showLabels:t,children:a,rects:r}=e,i=r?.map(s=>{var d={x:s.x,y:s.y,width:s.width,lowerWidth:s.width,upperWidth:s.width,height:s.height};return q(q({},d),{},{value:s.value,payload:s.payload,parentViewBox:s.parentViewBox,viewBox:d,fill:s.fill})});return o.createElement(sr,{value:t?i:void 0},a)}function Nn(e){var{shape:t,activeBar:a,baseProps:r,entry:i,index:s,dataKey:d}=e,v=ce(ht),b=ce(Ht),u=a&&String(s)===v&&(b==null||d===b),h=u?a:t;return u?o.createElement(Ce,{zIndex:Ne.activeBar},o.createElement(We,ue({},r,{name:String(r.name)},i,{isActive:u,option:h,index:s,dataKey:d}))):o.createElement(We,ue({},r,{name:String(r.name)},i,{isActive:u,option:h,index:s,dataKey:d}))}function Cn(e){var{shape:t,baseProps:a,entry:r,index:i,dataKey:s}=e;return o.createElement(We,ue({},a,{name:String(a.name)},r,{isActive:!1,option:t,index:i,dataKey:s}))}function Bn(e){var t,{data:a,props:r}=e,i=(t=pt(r))!==null&&t!==void 0?t:{},{id:s}=i,d=Fe(i,Pn),{shape:v,dataKey:b,activeBar:u}=r,{onMouseEnter:h,onClick:g,onMouseLeave:x}=r,j=Fe(r,wn),A=yt(h,b),P=jt(x),S=Pt(g,b);return a?o.createElement(o.Fragment,null,a.map((p,y)=>o.createElement(ie,ue({key:"rectangle-".concat(p?.x,"-").concat(p?.y,"-").concat(p?.value,"-").concat(y),className:"recharts-bar-rectangle"},gt(j,p,y),{onMouseEnter:A(p,y),onMouseLeave:P(p,y),onClick:S(p,y)}),u?o.createElement(Nn,{shape:v,activeBar:u,baseProps:d,entry:p,index:y,dataKey:b}):o.createElement(Cn,{shape:v,baseProps:d,entry:p,index:y,dataKey:b})))):null}function Kn(e){var{props:t,previousRectanglesRef:a}=e,{data:r,layout:i,isAnimationActive:s,animationBegin:d,animationDuration:v,animationEasing:b,onAnimationEnd:u,onAnimationStart:h}=t,g=a.current,x=Yt(t,"recharts-bar-"),[j,A]=o.useState(!1),P=!j,S=o.useCallback(()=>{typeof u=="function"&&u(),A(!1)},[u]),p=o.useCallback(()=>{typeof h=="function"&&h(),A(!0)},[h]);return o.createElement(Dn,{showLabels:P,rects:r},o.createElement(Jt,{animationId:x,begin:d,duration:v,isActive:s,easing:b,onAnimationEnd:S,onAnimationStart:p,key:x},y=>{var N=y===1?r:r?.map((O,C)=>{var w=g&&g[C];if(w)return q(q({},O),{},{x:re(w.x,O.x,y),y:re(w.y,O.y,y),width:re(w.width,O.width,y),height:re(w.height,O.height,y)});if(i==="horizontal"){var I=re(0,O.height,y),D=re(O.stackedBarStart,O.y,y);return q(q({},O),{},{y:D,height:I})}var _=re(0,O.width,y),E=re(O.stackedBarStart,O.x,y);return q(q({},O),{},{width:_,x:E})});return y>0&&(a.current=N??null),N==null?null:o.createElement(ie,null,o.createElement(Bn,{props:t,data:N}))}),o.createElement(Qt,{label:t.label}),t.children)}function Rn(e){var t=o.useRef(null);return o.createElement(Kn,{previousRectanglesRef:t,props:e})}var oa=0,Tn=(e,t)=>{var a=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:a,errorVal:ne(e,t)}};class Mn extends o.PureComponent{render(){var{hide:t,data:a,dataKey:r,className:i,xAxisId:s,yAxisId:d,needClip:v,background:b,id:u}=this.props;if(t||a==null)return null;var h=Ye("recharts-bar",i),g=u;return o.createElement(ie,{className:h,id:u},v&&o.createElement("defs",null,o.createElement(rr,{clipPathId:g,xAxisId:s,yAxisId:d})),o.createElement(ie,{className:"recharts-bar-rectangles",clipPath:v?"url(#clipPath-".concat(g,")"):void 0},o.createElement(En,{data:a,dataKey:r,background:b,allOtherBarProps:this.props}),o.createElement(Rn,this.props)))}}var Ln={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:oa,xAxisId:0,yAxisId:0,zIndex:Ne.bar};function zn(e){var{xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:s,activeBar:d,animationBegin:v,animationDuration:b,animationEasing:u,isAnimationActive:h}=e,{needClip:g}=er(t,a),x=tr(),j=Zt(),A=ft(e.children,de),P=ce(y=>pi(y,t,a,j,e.id,A));if(x!=="vertical"&&x!=="horizontal")return null;var S,p=P?.[0];return p==null||p.height==null||p.width==null?S=0:S=x==="vertical"?p.height/2:p.width/2,o.createElement(ar,{xAxisId:t,yAxisId:a,data:P,dataPointFormatter:Tn,errorBarOffset:S},o.createElement(Mn,ue({},e,{layout:x,needClip:g,data:P,xAxisId:t,yAxisId:a,hide:r,legendType:i,minPointSize:s,activeBar:d,animationBegin:v,animationDuration:b,animationEasing:u,isAnimationActive:h})))}function $n(e){var{layout:t,barSettings:{dataKey:a,minPointSize:r},pos:i,bandSize:s,xAxis:d,yAxis:v,xAxisTicks:b,yAxisTicks:u,stackedData:h,displayedData:g,offset:x,cells:j,parentViewBox:A,dataStartIndex:P}=e,S=t==="horizontal"?v:d,p=h?S.scale.domain():null,y=nr({numericAxis:S}),N=S.scale(y);return g.map((O,C)=>{var w,I,D,_,E,ae;h?w=ir(h[C+P],p):(w=ne(O,a),Array.isArray(w)||(w=[y,w]));var M=xn(r,oa)(w[1],C);if(t==="horizontal"){var z,[H,$]=[v.scale(w[0]),v.scale(w[1])];I=St({axis:d,ticks:b,bandSize:s,offset:i.offset,entry:O,index:C}),D=(z=$??H)!==null&&z!==void 0?z:void 0,_=i.size;var U=H-$;if(E=or(U)?0:U,ae={x:I,y:x.top,width:_,height:x.height},Math.abs(M)>0&&Math.abs(E)<Math.abs(M)){var G=Pe(E||M)*(Math.abs(M)-Math.abs(E));D-=G,E+=G}}else{var[se,Ze]=[d.scale(w[0]),d.scale(w[1])];if(I=se,D=St({axis:v,ticks:u,bandSize:s,offset:i.offset,entry:O,index:C}),_=Ze-se,E=i.size,ae={x:x.left,y:D,width:x.width,height:E},Math.abs(M)>0&&Math.abs(_)<Math.abs(M)){var et=Pe(_||M)*(Math.abs(M)-Math.abs(_));_+=et}}if(I==null||D==null||_==null||E==null)return null;var Ke=q(q({},O),{},{stackedBarStart:N,x:I,y:D,width:_,height:E,value:h?w:w[1],payload:O,background:ae,tooltipPosition:{x:I+_/2,y:D+E/2},parentViewBox:A},j&&j[C]&&j[C].props);return Ke}).filter(Boolean)}function Vn(e){var t=Ue(e,Ln),a=Zt();return o.createElement(qt,{id:t.id,type:"bar"},r=>o.createElement(o.Fragment,null,o.createElement(Xa,{legendPayload:Sn(t)}),o.createElement(_n,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType}),o.createElement(Qa,{type:"bar",id:r,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:Za(t.stackId),hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),o.createElement(Ce,{zIndex:t.zIndex},o.createElement(zn,ue({},t,{id:r})))))}var $e=o.memo(Vn,Ha);$e.displayName="Bar";function Tt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function Le(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Tt(Object(a),!0).forEach(function(r){Wn(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Tt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Wn(e,t,a){return(t=Fn(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Fn(e){var t=Gn(e,"string");return typeof t=="symbol"?t:t+""}function Gn(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qn=(e,t)=>t,Un=(e,t,a)=>a,Yn=(e,t,a,r)=>r,Jn=(e,t,a,r,i)=>i,Be=K([ta,Jn],(e,t)=>e.filter(a=>a.type==="bar").find(a=>a.id===t)),Hn=K([Be],e=>e?.maxBarSize),Xn=(e,t,a,r,i,s)=>s,Mt=(e,t,a)=>{var r=a??e;if(!Je(r))return pe(r,t,0)},Qn=K([ge,ta,qn,Un,Yn],(e,t,a,r,i)=>t.filter(s=>e==="horizontal"?s.xAxisId===a:s.yAxisId===r).filter(s=>s.isPanorama===i).filter(s=>s.hide===!1).filter(s=>s.type==="bar")),Zn=(e,t,a,r)=>{var i=ge(e);return i==="horizontal"?_t(e,"yAxis",a,r):_t(e,"xAxis",t,r)},ei=(e,t,a)=>{var r=ge(e);return r==="horizontal"?Et(e,"xAxis",t):Et(e,"yAxis",a)},ti=(e,t,a)=>{var r={},i=e.filter(pr),s=e.filter(u=>u.stackId==null),d=i.reduce((u,h)=>(u[h.stackId]||(u[h.stackId]=[]),u[h.stackId].push(h),u),r),v=Object.entries(d).map(u=>{var[h,g]=u,x=g.map(A=>A.dataKey),j=Mt(t,a,g[0].barSize);return{stackId:h,dataKeys:x,barSize:j}}),b=s.map(u=>{var h=[u.dataKey].filter(x=>x!=null),g=Mt(t,a,u.barSize);return{stackId:void 0,dataKeys:h,barSize:g}});return[...v,...b]},ai=K([Qn,vr,ei],ti),ri=(e,t,a,r,i)=>{var s,d,v=Be(e,t,a,r,i);if(v!=null){var b=ge(e),u=aa(e),{maxBarSize:h}=v,g=Je(h)?u:h,x,j;return b==="horizontal"?(x=we(e,"xAxis",t,r),j=Ae(e,"xAxis",t,r)):(x=we(e,"yAxis",a,r),j=Ae(e,"yAxis",a,r)),(s=(d=ea(x,j,!0))!==null&&d!==void 0?d:g)!==null&&s!==void 0?s:0}},la=(e,t,a,r)=>{var i=ge(e),s,d;return i==="horizontal"?(s=we(e,"xAxis",t,r),d=Ae(e,"xAxis",t,r)):(s=we(e,"yAxis",a,r),d=Ae(e,"yAxis",a,r)),ea(s,d)};function ni(e,t,a,r,i){var s=r.length;if(!(s<1)){var d=pe(e,a,0,!0),v,b=[];if(ct(r[0].barSize)){var u=!1,h=a/s,g=r.reduce((p,y)=>p+(y.barSize||0),0);g+=(s-1)*d,g>=a&&(g-=(s-1)*d,d=0),g>=a&&h>0&&(u=!0,h*=.9,g=s*h);var x=(a-g)/2>>0,j={offset:x-d,size:0};v=r.reduce((p,y)=>{var N,O={stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:j.offset+j.size+d,size:u?h:(N=y.barSize)!==null&&N!==void 0?N:0}},C=[...p,O];return j=C[C.length-1].position,C},b)}else{var A=pe(t,a,0,!0);a-2*A-(s-1)*d<=0&&(d=0);var P=(a-2*A-(s-1)*d)/s;P>1&&(P>>=0);var S=ct(i)?Math.min(P,i):P;v=r.reduce((p,y,N)=>[...p,{stackId:y.stackId,dataKeys:y.dataKeys,position:{offset:A+(P+d)*N+(P-S)/2,size:S}}],b)}return v}}var ii=(e,t,a,r,i,s,d)=>{var v=Je(d)?t:d,b=ni(a,r,i!==s?i:s,e,v);return i!==s&&b!=null&&(b=b.map(u=>Le(Le({},u),{},{position:Le(Le({},u.position),{},{offset:u.position.offset-i/2})}))),b},si=K([ai,aa,cr,ur,ri,la,Hn],ii),oi=(e,t,a,r)=>we(e,"xAxis",t,r),li=(e,t,a,r)=>we(e,"yAxis",a,r),di=(e,t,a,r)=>Ae(e,"xAxis",t,r),ci=(e,t,a,r)=>Ae(e,"yAxis",a,r),ui=K([si,Be],(e,t)=>{if(!(e==null||t==null)){var a=e.find(r=>r.stackId===t.stackId&&t.dataKey!=null&&r.dataKeys.includes(t.dataKey));if(a!=null)return a.position}}),mi=(e,t)=>{var a=mr(t);if(!(!e||a==null||t==null)){var{stackId:r}=t;if(r!=null){var i=e[r];if(i){var{stackedData:s}=i;if(s)return s.find(d=>d.key===a)}}}},vi=K([Zn,Be],mi),pi=K([Gt,lr,oi,li,di,ci,ui,ge,dr,la,vi,Be,Xn],(e,t,a,r,i,s,d,v,b,u,h,g,x)=>{var{chartData:j,dataStartIndex:A,dataEndIndex:P}=b;if(!(g==null||d==null||t==null||v!=="horizontal"&&v!=="vertical"||a==null||r==null||i==null||s==null||u==null)){var{data:S}=g,p;if(S!=null&&S.length>0?p=S:p=j?.slice(A,P+1),p!=null)return $n({layout:v,barSettings:g,pos:d,parentViewBox:t,bandSize:u,xAxis:a,yAxis:r,xAxisTicks:i,yAxisTicks:s,stackedData:h,displayedData:p,offset:e,cells:x,dataStartIndex:A})}}),fi=["axis","item"],ot=o.forwardRef((e,t)=>o.createElement(fr,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:fi,tooltipPayloadSearcher:ra,categoricalChartProps:e,ref:t}));function hi(e){var t=qe();return o.useEffect(()=>{t(hr(e))},[t,e]),null}var gi=["layout"];function vt(){return vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},vt.apply(null,arguments)}function xi(e,t){if(e==null)return{};var a,r,i=bi(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)a=s[r],t.indexOf(a)===-1&&{}.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}function bi(e,t){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;a[r]=e[r]}return a}var yi={top:5,right:5,bottom:5,left:5},da={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:yi,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},ji=o.forwardRef(function(t,a){var r,i=Ue(t.categoricalChartProps,da),{layout:s}=i,d=xi(i,gi),{chartName:v,defaultTooltipEventType:b,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=t,g={chartName:v,defaultTooltipEventType:b,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return o.createElement(gr,{preloadedState:{options:g},reduxStoreName:(r=i.id)!==null&&r!==void 0?r:v},o.createElement(xr,{chartData:i.data}),o.createElement(br,{layout:s,margin:i.margin}),o.createElement(yr,{baseValue:void 0,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),o.createElement(hi,{cx:i.cx,cy:i.cy,startAngle:i.startAngle,endAngle:i.endAngle,innerRadius:i.innerRadius,outerRadius:i.outerRadius}),o.createElement(jr,vt({},d,{ref:a})))});function Lt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),a.push.apply(a,r)}return a}function zt(e){for(var t=1;t<arguments.length;t++){var a=arguments[t]!=null?arguments[t]:{};t%2?Lt(Object(a),!0).forEach(function(r){Pi(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Lt(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function Pi(e,t,a){return(t=wi(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function wi(e){var t=Ai(e,"string");return typeof t=="symbol"?t:t+""}function Ai(e,t){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var r=a.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oi=["item"],Ii=zt(zt({},da),{},{layout:"centric",startAngle:0,endAngle:360}),$t=o.forwardRef((e,t)=>{var a=Ue(e,Ii);return o.createElement(ji,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Oi,tooltipPayloadSearcher:ra,categoricalChartProps:a,ref:t})});const Ee=[{id:"kpis",titulo:"KPIs principais"},{id:"vendas_destino",titulo:"Vendas por destino"},{id:"vendas_produto",titulo:"Vendas por produto"},{id:"timeline",titulo:"Evolução das vendas"},{id:"orcamentos",titulo:"Orçamentos recentes"},{id:"aniversariantes",titulo:"Aniversariantes"}],ze=[{id:"kpi_vendas_total",titulo:"Vendas no período"},{id:"kpi_qtd_vendas",titulo:"Qtd. vendas"},{id:"kpi_ticket_medio",titulo:"Ticket médio"},{id:"kpi_diferenciado",titulo:"Comissão Diferenciada"},{id:"kpi_orcamentos",titulo:"Orçamentos"},{id:"kpi_conversao",titulo:"Conv. Orç → Vendas"},{id:"kpi_meta",titulo:"Meta somada (R$)"},{id:"kpi_atingimento",titulo:"Atingimento da meta"}];function J(e){return e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})}function Vt(){const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),r=i=>i.toISOString().substring(0,10);return{inicio:r(t),fim:r(a)}}function ki(e){const t=new Date,a=new Date;a.setDate(t.getDate()-(e-1));const r=i=>i.toISOString().substring(0,10);return{inicio:r(a),fim:r(t)}}function Wt(e){if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return null;const a=new Date;let r=a.getFullYear()-t.getFullYear();const i=a.getMonth()-t.getMonth();return(i<0||i===0&&a.getDate()<t.getDate())&&r--,r}const X=["#7c3aed","#a855f7","#6366f1","#ec4899","#22c55e"],Ci=()=>{const[e,t]=o.useState(null),[a,r]=o.useState(!0),i=ya("Dashboard"),[s,d]=o.useState("mes_atual"),[v,b]=o.useState(""),[u,h]=o.useState(""),[g,x]=o.useState([]),[j,A]=o.useState([]),[P,S]=o.useState([]),[p,y]=o.useState([]),[N,O]=o.useState(!0),[C,w]=o.useState(null),[I,D]=o.useState(Ee.map(c=>c.id)),[_,E]=o.useState(()=>Ee.reduce((c,f)=>({...c,[f.id]:!0}),{})),[ae,M]=o.useState(!1),[z,H]=o.useState(ze.map(c=>c.id)),[$,U]=o.useState(()=>ze.reduce((c,f)=>({...c,[f.id]:!0}),{})),[G,se]=o.useState({vendas_destino:"pie",vendas_produto:"bar",timeline:"line"}),Ze=c=>{const f={..._,[c]:!_[c]};E(f),Ie(I,f,{order:z,visible:$})},et=c=>{const f={...$,[c]:!$[c]};U(f),Ie(I,_,{order:z,visible:f})},Ke=(c,f)=>{const l=I.indexOf(c);if(l===-1)return;const m=[...I],k=f==="up"?l-1:l+1;k<0||k>=m.length||([m[l],m[k]]=[m[k],m[l]],D(m),Ie(m,_,{order:z,visible:$},G))},wt=(c,f)=>{const l=z.indexOf(c);if(l===-1)return;const m=[...z],k=f==="up"?l-1:l+1;k<0||k>=m.length||([m[l],m[k]]=[m[k],m[l]],H(m),Ie(I,_,{order:m,visible:$},G))},tt=(c,f)=>{const l={...G,[c]:f};se(l),Ie(I,_,{order:z,visible:$},l)},Oe=c=>_[c]!==!1;function ca(c,f,l){typeof window<"u"&&(window.localStorage.setItem("dashboard_kpis",JSON.stringify({order:c,visible:f})),l&&window.localStorage.setItem("dashboard_charts",JSON.stringify(l)))}async function Ie(c,f,l,m){try{if(e?.usuarioId){const k=c.map((B,L)=>({usuario_id:e.usuarioId,widget:B,ordem:L,visivel:f[B]!==!1,settings:B==="kpis"&&l?{kpis:{order:l.order,visible:l.visible},charts:m||null}:B==="vendas_destino"||B==="vendas_produto"||B==="timeline"?{charts:m||null}:null}));await te.from("dashboard_widgets").delete().eq("usuario_id",e.usuarioId);try{await te.from("dashboard_widgets").insert(k)}catch{const L=k.map(Z=>{const W={...Z};return delete W.settings,W});await te.from("dashboard_widgets").insert(L)}}}catch(k){console.warn("Não foi possível salvar preferências no Supabase, mantendo localStorage.",k)}finally{typeof window<"u"&&(window.localStorage.setItem("dashboard_widgets",JSON.stringify({order:c,visible:f})),l&&ca(l.order,l.visible,m),m&&window.localStorage.setItem("dashboard_charts",JSON.stringify(m)))}}const[Q,At]=o.useState(null),[xe,Ot]=o.useState(null);o.useEffect(()=>{const{inicio:c,fim:f}=Vt();b(c),h(f),d("mes_atual")},[]);function It(c){if(d(c),c==="mes_atual"){const{inicio:f,fim:l}=Vt();b(f),h(l)}else if(c==="ultimos_30"){const{inicio:f,fim:l}=ki(30);b(f),h(l)}}o.useEffect(()=>{async function c(){try{r(!0),w(null);const{data:f,error:l}=await te.auth.getUser();if(l||!f?.user){w("Usuário não autenticado.");return}const m=f.user.id,{data:k,error:B}=await te.from("users").select("id, nome_completo, user_types(name)").eq("id",m).maybeSingle();B&&console.error(B);const L=k?.user_types?.name||f.user.user_metadata?.name||"",Z=String(L||"").toUpperCase();let W="VENDEDOR";Z.includes("ADMIN")?W="ADMIN":Z.includes("GESTOR")?W="GESTOR":Z.includes("VENDEDOR")?W="VENDEDOR":W="OUTRO";let oe=[m];if(W==="GESTOR"){const{data:me,error:ee}=await te.from("gestor_vendedor").select("vendedor_id").eq("gestor_id",m);if(!ee&&me){const le=me.map(Y=>Y.vendedor_id).filter(Y=>!!Y);oe=Array.from(new Set([m,...le]))}}else W==="ADMIN"&&(oe=[]);t({usuarioId:m,nome:k?.nome_completo||null,papel:W,vendedorIds:oe})}catch(f){console.error(f),w("Erro ao carregar contexto do usuário.")}finally{r(!1)}}c()},[]),o.useEffect(()=>{if(!e||!v||!u)return;async function c(){try{O(!0),w(null);let f=te.from("vendas").select(`
          id,
          data_lancamento,
          data_embarque,
          cancelada,
          vendedor_id,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome),
          vendas_recibos (
            id,
            valor_total,
            valor_taxas,
            produtos:tipo_produtos!produto_id (id, nome, regra_comissionamento)
          )
        `).gte("data_lancamento",v).lte("data_lancamento",u).eq("cancelada",!1);e.vendedorIds.length>0&&(f=f.in("vendedor_id",e.vendedorIds));const{data:l,error:m}=await f;if(m)throw m;const{data:k,error:B}=await te.from("orcamentos").select(`
          id,
          data_orcamento,
          data_viagem,
          status,
          valor,
          notas,
          clientes:clientes (id, nome),
          destinos:produtos!destino_id (id, nome)
        `).gte("data_orcamento",v).lte("data_orcamento",u).order("data_orcamento",{ascending:!1});if(B)throw B;let L=te.from("metas_vendedor").select("id, vendedor_id, periodo, meta_geral, meta_diferenciada, ativo").gte("periodo",v).lte("periodo",u).eq("ativo",!0);e.vendedorIds.length>0&&(L=L.in("vendedor_id",e.vendedorIds));const{data:Z,error:W}=await L;if(W)throw W;const{data:oe,error:me}=await te.from("clientes").select("id, nome, nascimento, telefone");if(me)throw me;x(l||[]),A(k||[]),S(Z||[]),y(oe||[]);try{const{data:ee,error:le}=await te.from("dashboard_widgets").select("widget, ordem, visivel, settings").eq("usuario_id",e.usuarioId).order("ordem",{ascending:!0});if(!le&&ee&&ee.length>0){const Y=ee.map(F=>F.widget).filter(F=>Ee.some(Se=>Se.id===F)),ve={..._};let R={},V=null;ee.forEach(F=>{const Se=F.widget;Ee.some(st=>st.id===Se)&&(ve[Se]=F.visivel!==!1),Se==="kpis"&&F.settings?.kpis&&(Array.isArray(F.settings.kpis.order)&&(R.order=F.settings.kpis.order.filter(st=>ze.some(ba=>ba.id===st))),F.settings.kpis.visible&&(R.visible={...$,...F.settings.kpis.visible})),F.settings?.charts&&(V={...V||{},...F.settings.charts})}),Y.length>0&&D(Y),E(ve),R.order&&R.order.length>0&&H(R.order),R.visible&&U(R.visible),V&&se(F=>({...F,...V}))}else{const Y=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(Y){const V=JSON.parse(Y);V.order&&V.visible&&(D(V.order),E(V.visible))}const ve=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(ve){const V=JSON.parse(ve);V.order&&H(V.order),V.visible&&U(V.visible)}const R=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(R){const V=JSON.parse(R);se(F=>({...F,...V}))}}}catch(ee){console.warn("Preferências do dashboard não carregadas, usando padrão.",ee);const le=typeof window<"u"?window.localStorage.getItem("dashboard_widgets"):null;if(le){const R=JSON.parse(le);R.order&&R.visible&&(D(R.order),E(R.visible))}const Y=typeof window<"u"?window.localStorage.getItem("dashboard_kpis"):null;if(Y){const R=JSON.parse(Y);R.order&&H(R.order),R.visible&&U(R.visible)}const ve=typeof window<"u"?window.localStorage.getItem("dashboard_charts"):null;if(ve){const R=JSON.parse(ve);se(V=>({...V,...R}))}}}catch(f){console.error(f),w("Erro ao carregar dados do dashboard.")}finally{O(!1)}}c()},[e,v,u]);const{totalVendas:ua,qtdVendas:ma,ticketMedio:va,totalDiferenciado:pa,totalOrcamentos:fa,conversao:ha,metaSomada:ga,atingimentoMeta:xa}=o.useMemo(()=>{let c=0,f=g.length,l=0;g.forEach(W=>{const oe=W.vendas_recibos||[];let me=0;oe.forEach(ee=>{const le=Number(ee.valor_total||0);me+=le,(ee.produtos?.regra_comissionamento?.toLowerCase()||"")==="diferenciado"&&(l+=le)}),c+=me});const m=f>0?c/f:0,k=j.length,B=k>0?f/k*100:0,L=P.reduce((W,oe)=>W+Number(oe.meta_geral||0),0),Z=L>0?c/L*100:0;return{totalVendas:c,qtdVendas:f,ticketMedio:m,totalDiferenciado:l,totalOrcamentos:k,conversao:B,metaSomada:L,atingimentoMeta:Z}},[g,j,P]),ke=o.useMemo(()=>{const c=new Map;return g.forEach(f=>{const l=f.destinos?.nome||"Sem destino",m=(f.vendas_recibos||[]).reduce((k,B)=>k+Number(B.valor_total||0),0);c.set(l,(c.get(l)||0)+m)}),Array.from(c.entries()).map(([f,l])=>({name:f,value:l})).sort((f,l)=>l.value-f.value)},[g]),at=o.useMemo(()=>ke.slice(0,5),[ke]),be=o.useMemo(()=>{const c=new Map;return g.forEach(f=>{(f.vendas_recibos||[]).forEach(l=>{const m=l.produtos?.nome||"Sem produto",k=Number(l.valor_total||0);c.set(m,(c.get(m)||0)+k)})}),Array.from(c.entries()).map(([f,l])=>({name:f,value:l}))},[g]),Re=o.useMemo(()=>{const c=new Map;return g.forEach(l=>{const m=(l.data_lancamento||"").slice(0,10);if(!m)return;const k=(l.vendas_recibos||[]).reduce((B,L)=>B+Number(L.valor_total||0),0);c.set(m,(c.get(m)||0)+k)}),Array.from(c.entries()).sort(([l],[m])=>l<m?-1:1).map(([l,m])=>{const[k,B,L]=l.split("-"),Z=k&&B&&L?`${L.padStart(2,"0")}/${B.padStart(2,"0")}`:l;return{date:l,label:Z,value:m}})},[g]),rt=o.useMemo(()=>[...j].sort((f,l)=>f.data_orcamento<l.data_orcamento?1:-1).slice(0,10),[j]),nt=o.useMemo(()=>{const f=new Date().getMonth();return p.filter(l=>{if(!l.nascimento)return!1;const m=new Date(l.nascimento);return isNaN(m.getTime())?!1:m.getMonth()===f})},[p]),kt=c=>c.length?n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:c.map((f,l)=>n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("span",{style:{display:"inline-block",width:10,height:10,borderRadius:2,background:X[l%X.length]}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600,color:"#0f172a"},children:f.name}),n.jsx("div",{style:{color:"#475569"},children:J(Number(f.value||0))})]})]},`${f.name}-${l}`))}):null;if(a&&!e||i.loading)return n.jsx("div",{children:"Carregando contexto do dashboard..."});if(!i.ativo)return n.jsx("div",{children:"Você não possui acesso ao módulo de Dashboard."});const it=c=>{switch(c){case"kpis":return n.jsx("div",{className:"card-base card-purple mb-3",style:{paddingBottom:12},children:n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:10},children:z.filter(l=>$[l]!==!1).map(l=>{switch(l){case"kpi_vendas_total":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Vendas no período"}),n.jsx("div",{className:"kpi-value",children:J(ua)})]},l);case"kpi_qtd_vendas":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Qtd. vendas"}),n.jsx("div",{className:"kpi-value",children:ma})]},l);case"kpi_ticket_medio":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Ticket médio"}),n.jsx("div",{className:"kpi-value",children:J(va)})]},l);case"kpi_diferenciado":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Comissão Diferenciada"}),n.jsx("div",{className:"kpi-value",children:J(pa)})]},l);case"kpi_orcamentos":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Orçamentos"}),n.jsx("div",{className:"kpi-value",children:fa})]},l);case"kpi_conversao":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Conv. Orç → Vendas"}),n.jsxs("div",{className:"kpi-value",children:[ha.toFixed(1),"%"]})]},l);case"kpi_meta":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Meta somada (R$)"}),n.jsx("div",{className:"kpi-value",children:J(ga)})]},l);case"kpi_atingimento":return n.jsxs("div",{className:"kpi-card",style:{display:"flex",flexDirection:"column",gap:4},children:[n.jsx("div",{className:"kpi-label",children:"Atingimento da meta"}),n.jsxs("div",{className:"kpi-value",children:[xa.toFixed(1),"%"]})]},l);default:return null}})})});case"vendas_destino":const f=G.vendas_destino==="bar"?"Vendas por Destino (Visão Completa)":"Vendas por destino (Top 5)";return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:f}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:G.vendas_destino||"pie",onChange:l=>tt("vendas_destino",l.target.value),children:[n.jsx("option",{value:"pie",children:"Pizza"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:ke.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):G.vendas_destino==="bar"?n.jsx(ye,{children:n.jsxs(ot,{data:ke,children:[n.jsx(Te,{dataKey:"name",hide:!0}),n.jsx(Me,{}),n.jsx(je,{formatter:l=>J(Number(l||0))}),n.jsx($e,{dataKey:"value",children:ke.map((l,m)=>n.jsx(de,{fill:X[m%X.length]},`cell-dest-${m}`))})]})}):n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(ye,{children:n.jsxs($t,{children:[n.jsx(ut,{data:at,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:at.map((l,m)=>n.jsx(de,{fill:X[m%X.length]},`cell-${m}`))}),n.jsx(je,{formatter:l=>J(Number(l||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:kt(at)})]})})]});case"vendas_produto":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Vendas por produto"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:G.vendas_produto||"bar",onChange:l=>tt("vendas_produto",l.target.value),children:[n.jsx("option",{value:"bar",children:"Barras"}),n.jsx("option",{value:"pie",children:"Pizza"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:be.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):G.vendas_produto==="pie"?n.jsxs("div",{style:{display:"flex",gap:16,alignItems:"center",height:"100%"},children:[n.jsx("div",{style:{flex:1,height:"100%"},children:n.jsx(ye,{children:n.jsxs($t,{children:[n.jsx(ut,{data:be,dataKey:"value",nameKey:"name",outerRadius:90,label:!1,labelLine:!1,children:be.map((l,m)=>n.jsx(de,{fill:X[m%X.length]},`cell-prod-pie-${m}`))}),n.jsx(je,{formatter:l=>J(Number(l||0))})]})})}),n.jsx("div",{style:{minWidth:220,maxHeight:"100%",overflowY:"auto"},children:kt(be)})]}):n.jsx(ye,{children:n.jsxs(ot,{data:be,children:[n.jsx(Te,{dataKey:"name",hide:!0}),n.jsx(Me,{}),n.jsx(je,{formatter:l=>J(Number(l||0))}),n.jsx($e,{dataKey:"value",children:be.map((l,m)=>n.jsx(de,{fill:X[m%X.length]},`cell-prod-${m}`))})]})})})]});case"timeline":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsx("h3",{style:{marginBottom:8},children:"Evolução das vendas no período"}),n.jsxs("select",{className:"form-select",style:{maxWidth:160},value:G.timeline||"line",onChange:l=>tt("timeline",l.target.value),children:[n.jsx("option",{value:"line",children:"Linha"}),n.jsx("option",{value:"bar",children:"Barras"})]})]}),n.jsx("div",{style:{width:"100%",height:260},children:Re.length===0?n.jsx("div",{style:{fontSize:"0.9rem"},children:"Sem dados para o período."}):G.timeline==="bar"?n.jsx(ye,{children:n.jsxs(ot,{data:Re,children:[n.jsx(Te,{dataKey:"label"}),n.jsx(Me,{}),n.jsx(je,{formatter:l=>J(Number(l||0))}),n.jsx($e,{dataKey:"value",children:Re.map((l,m)=>n.jsx(de,{fill:X[m%X.length]},`cell-time-${m}`))})]})}):n.jsx(ye,{children:n.jsxs(Pr,{data:Re,children:[n.jsx(Te,{dataKey:"label"}),n.jsx(Me,{}),n.jsx(je,{formatter:l=>J(Number(l||0))}),n.jsx(wr,{type:"monotone",dataKey:"value",stroke:"#a855f7",strokeWidth:2,dot:!1})]})})})]});case"orcamentos":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Orçamentos recentes (",rt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[680px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Data"}),n.jsx("th",{children:"Cliente"}),n.jsx("th",{children:"Destino"}),n.jsx("th",{children:"Status"}),n.jsx("th",{children:"Valor"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[rt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:6,children:"Nenhum orçamento no período."})}),rt.map(l=>n.jsxs("tr",{children:[n.jsx("td",{children:l.data_orcamento?new Date(l.data_orcamento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:l.clientes?.nome||"-"}),n.jsx("td",{children:l.destinos?.nome||"-"}),n.jsx("td",{children:l.status||"-"}),n.jsx("td",{children:J(Number(l.valor||0))}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>At(l),children:"Ver"})})]},l.id))]})]})})]});case"aniversariantes":return n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("h3",{style:{marginBottom:8},children:["Aniversariantes do mês (",nt.length,")"]}),n.jsx("div",{className:"table-container overflow-x-auto",children:n.jsxs("table",{className:"table-default min-w-[520px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Nome"}),n.jsx("th",{children:"Data nasc."}),n.jsx("th",{children:"Idade"}),n.jsx("th",{children:"Telefone"}),n.jsx("th",{children:"Ver"})]})}),n.jsxs("tbody",{children:[nt.length===0&&n.jsx("tr",{children:n.jsx("td",{colSpan:5,children:"Nenhum aniversariante este mês."})}),nt.map(l=>{const m=Wt(l.nascimento);return n.jsxs("tr",{children:[n.jsx("td",{children:l.nome}),n.jsx("td",{children:l.nascimento?new Date(l.nascimento).toLocaleDateString("pt-BR"):"-"}),n.jsx("td",{children:m??"-"}),n.jsx("td",{children:l.telefone||"-"}),n.jsx("td",{children:n.jsx("button",{className:"btn btn-light",onClick:()=>Ot(l),children:"Ver"})})]},l.id)})]})]})})]});default:return null}};return n.jsxs("div",{className:"dashboard-geral-page",children:[n.jsxs("div",{className:"card-base card-purple mb-3",children:[n.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:8,marginBottom:8},children:[n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="mes_atual"?"#4f46e5":void 0,color:s==="mes_atual"?"#e5e7eb":void 0},onClick:()=>It("mes_atual"),children:"Mês atual"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="ultimos_30"?"#4f46e5":void 0,color:s==="ultimos_30"?"#e5e7eb":void 0},onClick:()=>It("ultimos_30"),children:"Últimos 30 dias"}),n.jsx("button",{type:"button",className:"btn btn-light",style:{backgroundColor:s==="personalizado"?"#4f46e5":void 0,color:s==="personalizado"?"#e5e7eb":void 0},onClick:()=>d("personalizado"),children:"Personalizado"}),n.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>M(!0),children:"Personalizar dashboard"})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data início"}),n.jsx("input",{type:"date",className:"form-input",value:v,onChange:c=>{d("personalizado"),b(c.target.value)}})]}),n.jsxs("div",{className:"form-group",children:[n.jsx("label",{className:"form-label",children:"Data fim"}),n.jsx("input",{type:"date",className:"form-input",value:u,onChange:c=>{d("personalizado"),h(c.target.value)}})]})]})]}),Oe("kpis")&&n.jsx("div",{children:it("kpis")}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:I.filter(c=>["vendas_destino","vendas_produto","timeline"].includes(c)&&Oe(c)).map(c=>n.jsx("div",{children:it(c)},c))}),n.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(360px, 1fr))",gap:12,alignItems:"start"},children:I.filter(c=>["orcamentos","aniversariantes"].includes(c)&&Oe(c)).map(c=>n.jsx("div",{children:it(c)},c))}),ae&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:60},children:n.jsxs("div",{style:{width:"95%",maxWidth:520,background:"#0f172a",border:"1px solid #1f2937",borderRadius:10,padding:16,color:"#e5e7eb",maxHeight:"90vh",overflowY:"auto"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:12,alignItems:"center"},children:[n.jsx("h3",{children:"Personalizar dashboard"}),n.jsx("button",{className:"btn btn-light",onClick:()=>M(!1),children:"Fechar"})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:10},children:I.map((c,f)=>{const l=Ee.find(m=>m.id===c);return l?n.jsxs("div",{style:{border:"1px solid #1f2937",borderRadius:8,padding:10,display:"flex",alignItems:"center",gap:8,flexDirection:"column"},children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",width:"100%",gap:8},children:[n.jsx("input",{type:"checkbox",checked:Oe(c),onChange:()=>Ze(c)}),n.jsx("div",{style:{flex:1},children:l.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Ke(c,"up"),disabled:f===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>Ke(c,"down"),disabled:f===I.length-1,children:"↓"})]})]}),c==="kpis"&&Oe(c)&&n.jsxs("div",{style:{width:"100%",borderTop:"1px solid #1f2937",paddingTop:8,marginTop:8,display:"flex",flexDirection:"column",gap:8},children:[n.jsx("div",{style:{fontWeight:600,fontSize:"0.9rem"},children:"KPIs visíveis e ordem"}),z.map((m,k)=>{const B=ze.find(L=>L.id===m);return B?n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("input",{type:"checkbox",checked:$[m]!==!1,onChange:()=>et(m)}),n.jsx("div",{style:{flex:1},children:B.titulo}),n.jsxs("div",{style:{display:"flex",gap:6},children:[n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>wt(m,"up"),disabled:k===0,children:"↑"}),n.jsx("button",{type:"button",className:"btn btn-light",onClick:()=>wt(m,"down"),disabled:k===z.length-1,children:"↓"})]})]},m):null})]})]},c):null})})]})}),Q&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:700,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Detalhes do orçamento"}),n.jsx("button",{className:"btn btn-light",onClick:()=>At(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Cliente:"})," ",Q.clientes?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Destino:"})," ",Q.destinos?.nome||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data orçamento:"})," ",Q.data_orcamento?new Date(Q.data_orcamento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Data viagem:"})," ",Q.data_viagem?new Date(Q.data_viagem).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Status:"})," ",Q.status||"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Valor:"})," ",J(Number(Q.valor||0))]}),Q.notas&&n.jsxs("p",{style:{marginTop:8},children:[n.jsx("strong",{children:"Notas:"})," ",Q.notas]})]})}),xe&&n.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(15,23,42,0.75)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50},children:n.jsxs("div",{style:{width:"95%",maxWidth:600,maxHeight:"90vh",overflowY:"auto",background:"#020617",borderRadius:10,border:"1px solid #1f2937",padding:18,color:"#e5e7eb"},children:[n.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:10},children:[n.jsx("h3",{children:"Dados do cliente"}),n.jsx("button",{className:"btn btn-light",onClick:()=>Ot(null),children:"Fechar"})]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nome:"})," ",xe.nome]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Nascimento:"})," ",xe.nascimento?new Date(xe.nascimento).toLocaleDateString("pt-BR"):"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Idade:"})," ",Wt(xe.nascimento)??"-"]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Telefone:"})," ",xe.telefone||"-"]})]})}),N&&n.jsx("div",{style:{marginTop:12,fontSize:"0.9rem"},children:"Carregando dados do dashboard..."})]})};export{Ci as default};
